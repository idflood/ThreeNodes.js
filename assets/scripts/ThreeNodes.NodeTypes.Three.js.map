{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 10d94be00346db46748d","webpack:///./NodeTypes.Three.coffee","webpack:///external \"jQuery\"","webpack:///external \"_\"","webpack:///external \"Backbone\"","webpack:///./threenodes/nodes/models/components/Geometry.coffee","webpack:///./threenodes/nodes/models/components/Lights.coffee","webpack:///./threenodes/nodes/models/components/Materials.coffee","webpack:///./threenodes/nodes/models/components/PostProcessing.coffee","webpack:///./threenodes/nodes/models/components/Three.coffee","webpack:///./threenodes/nodes/models/components/ConstructiveSolidGeometry.coffee","webpack:///./threenodes/nodes/models/components/Particle.coffee","webpack:///external \"Blob\"","webpack:///external \"FileSaver\"","webpack:///external \"Three\"","webpack:///./threenodes/utils/Utils.coffee","webpack:///./threenodes/nodes/models/Node.coffee","webpack:///./threenodes/nodes/models/components/Three/NodeMaterialBase.coffee","webpack:///./threenodes/nodes/models/components/Three/Object3D.coffee","webpack:///./threenodes/utils/WebglBase.coffee","webpack:///./threenodes/utils/Indexer.coffee","webpack:///./libs/namespace.js","webpack:///./libs/csg.js","webpack:///./libs/ThreeCSG.js","webpack:///./libs/Tween.js","webpack:///./libs/Sparks.js","webpack:///./libs/three-extras/js/shaders/VignetteShader.js","webpack:///./libs/three-extras/js/shaders/HorizontalBlurShader.js","webpack:///./libs/three-extras/js/shaders/VerticalBlurShader.js","webpack:///./libs/three-extras/js/shaders/BleachBypassShader.js","webpack:///./libs/three-extras/js/shaders/ConvolutionShader.js","webpack:///./libs/three-extras/js/shaders/FilmShader.js","webpack:///./libs/three-extras/js/postprocessing/DotScreenPass.js","webpack:///./libs/three-extras/js/postprocessing/BloomPass.js","webpack:///./libs/three-extras/js/postprocessing/FilmPass.js","webpack:///./libs/three-extras/js/loaders/ColladaLoader.js","webpack:///./threenodes/fields/collections/Fields.coffee","webpack:///./libs/three-extras/js/postprocessing/EffectComposer.js","webpack:///./libs/three-extras/js/postprocessing/MaskPass.js","webpack:///./libs/three-extras/js/postprocessing/RenderPass.js","webpack:///./libs/three-extras/js/postprocessing/ShaderPass.js","webpack:///./libs/three-extras/js/shaders/CopyShader.js","webpack:///./libs/canvas-toBlob.min.js","webpack:///./threenodes/fields/models/Field.coffee","webpack:///./threenodes/fields/views/sidebar/BoolField.coffee","webpack:///./threenodes/fields/views/sidebar/StringField.coffee","webpack:///./threenodes/fields/views/sidebar/FloatField.coffee","webpack:///./threenodes/fields/views/sidebar/Vector2Field.coffee","webpack:///./threenodes/fields/views/sidebar/Vector3Field.coffee","webpack:///./threenodes/fields/views/sidebar/Vector4Field.coffee","webpack:///./threenodes/fields/views/sidebar/QuaternionField.coffee","webpack:///./threenodes/fields/views/sidebar/EulerField.coffee","webpack:///./threenodes/fields/views/sidebar/BaseField.coffee","webpack:///./templates/field_sidebar_container.tmpl.html","webpack:///./threenodes/views/sidebar/SidebarTextfield.coffee","webpack:///./templates/field_textfield.tmpl.html","webpack:///./libs/draggable-number.js"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mDAAkD,kBAAkB,EAAE;AACtE;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,mCAAkC,UAAU,EAAE;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,YAAY;AAC7B,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,mBAAmB;;AAE1C;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mDAAkD,kBAAkB,EAAE;AACtE;AACA,IAAG;;AAEH;AACA,8CAA6C,UAAU,EAAE;AACzD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD,kBAAkB,EAAE;AACvE;AACA,IAAG;;AAEH;AACA;AACA,oBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACllBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA,kDAAiD,eAAe;AAChE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA,eAAc,mBAAmB;AACjC;AACA;;AAEA,gBAAe,2BAA2B;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qDAAoD,mBAAmB;AACvE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,sCAAqC,QAAQ;AAC7C;AACA;AACA;;AAEA;AACA;AACA,kE;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAc,mBAAmB;AACjC;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA,IAAG;;AAEH;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA,yDAAwD,mBAAmB;;AAE3E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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ACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;;;AAGA;;AAEA,GAAE;;AAEF;AACA,yCAAwC,KAAK;AAC7C;AACA;AACA;;AAEA;;AAEA;;AAEA,sEAAqE;;AAErE;;;AAGA,6BAA4B;AAC5B,wBAAuB;AACvB,2BAA0B;;AAE1B;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;;;;AAIA;AACA;;AAEA,GAAE;;;AAGF;AACA;;AAEA;;AAEA;AACA,oBAAmB,SAAS;AAC5B;AACA;;AAEA;AACA;AACA,qBAAoB,SAAS;AAC7B;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,oBAAmB,SAAS;AAC5B;AACA;AACA,yBAAwB,UAAU;AAClC;AACA;AACA;AACA;AACA;;;AAGA;AACA,wBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD;AACjD;;AAEA,cAAa;AACb;AACA;AACA;;AAEA;;AAEA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA,qBAAoB,SAAS;AAC7B;AACA;;AAEA;;AAEA,iDAAgD;;AAEhD;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB;;AAEvB;AACA;AACA;;AAEA,yDAAwD;AACxD,yDAAwD;AACxD;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,6B;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,yB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;;AAEhB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA,4BAA2B,UAAU;AACrC;AACA;;AAEA;;AAEA;;;;AAIA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AA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;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,gBAAe;;AAEf;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;;;AC/yJA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,oBAGA,CAAQ,EAAR,CAHA;;AAKA;AAAA,wBALA;;AAAA;AAQE;;;;;;;;;;;;;;;;;;;;;;IAAA;;AAAA,iCAAY,SAAC,MAAD,EAAS,OAAT;AACV;AAAA,KACA,IAAC,KAAD,GAAQ,OAAO,CAAC,IADhB;AAAA,KAEA,IAAC,QAAD,GAAW,OAAO,CAAC,OAFnB;AAAA,KAGA,IAAC,OAAD,GAAU,EAHV;AAAA,KAIA,IAAC,QAAD,GAAW,EAJX;AAAA,KAKA,IAAC,iBAAD,GAAoB;AAAA,OAAC,MAAM,EAAP;AAAA,OAAW,QAAQ,EAAnB;AAAA,OAAuB,OAAO,EAA9B;MALpB;YAOA,IAAC,UAAD,CAAW,IAAC,KAAI,CAAC,SAAN,EAAX,EARU;GAAA,CAAZ;;AAAA,oBAWA,UAAS;AACP,SAAC,kBAAD;AACA,YAAM,IAAC,OAAM,CAAC,MAAR,GAAiB,CAAvB;AACE,WAAC,OAAO,GAAE,CAAC,MAAX,GADF;KAAA,CADA;AAAA,KAGA,WAAQ,KAHR;AAAA,KAIA,WAAQ,OAJR;AAAA,KAKA,WAAQ,QALR;AAAA,KAMA,WAAQ,QANR;YAOA,WAAQ,kBARD;GAAA,CAXT;;AAAA,oBAsBA,OAAM,SAAC,IAAD;AACJ;AAAA,SAAG,SAAS,KAAK,CAAC,IAAD,CAAjB;AACE,cAAO,KAAP,CADF;MAAA;AAGA;AAAA;kBAAA;AACE,WAAG,EAAE,CAAC,GAAN;AAEE,sBAAa,IAAC,OAAO,EAAC,CAAC,IAAF,CAArB,CAFF;QAAA;AAKE,sBAAa,IAAC,OAAO,EAAC,CAAC,IAAF,GAAS,GAAT,GAAe,CAAC,CAAC,GAAjB,CAArB,CALF;QAAA;AAMA,WAAG,UAAH;AAAmB,mBAAU,CAAC,IAAX,CAAgB,CAAC,CAAC,GAAlB,EAAnB;QAPF;AAAA,MAHA;YAWA,KAZI;GAAA,CAtBN;;AAAA,oBAoCA,SAAQ;AACN;AAAA,YACE;AAAA,aAAI,MAAM,CAAC,GAAP,CAAW,IAAC,OAAZ,EAAoB,SAAC,CAAD,EAAI,CAAJ;gBAAU,CAAC,CAAC,MAAF,GAAV;OAAA,CAApB,CAAJ;AAAA,OACA,KAAK,MAAM,CAAC,GAAP,CAAW,IAAC,QAAZ,EAAqB,SAAC,CAAD,EAAI,CAAJ;gBAAU,CAAC,CAAC,MAAF,GAAV;OAAA,CAArB,CADL;MADF;AAGA,YAAO,IAAP,CAJM;GAAA,CApCR;;AAAA,oBA0CA,WAAU,SAAC,GAAD,EAAM,MAAN;AACR;;OADc,SAAS;MACvB;AAAA,cAAY,WAAU,IAAb,GAAuB,SAAvB,GAAsC,QAA/C;AACA,YAAO,IAAE,QAAQ,KAAjB,CAFQ;GAAA,CA1CV;;AAAA,oBA8CA,WAAU,SAAC,GAAD,EAAM,KAAN;AACR,SAAG,IAAC,QAAQ,KAAZ;cACE,IAAC,QAAQ,KAAI,CAAC,QAAd,CAAuB,KAAvB,EADF;MADQ;GAAA,CA9CV;;AAAA,oBAkDA,wBAAuB;AACrB;AAAA,cAAS,CAAT;AACA;AAAA;sBAAA;AACE,aAAM,CAAC,CAAC,UAAU,CAAC,KAAnB;AACA,WAAG,OAAO,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,OAAzB;AACE,aAAG,GAAG,CAAC,MAAJ,GAAa,MAAhB;AACE,oBAAS,GAAG,CAAC,MAAb,CADF;UADF;QAFF;AAAA,MADA;AAOA,YAAO,SAAS,CAAhB,CARqB;GAAA,CAlDvB;;AAAA,oBA4DA,mBAAkB;AAChB;AAAA,WAAM,EAAN;AACA;AAAA;sBAAA;AACE;AAAA;qBAAA;AACE,YAAI,IAAG,CAAC,MAAJ,CAAJ,GAAkB,CAAC,CAAC,UAAU,CAAC,IAA/B,CADF;AAAA,QADF;AAAA,MADA;YAIA,IALgB;GAAA,CA5DlB;;AAAA,oBAmEA,qBAAoB;AAClB;AAAA,WAAM,EAAN;AACA;AAAA;sBAAA;AACE,WAAI,IAAC,OAAO,OAAZ;AACA;AAAA;qBAAA;AACE,YAAI,IAAG,CAAC,MAAJ,CAAJ,GAAkB,CAAC,CAAC,QAAQ,CAAC,IAA7B,CADF;AAAA,QAFF;AAAA,MADA;YAKA,IANkB;GAAA,CAnEpB;;AAAA,oBA2EA,uBAAsB;AACpB;AAAA;AAAA;sBAAA;AACE,WAAG,CAAC,CAAC,WAAW,CAAC,MAAd,KAAwB,CAA3B;AACE,gBAAO,IAAP,CADF;QADF;AAAA;AAGA,YAAO,KAAP,CAJoB;GAAA,CA3EtB;;AAAA,oBAiFA,wBAAuB;AACrB;AAAA;AAAA;sBAAA;AACE,WAAG,CAAC,CAAC,WAAW,CAAC,MAAd,KAAwB,CAA3B;AACE,gBAAO,IAAP,CADF;QADF;AAAA;AAGA,YAAO,KAAP,CAJqB;GAAA,CAjFvB;;AAAA,oBAuFA,uBAAsB;AACpB,YAAO,0BAA0B,uBAAjC,CADoB;GAAA,CAvFtB;;AAAA,oBA0FA,yBAAwB;AACtB;AAAA;AAAA;UAAA;sBAAA;AACE,WAAI,IAAC,OAAO,OAAZ;AAAA,oBACA,CAAC,CAAC,OAAF,GAAY,MADZ,CADF;AAAA;oBADsB;GAAA,CA1FxB;;AAAA,oBA+FA,oBAAmB;YACjB,IAAC,OAAD,CAAQ,mBAAR,EADiB;GAAA,CA/FnB;;AAAA,oBAkGA,oBAAmB;YACjB,IAAC,OAAD,CAAQ,mBAAR,EADiB;GAAA,CAlGnB;;AAAA,oBAsGA,WAAU,SAAC,IAAD,EAAO,KAAP,EAAc,SAAd;AACR;;OADsB,YAAY;MAClC;AAAA,SAAI,KAAJ;AAAA,KACA,eAAgB,cAAa,QAD7B;AAEA,SAAG,CAAC,CAAC,IAAF,CAAO,KAAP,MAAiB,QAApB;AACE,eAAQ,IAAC,oBAAD,CAAqB,KAArB,CAAR,CADF;MAFA;AAIA,SAAI,4BAAJ;AACE,YAAK,CAAC,cAAN,GAAuB,IAAvB,CADF;MAJA;AAAA,KAOA,QAAY,cAAU,CAAC,IAAI,CAAC,MAAM,CAAC,MAAO,MAAK,CAAC,IAAN,CAA9B,CACV;AAAA,aAAM,IAAN;AAAA,OACA,OAAO,KAAK,CAAC,GADb;AAAA,OAEA,eAAe,KAAK,CAAC,MAFrB;AAAA,OAGA,MAAM,IAAC,KAHP;AAAA,OAIA,WAAW,YAJX;AAAA,OAKA,WAAS,KAAK,CAAC,SAAD,CALd;AAAA,OAMA,UAAU,KAAK,CAAC,QANhB;AAAA,OAOA,SAAS,IAAC,QAPV;AAAA,OAQA,gBAAgB,KAAK,CAAC,cARtB;MADU,CAPZ;AAAA,KAkBA,SAAY,KAAK,CAAC,GAAN,CAAU,WAAV,MAA0B,KAA7B,GAAwC,QAAxC,GAAsD,SAlB/D;AAAA,KAmBA,cAAc,KAAK,CAAC,GAAN,CAAU,MAAV,CAnBd;AAoBA,SAAG,KAAK,CAAC,QAAT;AAEE,sBAAe,MAAM,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,GAApB,CAAwB,KAAxB,CAArB,CAFF;MApBA;AAAA,KAuBA,IAAE,QAAQ,aAAV,GAAyB,KAvBzB;AAAA,KAwBA,IAAC,IAAD,CAAK,KAAL,CAxBA;YAyBA,MA1BQ;GAAA,CAtGV;;AAAA,oBAkIA,YAAW,SAAC,YAAD;AACT;AAAA;AAEE;AACE,iBAAQ,YAAa,KAAK,OAA1B;AAAA,SACA,IAAC,SAAD,CAAU,KAAV,EAAiB,KAAjB,EAAwB,GAAxB,CADA,CADF;AAAA,QAFF;AAAA;YAKA,KANS;GAAA,CAlIX;;AAAA,oBA0IA,gBAAe;AACb,SAAC,QAAD,CAAS,eAAT;YACA,KAFa;GAAA,CA1If;;AAAA,oBA8IA,sBAAqB,SAAC,aAAD;AACnB;AAAA;AAAQ,eAAO,CAAC,CAAC,IAAF,CAAO,aAAP,CAAP;AAAA,cACD,QADC;kBACa,QADb;AAAA,cAED,SAFC;kBAEc,OAFd;AAAA;kBAGD,SAHC;AAAA;SAAR;AAAA,KAIA,MACE;AAAA,aAAM,KAAN;AAAA,OACA,KAAK,aADL;MALF;AAOA,YAAO,GAAP,CARmB;GAAA,CA9IrB;;iBAAA;;IADmB,QAAQ,CAAC,WAP9B;;AAAA,OAgKM,CAAC,OAAP,GAAiB,MAhKjB;;;;;;;ACAA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,qBAAoB;;AAEpB;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA;;AAEA,eAAc,QAAQ;;AAEtB;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAI;;AAEJ;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;;;;;;AC/IA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,IAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,uDAAsD;AACtD;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;;;;;ACrFA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;;;;;AClDA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;;;;;;AClDA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,gBAAe,yBAAyB;AACxC,gBAAe;;AAEf,GAAE;;AAEF;;AAEA,qBAAoB;;AAEpB,iBAAgB;;AAEhB,cAAa;AACb,8EAA6E;;AAE7E,KAAI;;AAEJ;;AAEA;;AAEA,0BAAyB;;AAEzB,+BAA8B;;AAE9B,qBAAoB;;AAEpB,iBAAgB;;AAEhB,6CAA4C;AAC5C,oCAAmC;;AAEnC,KAAI;;AAEJ;;AAEA;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,iDAAgD,WAAW;AAC3D,QAAO;AACP,sDAAqD,WAAW;AAChE;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;;;;;;;;;;AC1GD;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,QAEA,GAAU,oBAAQ,EAAR,CAFV;;AAAA,UAGA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAHtC;;AAAA,UAKA,GAAY,oBAAQ,EAAR,CALZ;;AAAA,YAMA,GAAc,oBAAQ,GAAR,CANd;;AAAA,WAOA,GAAa,oBAAQ,GAAR,CAPb;;AAAA,aAQA,GAAe,oBAAQ,GAAR,CARf;;AAAA,aASA,GAAe,oBAAQ,GAAR,CATf;;AAAA,aAUA,GAAe,oBAAQ,GAAR,CAVf;;AAAA,gBAWA,GAAkB,oBAAQ,GAAR,CAXlB;;AAAA,WAYA,GAAa,oBAAQ,GAAR,CAZb;;AAcA;AAAA,kBAdA;;AAAA;AAiBE;;;;;;;;;;;;;;;;;;;;;;;IAAA;;AAAA,YAAC,KAAD,GAAQ,KAAR;;AAAA,GAGA,SAAC,eAAD,GAAqB,aAHrB;;AAAA,uBAKA,WAAU;YACR;AAAA,YAAK,EAAL;AAAA,OACA,MAAM,WADN;AAAA,OAEA,cAAc,eAFd;AAAA,OAGA,WAAW,KAHX;AAAA,OAIA,OAAO,CAJP;AAAA,OAKA,WAAS,IALT;OADQ;GAAA,CALV;;AAAA,uBAcA,OAAM,aAdN;;AAAA,uBAiBA,YAAW,SAAC,KAAD,EAAQ,OAAR;AAAoB,YAAO,IAAP,CAApB;GAAA,CAjBX;;AAAA,uBAqBA,MAAK,SAAC,GAAD,EAAM,KAAN,EAAa,OAAb;;OAAa,UAAU;MAC1B;AAAA,SAAG,QAAO,OAAV;AACE,WAAI,CAAC,UAAW,KAAhB,GAAuB,KAAvB;AACA,cAAO,IAAP,CAFF;MAAA;YAIA,+CALG;GAAA,CArBL;;AAAA,uBA4BA,OAAM,SAAC,IAAD;AAEJ;AAAA,SAAG,SAAS,SAAQ,KAApB;AACE,cADF;MAAA;AAGA,SAAG,CAAC,CAAC,IAAF,CAAO,IAAP,MAAgB,QAAnB;AAEE,WAAC,SAAD,CAAU,IAAV,EAFF;MAAA;AAKE;AACE,aAAC,WAAU,CAAC,KAAM,UAAlB,GAA8B,IAAK,UAAnC,CADF;AAAA,QALF;MAHA;AAUA,YAAO,IAAP,CAZI;GAAA,CA5BN;;AAAA,uBA0CA,aAAY,SAAC,OAAD;AACV;AAAA,YAAO,IAAP;AAAA,KAEA,IAAC,KAAD,GAAQ,OAAO,CAAC,IAFhB;AAAA,KAGA,IAAC,SAAD,GAAY,OAAO,CAAC,QAHpB;AAAA,KAIA,IAAC,eAAD,GAAqB,8BAAH,GAAgC,OAAO,CAAC,cAAxC,GAA4D,IAJ9E;AAAA,KAKA,UAAU,OAAO,CAAC,OAAR,IAAmB,UAAU,CAAC,SAAS,CAAC,cALlD;AAAA,KAQA,IAAC,QAAD,GAAW,IARX;AAAA,KAWA,IAAC,YAAD,GAAe,EAXf;AAAA,KAeA,IAAC,sBAAD,GAAyB,EAfzB;AAAA,KAkBA,IAAC,IAAD,CAAK,cAAL,EAAqB,IAAC,IAAD,CAAK,MAAL,CAArB,CAlBA;AAsBA,SAAG,IAAC,SAAD,IAAa,IAAC,SAAQ,CAAC,IAA1B;AACE,WAAC,IAAD,CAAK,cAAL,EAAqB,IAAC,IAAD,CAAK,MAAL,IAAe,GAAf,GAAqB,IAAC,SAAQ,CAAC,IAAI,CAAC,GAAf,CAAmB,KAAnB,CAA1C,EADF;MAtBA;AAwBA,SAAG,IAAC,IAAD,CAAK,KAAL,MAAe,EAAlB;cACE,IAAC,IAAD,CAAK,KAAL,EAAY,OAAO,CAAC,MAAR,EAAZ,EADF;MAzBU;GAAA,CA1CZ;;AAAA,uBAsEA,SAAQ;AACN,gBAAQ,sBAAR;AAAA,KACA,WAAQ,KADR;AAAA,KAEA,WAAQ,YAFR;AAAA,KAGA,WAAQ,OAHR;AAAA,KAIA,WAAQ,SAJR;YAKA,IAAC,QAAD,GANM;GAAA,CAtER;;AAAA,uBA8EA,UAAS,SAAC,GAAD,EAAM,IAAN;AACP;AAAA,SAAG,CAAC,CAAC,OAAF,CAAU,GAAV,KAAkB,CAAC,CAAC,OAAF,CAAU,IAAV,CAArB;AACE,WAAG,GAAG,CAAC,MAAJ,KAAc,IAAI,CAAC,MAAtB;AAAkC,gBAAO,KAAP,CAAlC;QAAA;AAAA,OACA,aAAa,IADb;AAEA;uBAAA;AACE,iBAAQ,IAAK,GAAb;AAEA,aAAG,IAAC,QAAD,CAAS,IAAT,EAAe,KAAf,MAAyB,KAA5B;AACE,wBAAa,KAAb;AACA,iBAFF;UAHF;AAAA,QAFA;AAQA,WAAG,eAAc,KAAjB;AACE,gBAAO,KAAP,CADF;QAAA;AAGE,gBAAO,IAAP,CAHF;QATF;MAAA,MAcK,IAAG,CAAC,CAAC,QAAF,CAAW,GAAX,KAAmB,CAAC,CAAC,QAAF,CAAW,IAAX,CAAtB;AACH,WAAG,sBAAa,mBAAb,IAA2B,GAAG,CAAC,IAAJ,KAAY,IAAI,CAAC,IAA/C;AACE,gBAAO,IAAP,CADF;QAAA;AAGA,cAAO,KAAP,CAJG;MAAA,MAMA,IAAG,QAAO,IAAV;AAAoB,cAAO,IAAP,CAApB;MApBL;AAsBA,YAAO,KAAP,CAvBO;GAAA,CA9ET;;AAAA,uBAuGA,WAAU,SAAC,CAAD;AACR;AAAA,gBAAW,IAAC,WAAW,SAAvB;AAEA,SAAG,IAAC,QAAD,CAAS,CAAT,EAAY,QAAZ,CAAH;AAA8B,cAAO,KAAP,CAA9B;MAFA;AAAA,KAKA,IAAC,QAAD,GAAW,IALX;AAAA,KAMA,YAAY,IAAC,eANb;AAAA,KAQA,eAAe,SAAC,IAAD;AACb,WAAI,CAAC,KAAL,GAAa,IAAb;AACA,WAAG,aAAa,IAAI,CAAC,MAArB;gBAAiC,aAAa,IAAI,CAAC,MAAlB,EAAjC;QAFa;KAAA,CARf;AAaA,SAAG,IAAC,KAAJ;AAAc,oBAAa,IAAC,KAAd,EAAd;MAbA;AAAA,KAgBA,UAAU,IAAC,eAAD,CAAgB,CAAhB,CAhBV;AAmBA,SAAG,CAAC,CAAC,IAAF,CAAO,OAAP,MAAmB,OAAtB;AACE,iBAAU,CAAC,CAAC,MAAF,CAAS,OAAT,EAAkB,SAAC,IAAD;gBAC1B,SAAQ,KADkB;OAAA,CAAlB,CAAV;AAEA,WAAG,IAAI,CAAC,WAAL,KAAoB,KAAvB;AACE,mBAAU,OAAV,CADF;QAAA;AAGE,aAAG,OAAO,CAAC,MAAR,KAAkB,CAArB;AACE,qBAAU,OAAV,CADF;UAAA;AAGE,qBAAU,IAAV,CAHF;UAHF;QAHF;MAnBA;AA+BA,SAAG,YAAW,IAAd;AACE,qBAAc,IAAC,WAAW,WAA1B;AACA,WAAG,gBAAe,IAAf,IAAuB,gBAAe,MAAzC;AACE,oBAAW,WAAX,CADF;QADA;AAAA,OAGA,UAAU,QAHV,CADF;MA/BA;AAAA,KAsCA,IAAC,WAAW,SAAZ,GAAuB,OAtCvB;AAAA,KAuCA,IAAC,QAAD,CAAS,eAAT,EAA0B,OAA1B,CAvCA;AA2CA;AACE,WAAC,sBAAsB,MAAvB,CAA6B,OAA7B,EADF;AAAA,MA3CA;AA+CA,SAAG,IAAC,WAAW,aAAZ,KAA4B,IAA/B;AACE;AAAA;6BAAA;AACE,mBAAU,CAAC,QAAQ,CAAC,QAApB,CAA6B,OAA7B,EADF;AAAA,QADF;MA/CA;AAmDA,YAAO,IAAP,CApDQ;GAAA,CAvGV;;AAAA,uBA6JA,WAAU,SAAC,KAAD;AACR;;OADS,QAAQ;MACjB;AAAA,WAAM,IAAC,WAAW,SAAlB;AACA,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,OAAlB;AACE,cAAO,GAAP,CADF;MAAA;AAGE,cAAO,GAAI,SAAQ,GAAG,CAAC,MAAZ,CAAX,CAHF;MAFQ;GAAA,CA7JV;;AAAA,uBAoKA,YAAW;AACT;AAAA,WAAM,IAAC,QAAP;AAAA,KACA,IAAC,QAAD,GAAW,KADX;YAEA,IAHS;GAAA,CApKX;;AAAA,uBAyKA,cAAa;YACX,IAAC,YAAW,CAAC,MAAb,GAAsB,EADX;GAAA,CAzKb;;AAAA,uBA4KA,gBAAe;AACb;AAAA,WAAM,IAAC,WAAW,SAAlB;AACA,SAAG,MAAM,CAAC,IAAP,CAAY,GAAZ,MAAoB,OAAvB;AACE,cAAO,CAAP,CADF;MADA;AAGA,YAAO,GAAG,CAAC,MAAX,CAJa;GAAA,CA5Kf;;AAAA,uBAkLA,sBAAqB;AACnB,SAAG,IAAI,CAAC,WAAL,KAAoB,KAApB,IAA6B,IAAI,CAAC,WAAL,KAAoB,IAApD;AACE,cAAO,IAAP,CADF;MAAA;AAEA,YAAO,KAAP,CAHmB;GAAA,CAlLrB;;AAAA,uBAuLA,SAAS;AACP;AAAA,WACE;AAAA,aAAM,IAAC,IAAD,CAAK,MAAL,CAAN;MADF;AAIA,SAAG,IAAC,SAAJ;AACE,UAAG,CAAC,GAAJ,GAAU,IAAC,SAAQ,CAAC,IAAI,CAAC,GAAf,CAAmB,KAAnB,CAAV,CADF;MAJA;AAAA,KAQA,MAAM,IAAC,IAAD,CAAK,OAAL,CARN;AAAA,KASA,WAAW,MAAM,CAAC,IAAP,CAAY,GAAZ,CATX;AAUA,SAAG,aAAY,QAAZ,IAAwB,aAAY,OAAvC;AACE,UAAG,CAAC,GAAJ,GAAU,GAAV,CADF;MAVA;AAcA,SAAG,aAAY,QAAf;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAAzB,IAAoC,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAA7D,IAAwE,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAAjG,IAA4G,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,KAAxI;AACE,YAAG,CAAC,GAAJ,GAAU,GAAV,CADF;QADF;MAdA;AAkBA,YAAO,GAAP,CAnBO;GAAA,CAvLT;;AAAA,uBA4MA,oBAAmB;AACjB;AAAA;AAAA;2BAAA;AACE,iBAAU,CAAC,MAAX,GADF;AAAA;YAEA,KAHiB;GAAA,CA5MnB;;AAAA,uBAiNA,eAAe,SAAC,GAAD;AACb,YAAO,GAAP,CADa;GAAA,CAjNf;;AAAA,uBAoNA,gBAAe,SAAC,CAAD;AACb,SAAG,IAAC,YAAW,CAAC,OAAb,CAAqB,CAArB,MAA2B,EAA9B;AACE,WAAC,YAAW,CAAC,IAAb,CAAkB,CAAlB;AACA,WAAG,IAAC,IAAD,CAAK,WAAL,MAAqB,IAAxB;AACE,aAAC,KAAI,CAAC,gBAAN,CAAuB,CAAvB,EAA0B,IAA1B,EADF;QADA;AAAA,OAGA,IAAC,KAAI,CAAC,mBAAN,CAA0B,IAA1B,CAHA,CADF;MAAA;AAKA,YAAO,CAAP,CANa;GAAA,CApNf;;AAAA,uBA4NA,uBAAsB,SAAC,CAAD;AACpB;AAAA,SAAC,KAAI,CAAC,gBAAN,CAAuB,CAAvB;AAAA,KAEA,MAAM,IAAC,YAAW,CAAC,OAAb,CAAqB,CAArB,CAFN;AAGA,SAAG,QAAO,EAAV;AACE,WAAC,YAAW,CAAC,MAAb,CAAoB,GAApB,EAAyB,CAAzB,EADF;MAHA;AAKA,SAAG,IAAC,YAAW,CAAC,MAAb,KAAuB,CAA1B;cACE,IAAC,KAAI,CAAC,kBAAN,CAAyB,IAAzB,EADF;MANoB;GAAA,CA5NtB;;AAAA,uBAsOA,oBAAmB;AACQ,YAAM,IAAC,YAAW,CAAC,MAAb,GAAsB,CAA5B;AAAzB,WAAC,YAAY,GAAE,CAAC,MAAhB,GAAyB;KAAA,CAAzB;AACA,YAAO,IAAP,CAFiB;GAAA,CAtOnB;;AAAA,uBA0OA,iBAAgB,SAAC,GAAD;AACd;AAAA,YAAO,IAAP;AACA,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,OAAlB;AACE,cAAO,CAAC,CAAC,GAAF,CAAM,GAAN,EAAW,SAAC,CAAD;gBAAO,IAAI,CAAC,YAAL,CAAkB,CAAlB,EAAP;OAAA,CAAX,CAAP,CADF;MADA;AAIA,YAAO,IAAC,aAAD,CAAc,GAAd,CAAP,CALc;GAAA,CA1OhB;;oBAAA;;IAFsB,QAAQ,CAAC,MAfjC;;AAAA;AAqQE;;;;;;IAAA;;AAAA,gCAAe,SAAC,GAAD;YACb,IADa;GAAA,CAAf;;AAAA,iBAGA,iBAAiB,SAAC,GAAD;AACf,YAAO,GAAP,CADe;GAAA,CAHjB;;cAAA;;IADgB,UApQlB;;AAAA,WA0QU,CAAC,IAAI,CAAC,YAAhB,CAA6B,KAA7B,EAAoC,GAApC,CA1QA;;AAAA;AA6QE;;;;;;;;IAAA;;AAAA,kCAAe,SAAC,GAAD;AACb,SAAG,QAAQ,QAAO,KAAlB;AACE,cAAO,EAAP,CADF;MAAA;AAEA,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,OAAlB;AACE,cAAO,GAAP,CADF;MAAA;AAGE,cAAO,CAAC,GAAD,CAAP,CAHF;MAHa;GAAA,CAAf;;AAAA,mBAQA,oBAAmB;AACjB;AACA,SAAG,IAAC,IAAD,CAAK,WAAL,MAAqB,KAAxB;cACE,IAAC,SAAD,CAAU,EAAV,EADF;MAFiB;GAAA,CARnB;;AAAA,mBAaA,iBAAiB,SAAC,GAAD;AACf,YAAO,IAAC,aAAD,CAAc,GAAd,CAAP,CADe;GAAA,CAbjB;;AAAA,mBAgBA,WAAU,SAAC,KAAD;;OAAC,QAAQ;MAAM;YAAA,IAAC,IAAD,CAAK,OAAL,EAAf;GAAA,CAhBV;;gBAAA;;IADkB,UA5QpB;;AAAA,WA8RU,CAAC,IAAI,CAAC,YAAhB,CAA6B,OAA7B,EAAsC,KAAtC,CA9RA;;AAAA;AAiSE;;;;;IAAA;;AAAA,OAAC,KAAD,GAAQ,SAAR;;AAAA,kBACA,eAAe,SAAC,GAAD;AACb,aAAO,CAAC,CAAC,IAAF,CAAO,GAAP,CAAP;AAAA,YACO,SADP;AACsB,gBAAO,GAAP,CADtB;AAAA,YAEO,QAFP;AAEqB,gBAAO,QAAO,CAAd,CAFrB;AAAA,YAGO,QAHP;AAGqB,gBAAO,QAAO,GAAd,CAHrB;AAAA;AAIA,YAAO,IAAP,CALa;GAAA,CADf;;eAAA;;IADiB,UAhSnB;;AAAA,WAwSU,CAAC,IAAI,CAAC,YAAhB,CAA6B,MAA7B,EAAqC,IAArC,CAxSA;;AAAA;AA2SE;;;;;IAAA;;AAAA,SAAC,KAAD,GAAQ,WAAR;;AAAA,oBACA,eAAe,SAAC,GAAD;AACb,aAAO,CAAC,CAAC,IAAF,CAAO,GAAP,CAAP;AAAA,YACO,OADP;AACoB,gBAAO,GAAP,CADpB;AAAA,YAEO,QAFP;AAEqB,gBAAO,GAAG,CAAC,QAAX,CAFrB;AAAA,YAGO,QAHP;AAGqB,gBAAO,GAAP,CAHrB;AAAA;AAIA,YAAO,IAAP,CALa;GAAA,CADf;;iBAAA;;IADmB,UA1SrB;;AAAA,WAkTU,CAAC,IAAI,CAAC,YAAhB,CAA6B,QAA7B,EAAuC,MAAvC,CAlTA;;AAAA;AAqTE;;;;;IAAA;;AAAA,QAAC,KAAD,GAAQ,UAAR;;AAAA,mBACA,eAAe,SAAC,GAAD;AACb,aAAO,CAAC,CAAC,IAAF,CAAO,GAAP,CAAP;AAAA,YACO,QADP;AAAA,YACiB,QADjB;AAC+B,gBAAO,WAAW,GAAX,CAAP,CAD/B;AAAA,YAEO,QAFP;AAGI,aAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAAzB,IAAoC,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAAhE;AACE,kBAAO,GAAP,CADF;UAHJ;AAEO;AAFP,YAKO,SALP;AAMI,aAAG,QAAO,IAAV;AACE,kBAAO,CAAP,CADF;UAAA;AAGE,kBAAO,CAAP,CAHF;UANJ;AAAA;AAUA,YAAO,IAAP,CAXa;GAAA,CADf;;gBAAA;;IADkB,UApTpB;;AAAA,WAkUU,CAAC,IAAI,CAAC,YAAhB,CAA6B,OAA7B,EAAsC,KAAtC,CAlUA;;AAAA;AAqUE;;;;;IAAA;;AAAA,UAAC,KAAD,GAAQ,YAAR;;AAAA,qBACA,eAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAA5B;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CADf;;kBAAA;;IADoB,UApUtB;;AAAA,WA2UU,CAAC,IAAI,CAAC,YAAhB,CAA6B,SAA7B,EAAwC,OAAxC,CA3UA;;AAAA;AA8UE;;;;;IAAA;;AAAA,UAAC,KAAD,GAAQ,YAAR;;AAAA,qBACA,eAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAA5B;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CADf;;kBAAA;;IADoB,UA7UtB;;AAAA,WAoVU,CAAC,IAAI,CAAC,YAAhB,CAA6B,SAA7B,EAAwC,OAAxC,CApVA;;AAAA;AAuVE;;;;;IAAA;;AAAA,UAAC,KAAD,GAAQ,YAAR;;AAAA,qBACA,eAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAA5B;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CADf;;kBAAA;;IADoB,UAtVtB;;AAAA,WA6VU,CAAC,IAAI,CAAC,YAAhB,CAA6B,SAA7B,EAAwC,OAAxC,CA7VA;;AAAA;AAgWE;;;;;IAAA;;AAAA,aAAC,KAAD,GAAQ,eAAR;;AAAA,wBACA,eAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,UAA5B;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CADf;;qBAAA;;IADuB,UA/VzB;;AAAA,WAsWU,CAAC,IAAI,CAAC,YAAhB,CAA6B,YAA7B,EAA2C,UAA3C,CAtWA;;AAAA;AAyWE;;;;;IAAA;;AAAA,QAAC,KAAD,GAAQ,UAAR;;AAAA,mBACA,eAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,KAA5B;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CADf;;gBAAA;;IADkB,UAxWpB;;AAAA,WA+WU,CAAC,IAAI,CAAC,YAAhB,CAA6B,OAA7B,EAAsC,KAAtC,CA/WA;;AAAA;AAkXE;;;;;IAAA;;AAAA,QAAC,KAAD,GAAQ,KAAR;;AAAA,mBACA,eAAe,SAAC,GAAD;AACb,aAAO,CAAC,CAAC,IAAF,CAAO,GAAP,CAAP;AAAA,YACO,QADP;AACqB,gBAAW,SAAK,CAAC,KAAN,EAAa,CAAC,MAAd,CAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,CAAX,CADrB;AAAA,YAEO,QAFP;AAGI,iBAAO,GAAG,CAAC,WAAX;AAAA,gBACO,KAAK,CAAC,KADb;AACwB,oBAAO,GAAP,CADxB;AAAA,gBAEO,KAAK,CAAC,OAFb;AAE0B,oBAAW,SAAK,CAAC,KAAN,EAAa,CAAC,MAAd,CAAqB,GAAG,CAAC,CAAzB,EAA4B,GAAG,CAAC,CAAhC,EAAmC,GAAG,CAAC,CAAvC,CAAX,CAF1B;AAAA,UAHJ;AAEO;AAFP,YAMO,SANP;AAOI,aAAG,GAAH;AACE,kBAAW,SAAK,CAAC,KAAN,CAAY,QAAZ,CAAX,CADF;UAAA;AAGE,kBAAW,SAAK,CAAC,KAAN,CAAY,QAAZ,CAAX,CAHF;UAPJ;AAAA;AAWA,YAAO,IAAP,CAZa;GAAA,CADf;;gBAAA;;IADkB,UAjXpB;;AAAA,WAgYU,CAAC,IAAI,CAAC,YAAhB,CAA6B,OAA7B,EAAsC,KAAtC,CAhYA;;AAAA;AAmYE;;;;;IAAA;;AAAA,qCAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,QAAzB,IAAqC,eAAe,KAAK,CAAC,QAA7D;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CAAf;;mBAAA;;IADqB,UAlYvB;;AAAA,WAwYU,CAAC,IAAI,CAAC,YAAhB,CAA6B,UAA7B,EAAyC,QAAzC,CAxYA;;AAAA;AA2YE;;;;;IAAA;;AAAA,kCAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,eAAe,KAAK,CAAC,KAAxB;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CAAf;;gBAAA;;IADkB,UA1YpB;;AAAA,WAgZU,CAAC,IAAI,CAAC,YAAhB,CAA6B,OAA7B,EAAsC,KAAtC,CAhZA;;AAAA;AAmZE;;;;;IAAA;;AAAA,mCAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,eAAe,KAAK,CAAC,MAArB,IAA+B,eAAe,KAAK,CAAC,iBAApD,IAAyE,eAAe,KAAK,CAAC,kBAAjG;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CAAf;;iBAAA;;IADmB,UAlZrB;;AAAA,WAwZU,CAAC,IAAI,CAAC,YAAhB,CAA6B,QAA7B,EAAuC,MAAvC,CAxZA;;AAAA;AA2ZE;;;;;IAAA;;AAAA,iCAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,IAAzB,IAAiC,eAAe,KAAK,CAAC,IAAzD;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CAAf;;eAAA;;IADiB,UA1ZnB;;AAAA,WAgaU,CAAC,IAAI,CAAC,YAAhB,CAA6B,MAA7B,EAAqC,IAArC,CAhaA;;AAAA;AAmaE;;;;;IAAA;;AAAA,qCAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,QAAzB,IAAqC,eAAe,KAAK,CAAC,QAA7D;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CAAf;;mBAAA;;IADqB,UAlavB;;AAAA,WAwaU,CAAC,IAAI,CAAC,YAAhB,CAA6B,UAA7B,EAAyC,QAAzC,CAxaA;;AAAA;AA2aE;;;;;IAAA;;AAAA,qCAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,QAAzB,IAAqC,eAAe,KAAK,CAAC,QAA7D;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CAAf;;mBAAA;;IADqB,UA1avB;;AAAA,WAgbU,CAAC,IAAI,CAAC,YAAhB,CAA6B,UAA7B,EAAyC,QAAzC,CAhbA;;AAAA;AAmbE;;;;;IAAA;;AAAA,oCAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAAzB,IAAoC,eAAe,KAAK,CAAC,OAA5D;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CAAf;;kBAAA;;IADoB,UAlbtB;;AAAA,WAwbU,CAAC,IAAI,CAAC,YAAhB,CAA6B,SAA7B,EAAwC,OAAxC,CAxbA;;AAAA;AA2bE;;;;;IAAA;;AAAA,gCAAe,SAAC,GAAD;AACb,SAAG,CAAC,CAAC,IAAF,CAAO,GAAP,MAAe,QAAlB;AACE,WAAG,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,GAAzB,IAAgC,GAAG,CAAC,WAAJ,KAAmB,KAAK,CAAC,OAA5D;AACE,gBAAO,GAAP,CADF;QADF;MAAA;AAGA,YAAO,IAAP,CAJa;GAAA,CAAf;;cAAA;;IADgB,UA1blB;;AAAA,WAgcU,CAAC,IAAI,CAAC,YAAhB,CAA6B,KAA7B,EAAoC,GAApC,CAhcA;;;;;;;;;;ACCA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,UAEA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAFtC;;AAAA,UAIA,GAAY,oBAAQ,GAAR,CAJZ;;AAMA;AAAA,wBANA;;AAAA;AAQE;;;;;;IAAA;;AAAA,0CAAkB,SAAC,OAAD;AAChB,SAAG,IAAC,MAAK,CAAC,QAAP,OAAqB,IAAxB;cACE,IAAC,UAAS,CAAC,IAAX,CAAgB,SAAhB,EAA2B,SAA3B,EADF;MAAA;cAGE,IAAC,UAAS,CAAC,UAAX,CAAsB,SAAtB,EAHF;MADgB;GAAA,CAAlB;;AAAA,uBAMA,SAAQ;AACN;AAAA,YAAO,CAAC,GAAR,CAAY,SAAZ;AAAA,KACA,UAAU,IAAC,uBAAD,EADV;AAAA,KAEA,KAAK,yBAAsB,CAAC,IAAC,MAAK,CAAC,GAAP,CAAW,KAAX,CAAD,CAF3B;AAAA,KAGA,aAAa,EAAE,qCAAmC,EAAnC,GAAsC,WAAxC,CAAmD,CAAC,QAApD,CAA6D,OAA7D,CAHb;AAAA,KAIA,IAAC,UAAD,GAAa,EAAE,OAAF,EAAW,UAAX,CAJb;AAOA,SAAG,IAAC,MAAK,CAAC,QAAP,OAAqB,IAAxB;AACE,WAAC,UAAS,CAAC,IAAX,CAAgB,SAAhB,EAA2B,SAA3B,EADF;MAPA;AAAA,KAWA,IAAC,UAAS,CAAC,MAAX,CAAkB;cAAA,SAAC,CAAD;AAChB,aAAG,KAAC,UAAS,CAAC,EAAX,CAAc,UAAd,CAAH;kBACE,KAAC,MAAK,CAAC,QAAP,CAAgB,IAAhB,EADF;UAAA;kBAGE,KAAC,MAAK,CAAC,QAAP,CAAgB,KAAhB,EAHF;UADgB;OAAA;KAAA,QAAlB,CAXA;AAgBA,YAAO,IAAP,CAjBM;GAAA,CANR;;oBAAA;;IADsB,UAPxB;;AAAA,OAiCM,CAAC,OAAP,GAAiB,SAjCjB;;;;;;;ACAA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,UAEA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAFtC;;AAAA,UAIA,GAAY,oBAAQ,GAAR,CAJZ;;AAMA;AAAA,uBANA;;AAAA;AAQE;;;;;;;IAAA;;AAAA,kCAAQ;AACN;AAAA,eAAU,IAAC,uBAAD,EAAV;AACA,SAAG,IAAC,MAAK,CAAC,UAAU,CAAC,aAArB;AACE,WAAC,sBAAD,CAAuB,OAAvB,EADF;MAAA;AAGE,WAAC,qBAAD,CAAsB,OAAtB,EAHF;MADA;YAKA,KANM;GAAA,CAAR;;AAAA,yBASA,wBAAuB,SAAC,OAAD;AACrB;AAAA,YAAO,IAAP;AAAA,KACA,QAAQ,eADR;AAEA;AACE,cAAO,IAAC,MAAK,CAAC,GAAP,CAAW,eAAX,CAA4B,GAAnC;AACA,WAAG,SAAQ,IAAC,IAAZ;AACE,kBAAS,oBAAkB,IAAlB,GAAuB,wBAAvB,GAA+C,CAA/C,GAAiD,WAA1D,CADF;QAAA;AAGE,kBAAS,oBAAkB,IAAlB,GAAuB,IAAvB,GAA2B,CAA3B,GAA6B,WAAtC,CAHF;QAFF;AAAA,MAFA;AAAA,KAQA,SAAS,iBART;AAAA,KASA,OAAO,CAAC,MAAR,CAAe,KAAf,CATA;AAAA,KAUA,EAAE,QAAF,EAAY,OAAZ,CAAoB,CAAC,MAArB,CAA4B;cAAA,SAAC,CAAD;gBAC1B,KAAC,MAAK,CAAC,QAAP,CAAgB,EAAE,QAAF,EAAY,OAAZ,CAAoB,CAAC,GAArB,EAAhB,EAD0B;OAAA;KAAA,QAA5B,CAVA;AAYA,YAAO,IAAP,CAbqB;GAAA,CATvB;;AAAA,yBAwBA,uBAAsB,SAAC,OAAD;AACpB,SAAC,UAAD,GAAa,IAAC,gBAAD,CAAiB,OAAjB,EAA0B,QAA1B,CAAb;YACA,IAAC,UAAS,CAAC,kBAAX,CAA8B,QAA9B,EAFoB;GAAA,CAxBtB;;sBAAA;;IADwB,UAP1B;;AAAA,OAoCM,CAAC,OAAP,GAAiB,WApCjB;;;;;;;ACAA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,UAEA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAFtC;;AAAA,UAIA,GAAY,oBAAQ,GAAR,CAJZ;;AAMA;AAAA,sBANA;;AAAA;AAQE;;;;;;;IAAA;;AAAA,qCAAY,SAAC,OAAD;YACV,uDADU;GAAA,CAAZ;;AAAA,wBAGA,SAAQ;AACN;AAAA,eAAU,IAAC,uBAAD,EAAV;AAEA,SAAG,IAAC,MAAK,CAAC,UAAU,CAAC,aAArB;AACE,WAAC,sBAAD,CAAuB,OAAvB,EADF;MAAA;AAGE,WAAC,qBAAD,CAAsB,OAAtB,EAHF;MAFA;YAMA,KAPM;GAAA,CAHR;;AAAA,wBAYA,wBAAuB,SAAC,OAAD;AACrB;AAAA,YAAO,IAAP;AAAA,KACA,QAAQ,eADR;AAEA;AACE,cAAO,IAAC,MAAK,CAAC,GAAP,CAAW,eAAX,CAA4B,GAAnC;AACA,WAAG,SAAQ,IAAC,IAAZ;AACE,kBAAS,oBAAkB,IAAlB,GAAuB,wBAAvB,GAA+C,CAA/C,GAAiD,WAA1D,CADF;QAAA;AAGE,kBAAS,oBAAkB,IAAlB,GAAuB,IAAvB,GAA2B,CAA3B,GAA6B,WAAtC,CAHF;QAFF;AAAA,MAFA;AAAA,KAQA,SAAS,iBART;AAAA,KASA,OAAO,CAAC,MAAR,CAAe,KAAf,CATA;AAAA,KAUA,EAAE,QAAF,EAAY,OAAZ,CAAoB,CAAC,MAArB,CAA4B;cAAA,SAAC,CAAD;gBAC1B,KAAC,MAAK,CAAC,QAAP,CAAgB,EAAE,QAAF,EAAY,OAAZ,CAAoB,CAAC,GAArB,EAAhB,EAD0B;OAAA;KAAA,QAA5B,CAVA;AAYA,YAAO,IAAP,CAbqB;GAAA,CAZvB;;AAAA,wBA2BA,uBAAsB,SAAC,OAAD;AACpB,SAAC,UAAD,GAAa,IAAC,gBAAD,CAAiB,OAAjB,CAAb;YACA,IAAC,UAAS,CAAC,kBAAX,GAFoB;GAAA,CA3BtB;;qBAAA;;IADuB,UAPzB;;AAAA,OAuCM,CAAC,OAAP,GAAiB,UAvCjB;;;;;;;ACDA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,UAEA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAFtC;;AAAA,UAIA,GAAY,oBAAQ,GAAR,CAJZ;;AAMA;AAAA,wBANA;;AAAA;AAQE;;;;;IAAA;;AAAA,mCAAQ;AACN,SAAC,wBAAD;AAAA,KACA,IAAC,sBAAD,CAAuB,GAAvB,CADA;AAAA,KAEA,IAAC,sBAAD,CAAuB,GAAvB,CAFA;AAGA,YAAO,IAAP,CAJM;GAAA,CAAR;;uBAAA;;IADyB,UAP3B;;AAAA,OAcM,CAAC,OAAP,GAAiB,YAdjB;;;;;;;ACCA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,UAEA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAFtC;;AAAA,UAIA,GAAY,oBAAQ,GAAR,CAJZ;;AAMA;AAAA,wBANA;;AAAA;AAQE;;;;;IAAA;;AAAA,mCAAQ;AACN,SAAC,wBAAD;AAAA,KACA,IAAC,sBAAD,CAAuB,GAAvB,CADA;AAAA,KAEA,IAAC,sBAAD,CAAuB,GAAvB,CAFA;AAAA,KAGA,IAAC,sBAAD,CAAuB,GAAvB,CAHA;AAIA,YAAO,IAAP,CALM;GAAA,CAAR;;uBAAA;;IADyB,UAP3B;;AAAA,OAeM,CAAC,OAAP,GAAiB,YAfjB;;;;;;;ACAA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,UAEA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAFtC;;AAAA,UAIA,GAAY,oBAAQ,GAAR,CAJZ;;AAMA;AAAA,wBANA;;AAAA;AAQE;;;;;IAAA;;AAAA,mCAAQ;AACN,SAAC,wBAAD;AAAA,KACA,IAAC,sBAAD,CAAuB,GAAvB,CADA;AAAA,KAEA,IAAC,sBAAD,CAAuB,GAAvB,CAFA;AAAA,KAGA,IAAC,sBAAD,CAAuB,GAAvB,CAHA;AAAA,KAIA,IAAC,sBAAD,CAAuB,GAAvB,CAJA;AAKA,YAAO,IAAP,CANM;GAAA,CAAR;;uBAAA;;IADyB,UAP3B;;AAAA,OAgBM,CAAC,OAAP,GAAiB,YAhBjB;;;;;;;ACAA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,UAEA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAFtC;;AAAA,UAIA,GAAY,oBAAQ,GAAR,CAJZ;;AAMA;AAAA,wBANA;;AAAA;AAQE;;;;;IAAA;;AAAA,sCAAQ;AACN,SAAC,wBAAD;AAAA,KACA,IAAC,sBAAD,CAAuB,GAAvB,CADA;AAAA,KAEA,IAAC,sBAAD,CAAuB,GAAvB,CAFA;AAAA,KAGA,IAAC,sBAAD,CAAuB,GAAvB,CAHA;AAAA,KAIA,IAAC,sBAAD,CAAuB,GAAvB,CAJA;AAKA,YAAO,IAAP,CANM;GAAA,CAAR;;0BAAA;;IAD4B,UAP9B;;AAAA,OAgBM,CAAC,OAAP,GAAiB,eAhBjB;;;;;;;ACAA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,UAEA,GAAY,oBAAQ,EAAR,CAAyB,CAAC,SAFtC;;AAAA,UAIA,GAAY,oBAAQ,GAAR,CAJZ;;AAMA;AAAA,uBANA;;AAAA;AAQE;;;;;IAAA;;AAAA,iCAAQ;AACN,SAAC,wBAAD;AAAA,KACA,IAAC,sBAAD,CAAuB,GAAvB,CADA;AAAA,KAEA,IAAC,sBAAD,CAAuB,GAAvB,CAFA;AAAA,KAGA,IAAC,sBAAD,CAAuB,GAAvB,CAHA;AAAA,KAIA,IAAC,sBAAD,CAAuB,OAAvB,EAAgC,QAAhC,CAJA;AAKA,YAAO,IAAP,CANM;GAAA,CAAR;;qBAAA;;IADuB,UAPzB;;AAAA,OAgBM,CAAC,OAAP,GAAiB,UAhBjB;;;;;;;ACAA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,8BAEA,GAAgC,oBAAQ,GAAR,CAFhC;;AAAA,iBAIA,GAAmB,oBAAQ,GAAR,CAJnB;;AAMA;AAAA,qBANA;;AAAA;AAQE;;;;;;;;;;IAAA;;AAAA,oCAAY,SAAC,OAAD;AACV;AAAA,KACA,IAAC,MAAK,CAAC,EAAP,CAAU,eAAV,EAA2B,IAAC,iBAA5B,CADA;YAEA,IAAC,OAAD,GAHU;GAAA,CAAZ;;AAAA,uBAKA,mBAAkB,SAAC,OAAD;AAAa,YAAO,IAAP,CAAb;GAAA,CALlB;;AAAA,uBAOA,SAAQ;AACN,YAAO,IAAP,CADM;GAAA,CAPR;;AAAA,uBAUA,yBAAwB,SAAC,IAAD;AACtB;;OADuB,OAAO,IAAC,MAAK,CAAC,GAAP,CAAW,MAAX;MAC9B;AAAA,eACE;AAAA,YAAK,IAAC,MAAK,CAAC,GAAP,CAAW,KAAX,CAAL;AAAA,OACA,OAAO,IADP;AAAA,OAEA,MAAM,IAFN;MADF;AAAA,KAIA,IAAC,UAAD,GAAa,EAAE,CAAC,CAAC,QAAF,CAAW,6BAAX,EAA0C,OAA1C,CAAF,CAJb;AAAA,KAKA,IAAC,IAAG,CAAC,MAAL,CAAY,IAAC,UAAb,CALA;AAOA,YAAO,IAAC,UAAR,CARsB;GAAA,CAVxB;;AAAA,uBAoBA,kBAAiB,SAAC,OAAD,EAAU,IAAV,EAA0B,WAA1B;AACf;;OADyB,OAAO;MAChC;;OADyC,cAAc;MACvD;AAAA,iBAAgB,qBACd;AAAA,cAAO,IAAC,MAAR;AAAA,OACA,IAAI,OADJ;AAAA,OAEA,MAAM,IAFN;AAAA,OAGA,aAAa,WAHb;MADc,CAAhB;AAMA,YAAO,SAAP,CAPe;GAAA,CApBjB;;AAAA,uBA6BA,wBAAuB,SAAC,MAAD,EAAS,IAAT;AACrB;;OAD8B,OAAO;MACrC;AAAA,eAAU,IAAC,uBAAD,CAAwB,MAAxB,CAAV;AAAA,KACA,YAAY,IAAC,gBAAD,CAAiB,OAAjB,EAA0B,IAA1B,EAAgC,KAAhC,CADZ;AAAA,KAEA,SAAS,CAAC,qBAAV,CAAgC,MAAhC,EAAwC,IAAxC,CAFA;AAGA,YAAO,KAAP,CAJqB;GAAA,CA7BvB;;AAAA,uBAmCA,0BAAyB,SAAC,IAAD;;OAAC,OAAO,IAAC,MAAK,CAAC,GAAP,CAAW,MAAX;MAC/B;AAAA,SAAC,IAAG,CAAC,MAAL,CAAY,SAAO,IAAP,GAAY,OAAxB;AACA,YAAO,IAAC,IAAR,CAFuB;GAAA,CAnCzB;;oBAAA;;IADsB,QAAQ,CAAC,KAPjC;;AAAA,OA+CM,CAAC,OAAP,GAAiB,SA/CjB;;;;;;;ACDA,0G;;;;;;ACCA;GAAA;;8BAAA;;AAAA,KAAI,oBAAQ,CAAR,CAAJ;;AAAA,SACA,GAAW,oBAAQ,CAAR,CADX;;AAAA,sBAEA,GAAwB,oBAAQ,GAAR,CAFxB;;AAAA,gBAGA,GAAkB,oBAAQ,GAAR,CAHlB;;AAKA;AAAA,4BALA;;AAAA;AAOE;;;;;;;;IAAA;;AAAA,2CAAY,SAAC,OAAD;AACV;AAAA,KACA,IAAC,OAAD,GAAU,KADV;YAEA,IAAC,OAAD,GAHU;GAAA,CAAZ;;AAAA,8BAKA,SAAQ;AAEN,SAAC,UAAD,GAAa,EAAE,CAAC,CAAC,QAAF,CAAW,qBAAX,EAAkC,IAAC,QAAnC,CAAF,CAAb;AAAA,KACA,IAAC,IAAG,CAAC,MAAL,CAAY,IAAC,UAAb,CADA;AAAA,KAEA,IAAC,OAAD,GAAU,EAAE,OAAF,EAAW,IAAC,UAAZ,CAFV;AAIA,YAAO,IAAP,CANM;GAAA,CALR;;AAAA,8BAaA,qBAAoB,SAAC,IAAD;AAClB;;OADmB,OAAO;MAC1B;AAAA,SAAC,OAAM,CAAC,GAAR,CAAY,IAAC,MAAK,CAAC,QAAP,EAAZ;AAEA,SAAG,IAAC,QAAO,CAAC,IAAT,KAAiB,OAAjB,IAA4B,IAAC,OAAD,KAAW,KAA1C;AACE,WAAC,OAAD,GAAU,IAAC,mBAAD,EAAV,CADF;MAFA;AAAA,KAKA,mBAAmB;cAAA,SAAC,CAAD;AACjB,aAAG,KAAC,OAAJ;kBAAgB,KAAC,OAAM,CAAC,GAAR,CAAY,CAAZ,EAAhB;UADiB;OAAA;KAAA,QALnB;AAAA,KAOA,IAAC,MAAK,CAAC,EAAP,CAAU,eAAV,EAA2B,gBAA3B,CAPA;AAAA,KASA,IAAC,OAAM,CAAC,GAAR,CAAY,IAAC,MAAK,CAAC,QAAP,EAAZ,CATA;AAWA,SAAG,IAAC,OAAJ;AACE,WAAC,OAAM,CAAC,QAAQ,CAAC,cAAjB,GAAkC;gBAAA,SAAC,OAAD;kBAChC,KAAC,MAAK,CAAC,QAAP,CAAgB,OAAhB,EADgC;SAAA;OAAA,QAAlC,CADF;MAXA;AAAA,KAeA,IAAC,OAAM,CAAC,QAAR,CAAiB;cAAA,SAAC,CAAD;AACf,aAAG,CAAC,CAAC,KAAF,KAAW,EAAd;AACE,eAAG,SAAQ,OAAX;AACE,kBAAC,MAAK,CAAC,QAAP,CAAgB,WAAW,KAAC,OAAM,CAAC,GAAR,EAAX,CAAhB,EADF;YAAA;AAGE,kBAAC,MAAK,CAAC,QAAP,CAAgB,KAAC,OAAM,CAAC,GAAR,EAAhB,EAHF;YAAA;kBAIA,KAAC,OAAM,CAAC,IAAR,GALF;UADe;OAAA;KAAA,QAAjB,CAfA;AAsBA,YAAO,IAAP,CAvBkB;GAAA,CAbpB;;AAAA,8BAsCA,wBAAuB,SAAC,MAAD,EAAS,IAAT;AACrB;;OAD8B,OAAO;MACrC;AAAA,SAAC,OAAM,CAAC,GAAR,CAAY,IAAC,MAAK,CAAC,QAAP,EAAkB,QAA9B;AAEA,SAAG,IAAC,QAAO,CAAC,IAAT,KAAiB,OAApB;AACE,WAAC,OAAD,GAAU,IAAC,mBAAD,EAAV,CADF;MAFA;AAAA,KAMA,IAAC,MAAK,CAAC,qBAAsB,+BAA8B,MAA9B,CAA7B,GAAqE;cAAA,SAAC,CAAD;gBACnE,KAAC,OAAM,CAAC,GAAR,CAAY,CAAE,QAAd,EADmE;OAAA;KAAA,QANrE;AAAA,KASA,YAAY;cAAA;AACV;AAAA,gBAAO,KAAC,OAAM,CAAC,GAAR,EAAP;AACA,aAAG,SAAQ,OAAX;AAAwB,kBAAO,WAAW,IAAX,CAAP,CAAxB;UADA;AAEA,aAAG,CAAC,CAAC,IAAF,CAAO,KAAC,MAAK,CAAC,UAAU,CAAC,KAAzB,MAAmC,OAAtC;kBACE,KAAC,MAAK,CAAC,UAAU,CAAC,KAAM,GAAG,QAA3B,GAAqC,KADvC;UAAA;kBAGE,KAAC,MAAK,CAAC,UAAU,CAAC,KAAM,QAAxB,GAAkC,KAHpC;UAHU;OAAA;KAAA,QATZ;AAAA,KAkBA,IAAC,OAAM,CAAC,QAAQ,CAAC,cAAjB,GAAkC;cAAA,SAAC,OAAD;gBAChC,YADgC;OAAA;KAAA,QAlBlC;AAAA,KAqBA,IAAC,OAAM,CAAC,MAAR,CAAe;cAAA,SAAC,CAAD;gBACb,YADa;OAAA;KAAA,QAAf,CArBA;AAAA,KAuBA,IAAC,OAAM,CAAC,QAAR,CAAiB;cAAA,SAAC,CAAD;AACf,aAAG,CAAC,CAAC,KAAF,KAAW,EAAd;AACE;kBACA,KAAC,OAAM,CAAC,IAAR,GAFF;UADe;OAAA;KAAA,QAAjB,CAvBA;AA2BA,YAAO,IAAP,CA5BqB;GAAA,CAtCvB;;AAAA,8BAoEA,qBAAoB;AAClB;AAAA,cAAa,oBAAgB,IAAC,OAAM,CAAC,GAAR,CAAY,CAAZ,CAAhB,CAAb;AACA,YAAO,MAAP,CAFkB;GAAA,CApEpB;;2BAAA;;IAD6B,QAAQ,CAAC,KANxC;;AAAA,OA+EM,CAAC,OAAP,GAAiB,gBA/EjB;;;;;;;ACDA,+G;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,+BAA8B,mBAAmB,gCAAgC,GAAG;;AAEpF;AACA;AACA;AACA,YAAW,WAAW;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA6B;AAC7B;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,gCAA+B;;AAE/B;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,6BAA4B;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,cAAa,OAAO;AACpB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"), require(\"_\"), require(\"Backbone\"), require(\"Blob\"), require(\"FileSaver\"), require(\"Three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\", \"_\", \"Backbone\", \"Blob\", \"FileSaver\", \"Three\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NodeTypes.Three\"] = factory(require(\"jQuery\"), require(\"_\"), require(\"Backbone\"), require(\"Blob\"), require(\"FileSaver\"), require(\"Three\"));\n\telse\n\t\troot[\"ThreeNodes\"] = root[\"ThreeNodes\"] || {}, root[\"ThreeNodes\"][\"NodeTypes.Three\"] = factory(root[\"jQuery\"], root[\"_\"], root[\"Backbone\"], root[\"Blob\"], root[\"FileSaver\"], root[\"Three\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_33__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 10d94be00346db46748d\n **/","require 'threenodes/nodes/models/components/Geometry'\nrequire 'threenodes/nodes/models/components/Lights'\nrequire 'threenodes/nodes/models/components/Materials'\nrequire 'threenodes/nodes/models/components/PostProcessing'\nrequire 'threenodes/nodes/models/components/Three'\nrequire 'threenodes/nodes/models/components/ConstructiveSolidGeometry'\nrequire 'threenodes/nodes/models/components/Particle'\n\n\n\n/** WEBPACK FOOTER **\n ** ./NodeTypes.Three.coffee\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 1\n ** module chunks = 0 2 3\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 2\n ** module chunks = 0 1 2 3\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Backbone\"\n ** module id = 3\n ** module chunks = 0 1 2 3\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nUtils = require 'threenodes/utils/Utils'\nNode = require 'threenodes/nodes/models/Node'\n\nclass PlaneGeometry extends Node\n  @node_name = 'Plane'\n  @group_name = 'Geometry'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.PlaneGeometry(100, 100, 1, 1, 1)\n    @cached = @get_cache_array()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"width\": 100,\n        \"height\": 100,\n        \"segments_width\": 1,\n        \"segments_height\": 1,\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  get_cache_array: =>\n    [@fields.getField(\"width\").getValue(), @fields.getField(\"height\").getValue(), @fields.getField(\"segments_width\").getValue(), @fields.getField(\"segments_height\").getValue()]\n\n  compute: =>\n    new_cache = @get_cache_array()\n    if Utils.flatArraysAreEquals(new_cache, @cached) == false\n      @ob = new THREE.PlaneGeometry(@fields.getField(\"width\").getValue(), @fields.getField(\"height\").getValue(), @fields.getField(\"segments_width\").getValue(), @fields.getField(\"segments_height\").getValue())\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('PlaneGeometry', PlaneGeometry)\n\nclass CubeGeometry extends Node\n  @node_name = 'Cube'\n  @group_name = 'Geometry'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.CubeGeometry(100, 100, 100, 1, 1, 1)\n    @cached = @get_cache_array()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"flip\": -1\n        \"width\": 100,\n        \"height\": 100,\n        \"depth\": 100,\n        \"segments_width\": 1,\n        \"segments_height\": 1,\n        \"segments_depth\": 1,\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  get_cache_array: =>\n    [@fields.getField(\"width\").getValue(), @fields.getField(\"height\").getValue(), @fields.getField(\"depth\").getValue(), @fields.getField(\"segments_width\").getValue(), @fields.getField(\"segments_height\").getValue(), @fields.getField(\"segments_depth\").getValue(), @fields.getField(\"flip\").getValue()]\n\n  compute: =>\n    new_cache = @get_cache_array()\n    if Utils.flatArraysAreEquals(new_cache, @cached) == false\n      @ob = new THREE.CubeGeometry(@fields.getField(\"width\").getValue(), @fields.getField(\"height\").getValue(), @fields.getField(\"depth\").getValue(), @fields.getField(\"segments_width\").getValue(), @fields.getField(\"segments_height\").getValue(), @fields.getField(\"segments_depth\").getValue(), @fields.getField(\"flip\").getValue())\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('CubeGeometry', CubeGeometry)\n\nclass SphereGeometry extends Node\n  @node_name = 'Sphere'\n  @group_name = 'Geometry'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.SphereGeometry(100, 20, 20)\n    @cached = @get_cache_array()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"radius\": 100\n        \"segments_width\": 1\n        \"segments_height\": 1\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  get_cache_array: =>\n    [@fields.getField(\"radius\").getValue(), @fields.getField(\"segments_width\").getValue(), @fields.getField(\"segments_height\").getValue()]\n\n  compute: =>\n    new_cache = @get_cache_array()\n    if Utils.flatArraysAreEquals(new_cache, @cached) == false\n      @ob = new THREE.SphereGeometry(@fields.getField(\"radius\").getValue(), @fields.getField(\"segments_width\").getValue(), @fields.getField(\"segments_height\").getValue())\n      @cached = new_cache\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('SphereGeometry', SphereGeometry)\n\nclass CylinderGeometry extends Node\n  @node_name = 'Cylinder'\n  @group_name = 'Geometry'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.CylinderGeometry(100, 100, 20, 30, 1, false)\n    @cached = @get_cache_array()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"radiusTop\": 100\n        \"radiusBottom\": 100\n        \"height\": 20\n        \"segmentsRadius\": 30\n        \"segmentsHeight\": 1\n        \"openEnded\": false\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  get_cache_array: =>\n    [\n      @fields.getField(\"radiusTop\").getValue(), @fields.getField(\"radiusBottom\").getValue(), @fields.getField(\"height\").getValue(),\n      @fields.getField(\"segmentsRadius\").getValue(), @fields.getField(\"segmentsHeight\").getValue(), @fields.getField(\"openEnded\").getValue()\n    ]\n\n  compute: =>\n    new_cache = @get_cache_array()\n    if Utils.flatArraysAreEquals(new_cache, @cached) == false\n      @ob = new THREE.CylinderGeometry(\n        @fields.getField(\"radiusTop\").getValue(), @fields.getField(\"radiusBottom\").getValue(), @fields.getField(\"height\").getValue(),\n        @fields.getField(\"segmentsRadius\").getValue(), @fields.getField(\"segmentsHeight\").getValue(), @fields.getField(\"openEnded\").getValue()\n      )\n      @cached = new_cache\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('CylinderGeometry', CylinderGeometry)\n\nclass TorusGeometry extends Node\n  @node_name = 'Torus'\n  @group_name = 'Geometry'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.TorusGeometry(100, 40, 8, 6, Math.PI * 2)\n    @cached = @get_cache_array()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"radius\": 100\n        \"tube\": 40\n        \"segmentsR\": 8\n        \"segmentsT\": 6\n        \"arc\": Math.PI * 2\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  get_cache_array: =>\n    [\n      @fields.getField(\"radius\").getValue(), @fields.getField(\"tube\").getValue(), @fields.getField(\"segmentsR\").getValue(),\n      @fields.getField(\"segmentsT\").getValue(), @fields.getField(\"arc\").getValue()\n    ]\n\n  compute: =>\n    new_cache = @get_cache_array()\n    if Utils.flatArraysAreEquals(new_cache, @cached) == false\n      @ob = new THREE.TorusGeometry(\n        @fields.getField(\"radius\").getValue(), @fields.getField(\"tube\").getValue(), @fields.getField(\"segmentsR\").getValue(),\n        @fields.getField(\"segmentsT\").getValue(), @fields.getField(\"arc\").getValue()\n      )\n      @cached = new_cache\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('TorusGeometry', TorusGeometry)\n\nclass TorusKnotGeometry extends Node\n  @node_name = 'TorusKnot'\n  @group_name = 'Geometry'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.TorusKnotGeometry(200, 40, 64, 8, 2, 3, 1)\n    @cached = @get_cache_array()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"radius\": 200\n        \"tube\": 40\n        \"segmentsR\": 64\n        \"segmentsT\": 8\n        \"p\": 2\n        \"q\": 3\n        \"heightScale\": 1\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  get_cache_array: =>\n    [\n      @fields.getField(\"radius\").getValue(), @fields.getField(\"tube\").getValue(), @fields.getField(\"segmentsR\").getValue(),\n      @fields.getField(\"segmentsT\").getValue(), @fields.getField(\"p\").getValue(), @fields.getField(\"q\").getValue(), @fields.getField(\"heightScale\").getValue()\n    ]\n\n  compute: =>\n    new_cache = @get_cache_array()\n    if Utils.flatArraysAreEquals(new_cache, @cached) == false\n      @ob = new THREE.TorusKnotGeometry(\n        @fields.getField(\"radius\").getValue(), @fields.getField(\"tube\").getValue(), @fields.getField(\"segmentsR\").getValue(),\n        @fields.getField(\"segmentsT\").getValue(), @fields.getField(\"p\").getValue(), @fields.getField(\"q\").getValue(), @fields.getField(\"heightScale\").getValue()\n      )\n      @cached = new_cache\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('TorusKnotGeometry', TorusKnotGeometry)\n\nclass OctahedronGeometry extends Node\n  @node_name = 'Octahedron'\n  @group_name = 'Geometry'\n\n  constructor: () ->\n    super\n    @auto_evaluate = false\n    @ob = new THREE.OctahedronGeometry(100, 0)\n    @cached = @get_cache_array()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"radius\": 100\n        \"detail\": 0\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  get_cache_array: =>\n    [@fields.getField(\"radius\").getValue(), @fields.getField(\"detail\").getValue()]\n\n  compute: =>\n    new_cache = @get_cache_array()\n    if Utils.flatArraysAreEquals(new_cache, @cached) == false\n      @ob = new THREE.OctahedronGeometry(@fields.getField(\"radius\").getValue(), @fields.getField(\"detail\").getValue())\n      @cached = new_cache\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('OctahedronGeometry', OctahedronGeometry)\n\nclass TextGeometry extends Node\n  @node_name = 'Text'\n  @group_name = 'Geometry'\n\n  initialize: (options) =>\n    super\n    @ob = false\n    @cached = []\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"text\": \"Example\"\n        \"font\": {type: \"Any\", val: {}}\n        \"size\": 100\n        \"height\": 20\n        \"curveSegments\": 4\n        \"bevelEnabled\": false\n        \"bevelThickness\": 0\n        \"bevelSize\": 0\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  get_cache_array: =>\n    font_obj = @fields.getField(\"font\").getValue()\n    if !font_obj.font then font_obj.font = ''\n    if !font_obj.weight then font_obj.weight = ''\n    [font_obj.font, font_obj.weight, @fields.getField(\"text\").getValue(), @fields.getField(\"size\").getValue(), @fields.getField(\"height\").getValue(), @fields.getField(\"curveSegments\").getValue(),\n      @fields.getField(\"bevelEnabled\").getValue(), @fields.getField(\"bevelThickness\").getValue(), @fields.getField(\"bevelSize\").getValue()]\n\n  compute: =>\n    new_cache = @get_cache_array()\n    font = this.fields.getField(\"font\").getValue()\n    has_font_attribute = (f) ->\n      if font[\"font\"] && font[\"weight\"]\n        return true\n      false\n\n    if !has_font_attribute(font) ||this.fields.getField(\"text\").getValue() == \"\"\n      @ob = false\n      @fields.setField(\"out\", @ob)\n      return false\n    if Utils.flatArraysAreEquals(new_cache, @cached) == false\n      console.log \"building text #{font.font} / #{font.weight}\"\n      @ob = new THREE.TextGeometry @fields.getField(\"text\").getValue(),\n        size: @fields.getField(\"size\").getValue()\n        height: @fields.getField(\"height\").getValue()\n        font: font.font\n        weight: font.weight\n        curveSegments: @fields.getField(\"curveSegments\").getValue()\n      @ob.computeBoundingBox()\n      @ob.computeVertexNormals()\n\n    @cached = new_cache\n\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('TextGeometry', TextGeometry)\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/Geometry.coffee\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nNode = require 'threenodes/nodes/models/Node'\n\nclass PointLight extends Node\n  @node_name = 'PointLight'\n  @group_name = 'Lights'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.PointLight(0xffffff)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xffffff)}\n        \"position\": {type: \"Vector3\", val: new THREE.Vector3(0, 300, 0)}\n        \"intensity\": 1\n        \"distance\": 0\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    super\n\n  compute: =>\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('PointLight', PointLight)\n\nclass SpotLight extends Node\n  @node_name = 'SpotLight'\n  @group_name = 'Lights'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.SpotLight(0xffffff)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xffffff)}\n        \"position\": {type: \"Vector3\", val: new THREE.Vector3(0, 300, 0)}\n        \"target\": {type: \"Any\", val: new THREE.Object3D()}\n        \"intensity\": 1\n        \"distance\": 0\n        \"castShadow\": false\n        \"shadowCameraNear\": 50\n        \"shadowCameraFar\": 5000\n        \"shadowCameraFov\": 50\n        \"shadowBias\": 0\n        \"shadowDarkness\": 0.5\n        \"shadowMapWidth\": 512\n        \"shadowMapHeight\": 512\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    super\n\n  compute: =>\n    if @fields.getField(\"castShadow\").getValue() != @ob.castShadow\n      @trigger(\"RebuildAllShaders\")\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('SpotLight', SpotLight)\n\nclass DirectionalLight extends Node\n  @node_name = 'DirectionalLight'\n  @group_name = 'Lights'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.DirectionalLight(0xffffff)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xffffff)}\n        \"position\": {type: \"Vector3\", val: new THREE.Vector3(0, 300, 0)}\n        \"intensity\": 1\n        \"distance\": 0\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    super\n\n  compute: =>\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('DirectionalLight', DirectionalLight)\n\nclass AmbientLight extends Node\n  @node_name = 'AmbientLight'\n  @group_name = 'Lights'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.AmbientLight(0xffffff)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xffffff)}\n        \"position\": {type: \"Vector3\", val: new THREE.Vector3(0, 300, 0)}\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: =>\n    delete @ob\n    super\n\n  compute: =>\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('AmbientLight', AmbientLight)\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/Lights.coffee\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nNode = require 'threenodes/nodes/models/Node'\nNodeMaterialBase = require 'threenodes/nodes/models/components/Three/NodeMaterialBase'\n\n\nclass MeshBasicMaterial extends NodeMaterialBase\n  @node_name = 'MeshBasic'\n  @group_name = 'Materials'\n\n  initialize: (options) =>\n    super\n    @ob = []\n    @material_class = THREE.MeshBasicMaterial\n    @vars_rebuild_shader_on_change = [\"transparent\", \"depthTest\", \"map\"]\n    @material_cache = @createCacheObject(@vars_rebuild_shader_on_change)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xff0000)}\n        \"map\": {type: \"Any\", val: false}\n        \"reflectivity\": 1\n        \"refractionRatio\": 0.98\n        \"wireframe\": false\n        \"wireframeLinecap\": 1\n        \"vertexColors\": false\n        \"skinning\": false\n        \"fog\": true\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\nThreeNodes.Core.addNodeType('MeshBasicMaterial', MeshBasicMaterial)\n\nclass LineBasicMaterial extends NodeMaterialBase\n  @node_name = 'LineBasic'\n  @group_name = 'Materials'\n\n  initialize: (options) =>\n    super\n    @ob = []\n    @material_class = THREE.LineBasicMaterial\n    @vars_rebuild_shader_on_change = [\"transparent\", \"depthTest\"]\n    @material_cache = @createCacheObject(@vars_rebuild_shader_on_change)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xff0000)}\n        \"linewidth\": 1\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\nThreeNodes.Core.addNodeType('LineBasicMaterial', LineBasicMaterial)\n\nclass MeshLambertMaterial extends NodeMaterialBase\n  @node_name = 'MeshLambert'\n  @group_name = 'Materials'\n\n  initialize: (options) =>\n    super\n    @ob = []\n    @material_class = THREE.MeshLambertMaterial\n    @vars_rebuild_shader_on_change = [\"transparent\", \"depthTest\", \"map\"]\n    @material_cache = @createCacheObject(@vars_rebuild_shader_on_change)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xff0000)}\n        \"ambient\": {type: \"Color\", val: new THREE.Color(0x050505)}\n        \"map\": {type: \"Any\", val: false}\n        \"reflectivity\": 1\n        \"refractionRatio\": 0.98\n        \"wireframe\": false\n        \"vertexColors\": {type: \"Any\", val: false}\n        \"skinning\": false\n        \"fog\": true\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\nThreeNodes.Core.addNodeType('MeshLambertMaterial', MeshLambertMaterial)\n\nclass MeshPhongMaterial extends NodeMaterialBase\n  @node_name = 'MeshPhong'\n  @group_name = 'Materials'\n\n  initialize: (options) =>\n    super\n    @ob = []\n    @material_class = THREE.MeshPhongMaterial\n    @vars_rebuild_shader_on_change = [\"transparent\", \"depthTest\", \"map\"]\n    @material_cache = @createCacheObject(@vars_rebuild_shader_on_change)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xff0000)}\n        \"map\": {type: \"Any\", val: false}\n        \"ambient\": {type: \"Color\", val: new THREE.Color(0x050505)}\n        \"specular\": {type: \"Color\", val: new THREE.Color(0x111111)}\n        \"shininess\": 30\n        \"reflectivity\": 1\n        \"refractionRatio\": 0.98\n        \"wireframe\": false\n        \"vertexColors\": {type: \"Any\", val: false}\n        \"skinning\": false\n        \"fog\": true\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\nThreeNodes.Core.addNodeType('MeshPhongMaterial', MeshPhongMaterial)\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/Materials.coffee\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nUtils = require 'threenodes/utils/Utils'\nNode = require 'threenodes/nodes/models/Node'\n\nrequire 'ShaderVignette'\nrequire 'HorizontalBlurShader'\nrequire 'VerticalBlurShader'\nrequire 'BleachBypassShader'\nrequire 'DotScreenPass'\n\nrequire 'ConvolutionShader'\nrequire 'BloomPass'\n\nrequire 'FilmShader'\nrequire 'FilmPass'\n\nclass BloomPass extends Node\n  @node_name = 'Bloom'\n  @group_name = 'PostProcessing'\n\n  initialize: (options) =>\n    super\n    @ob = new THREE.BloomPass(1.6)\n    @cached = @createCacheObject ['kernelSize', 'sigma', 'resolution']\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"strength\": 1.6\n        \"kernelSize\": 25\n        \"sigma\": 4.0\n        \"resolution\": 256\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    delete @cached\n    super\n\n  value_has_changed: (vals) =>\n    newvals = @createCacheObject vals\n    if Utils.flatArraysAreEquals(newvals, @cached) == false\n      @cached = newvals\n      return true\n    false\n\n  compute: =>\n    if @value_has_changed(['kernelSize', 'sigma', 'resolution']) == true\n      @ob = new THREE.BloomPass(@fields.getField(\"strength\").getValue(), @fields.getField('kernelSize').getValue(), @fields.getField('sigma').getValue(), @fields.getField('resolution').getValue())\n    @ob.copyUniforms[ \"opacity\" ].value = @fields.getField(\"strength\").getValue()\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('BloomPass', BloomPass)\n\nclass DotScreenPass extends Node\n  @node_name = 'DotScreen'\n  @group_name = 'PostProcessing'\n\n  initialize: (options) =>\n    super\n    @ob = new THREE.DotScreenPass(new THREE.Vector2( 0.5, 0.5 ))\n    @cached = @createCacheObject ['center', 'angle', 'scale']\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"center\": {type: \"Vector2\", val: new THREE.Vector2( 0.5, 0.5 )}\n        \"angle\": 1.57\n        \"scale\": 1.0\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    delete @cached\n    super\n\n  value_has_changed: (vals) =>\n    newvals = @createCacheObject vals\n    if Utils.flatArraysAreEquals(newvals, @cached) == false\n      @cached = newvals\n      return true\n    false\n\n  compute: =>\n    if @value_has_changed(['center', 'angle', 'scale']) == true\n      @ob = new THREE.DotScreenPass(@fields.getField(\"center\").getValue(), @fields.getField('angle').getValue(), @fields.getField('scale').getValue())\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('DotScreenPass', DotScreenPass)\n\nclass FilmPass extends Node\n  @node_name = 'Film'\n  @group_name = 'PostProcessing'\n\n  initialize: (options) =>\n    super\n    @ob = new THREE.FilmPass( 0.5, 0.125, 2048, false )\n    @cached = @createCacheObject ['noiseIntensity', 'scanlinesIntensity', 'scanlinesCount', 'grayscale']\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"noiseIntensity\": 0.5\n        \"scanlinesIntensity\": 0.125\n        \"scanlinesCount\": 2048\n        \"grayscale\": false\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    delete @cached\n    super\n\n  value_has_changed: (vals) =>\n    newvals = @createCacheObject vals\n    if Utils.flatArraysAreEquals(newvals, @cached) == false\n      @cached = newvals\n      return true\n    false\n\n  compute: =>\n    @ob.uniforms.grayscale.value = @fields.getField(\"grayscale\").getValue()\n    @ob.uniforms.nIntensity.value = @fields.getField(\"noiseIntensity\").getValue()\n    @ob.uniforms.sIntensity.value = @fields.getField(\"scanlinesIntensity\").getValue()\n    @ob.uniforms.sCount.value = @fields.getField(\"scanlinesCount\").getValue()\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('FilmPass', FilmPass)\n\nclass VignettePass extends Node\n  @node_name = 'Vignette'\n  @group_name = 'PostProcessing'\n\n  initialize: (options) =>\n    super\n    shader = THREE.VignetteShader\n    @ob = new THREE.ShaderPass( shader )\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"offset\": 1.0\n        \"darkness\": 1.0\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.uniforms[ \"offset\" ].value = @fields.getField(\"offset\").getValue()\n    @ob.uniforms[ \"darkness\" ].value = @fields.getField(\"darkness\").getValue()\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('VignettePass', VignettePass)\n\nclass HorizontalBlurPass extends Node\n  @node_name = 'HorizontalBlur'\n  @group_name = 'PostProcessing'\n\n  initialize: (options) =>\n    super\n    shader = THREE.HorizontalBlurShader\n    @ob = new THREE.ShaderPass( shader )\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"delta\": 1.0 / 512.0\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.uniforms[ \"h\" ].value = @fields.getField(\"delta\").getValue()\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('HorizontalBlurPass', HorizontalBlurPass)\n\nclass VerticalBlurPass extends Node\n  @node_name = 'VerticalBlur'\n  @group_name = 'PostProcessing'\n\n  initialize: (options) =>\n    super\n    shader = THREE.VerticalBlurShader\n    @ob = new THREE.ShaderPass( shader )\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"delta\": 1.0 / 512.0\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.uniforms[ \"v\" ].value = @fields.getField(\"delta\").getValue()\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('VerticalBlurPass', VerticalBlurPass)\n\nclass BleachPass extends Node\n  @node_name = 'Bleach'\n  @group_name = 'PostProcessing'\n\n  initialize: (options) =>\n    super\n    shader = THREE.BleachBypassShader\n    @ob = new THREE.ShaderPass( shader )\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"opacity\": 0.95\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.uniforms[ \"opacity\" ].value = @fields.getField(\"opacity\").getValue()\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('BleachPass', BleachPass)\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/PostProcessing.coffee\n **/","jQuery = require 'jquery'\n_ = require 'Underscore'\nBackbone = require 'Backbone'\nNode = require 'threenodes/nodes/models/Node'\nrequire 'ColladaLoader'\nObject3D = require 'threenodes/nodes/models/components/Three/Object3D'\nWebglBase = require 'threenodes/utils/WebglBase'\n\nclass Scene extends Object3D\n  @node_name = 'Scene'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    @ob = new THREE.Scene()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"fog\": {type: 'Any', val: null}\n    return $.extend(true, base_fields, fields)\n\n  onFieldsCreated: () =>\n    @v_fog = @fields.getField(\"fog\")\n\n  remove: () =>\n    if @ob\n      delete @ob.fog\n      delete @ob.__objects\n      delete @ob.__lights\n      delete @ob.__objectsAdded\n      delete @ob.__objectsRemoved\n    delete @vfog\n    super\n\n  compute: =>\n    @applyFieldsToVal(@fields.inputs, @ob, ['children', 'lights', 'rotation'])\n    @apply_children()\n    rotation = @fields.getField('rotation').getValue()\n    @applyRotation(@ob, rotation)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('Scene', Scene)\n\nclass Object3DwithMeshAndMaterial extends Object3D\n  initialize: (options) =>\n    super\n    @material_cache = false\n    @geometry_cache = false\n\n  remove: () =>\n    delete @material_cache\n    delete @geometry_cache\n    super\n\n  rebuild_geometry: =>\n    field = @fields.getField('geometry')\n    if field.connections.length > 0\n      geom = field.connections[0].from_field.node\n      geom.cached = []\n      geom.compute()\n    else\n      @fields.getField('geometry').setValue(new THREE.CubeGeometry( 200, 200, 200 ))\n\n  get_geometry_cache: =>\n    res = \"\"\n    current_val = @fields.getField('geometry').get(\"value\")\n    if $.type(current_val) == \"array\"\n      for f in current_val\n        res += f.id\n    else\n      res = current_val.id\n    res\n\n  get_material_cache: =>\n    res = \"\"\n    current_val = @fields.getField('material').get(\"value\")\n    if $.type(current_val) == \"array\"\n      for f in current_val\n        res += f.id\n    else\n      res = current_val.id\n    res\n\nclass ColladaLoader extends Object3D\n  @node_name = 'ColladaLoader'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    @ob = [new THREE.Object3D()]\n    @file_url = \"\"\n    @vars_shadow_options = [\"castShadow\", \"receiveShadow\"]\n    @shadow_cache = []\n    @compute()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"file_url\": \"\"\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    if @ob\n      for item in @ob\n        @deleteObjectAttributes(item)\n\n    delete @model_object\n    super\n\n  onModelLoaded: () =>\n    for subchild in @ob\n      subchild.add(@model_object)\n\n  compute: =>\n    needs_rebuild = false\n    #numItems = @fields.getMaxInputSliceCount()\n    numItems = 0\n    new_url = @fields.getField('file_url').getValue()\n    #if @last_slice_count != numItems\n    #  needs_rebuild = true\n    #  @last_slice_count = numItems\n\n    cast = @fields.getField('castShadow').getValue()\n    receive = @fields.getField('receiveShadow').getValue()\n\n    if new_url != \"\" && @file_url != new_url\n      @ob = []\n      for i in [0..numItems]\n        @ob[i] = new THREE.Object3D()\n      loader = new THREE.ColladaLoader()\n      loader.options.convertUpAxis = true\n      loader.load new_url, (collada) =>\n        dae = collada.scene\n        dae.updateMatrix()\n        @model_object = dae\n        @onModelLoaded()\n        applyShadowOptionsToSubMeshes(@model_object)\n\n    applyShadowOptionsToSubMeshes = (obj) =>\n      if !obj\n        return false\n\n      obj.castShadow = cast\n      obj.receiveShadow = receive\n\n      if obj.material\n        rebuild_shader = false\n        if obj.material.castShadow != cast ||obj.material.receiveShadow != receive\n          rebuild_shader = true\n          obj.material.castShadow = cast\n          obj.material.receiveShadow = receive\n        if rebuild_shader == true\n          obj.material.program = false\n      if obj.children && obj.children.length > 0\n        for child in obj.children\n          applyShadowOptionsToSubMeshes(child)\n\n    for i in [0..numItems]\n      @applyFieldsToVal(@fields.inputs, @ob[i], ['children', 'file_url', 'castShadow', 'receiveShadow', 'rotation'], i)\n      rotation = @fields.getField('rotation').getValue(i)\n      @applyRotation(@ob[i], rotation)\n      @ob[i].castShadow = cast\n      @ob[i].receiveShadow = receive\n\n    if @model_object && @inputValueHasChanged(@vars_shadow_options, @shadow_cache)\n      needs_rebuild = true\n      applyShadowOptionsToSubMeshes(@model_object)\n\n    if needs_rebuild == true\n      @trigger(\"RebuildAllShaders\")\n\n    @file_url = new_url\n    @shadow_cache = @createCacheObject(@vars_shadow_options)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('ColladaLoader', ColladaLoader)\n\nclass ThreeMesh extends Object3DwithMeshAndMaterial\n  @node_name = 'Mesh'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    @ob = [new THREE.Mesh(new THREE.CubeGeometry( 200, 200, 200 ), new THREE.MeshBasicMaterial({color: 0xff0000}))]\n    @last_slice_count = 1\n    @compute()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"geometry\": {type: \"Geometry\", val: new THREE.CubeGeometry( 200, 200, 200 )}\n        \"material\": {type: \"Material\", val: new THREE.MeshBasicMaterial({color: 0xff0000})}\n        \"overdraw\": false\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    if @ob\n      for item in @ob\n        @deleteObjectAttributes(item)\n        delete item.geometry\n        delete item.material\n\n    super\n\n  compute: =>\n    needs_rebuild = false\n    count_change = false\n    numItems = @fields.getMaxInputSliceCount()\n    new_material_cache = @get_material_cache()\n    new_geometry_cache = @get_geometry_cache()\n\n    if @last_slice_count != numItems\n      count_change = true\n\n      if !@ob?\n        @ob = []\n\n      if @last_slice_count > numItems\n        # Remove extra items.\n        @ob = @ob.slice(0, numItems)\n      else\n        # Add new items.\n        for i in [@ob.length..numItems]\n          item = new THREE.Mesh(@fields.getField('geometry').getValue(i), @fields.getField('material').getValue(i))\n          @ob[i] = item\n\n    if @inputValueHasChanged(@vars_shadow_options, @shadow_cache)\n      needs_rebuild = true\n\n    if @material_cache != new_material_cache\n      # let's trigger a geometry rebuild so we have the appropriate buffers set\n      @rebuild_geometry()\n\n    if @geometry_cache != new_geometry_cache || @material_cache != new_material_cache || needs_rebuild\n      @ob = []\n      for i in [0..numItems - 1]\n        item = new THREE.Mesh(@fields.getField('geometry').getValue(i), @fields.getField('material').getValue(i))\n        @ob[i] = item\n\n    for i in [0..@ob.length - 1]\n      @applyFieldsToVal(@fields.inputs, @ob[i], ['children', 'geometry', 'material', 'rotation'], i)\n      rotation = @fields.getField('rotation').getValue(i)\n      @applyRotation(@ob[i], rotation)\n\n    if needs_rebuild == true || count_change\n      @trigger(\"RebuildAllShaders\")\n\n    @shadow_cache = @createCacheObject(@vars_shadow_options)\n    @geometry_cache = @get_geometry_cache()\n    @material_cache = @get_material_cache()\n    @last_slice_count = numItems\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('ThreeMesh', ThreeMesh)\n\nclass ThreeLine extends Object3DwithMeshAndMaterial\n  @node_name = 'Line'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    @ob = [new THREE.Line(new THREE.CubeGeometry( 200, 200, 200 ), new THREE.LineBasicMaterial({color: 0xffffff}))]\n    @last_slice_count = 1\n    @compute()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"geometry\": {type: \"Geometry\", val: new THREE.CubeGeometry( 200, 200, 200 )}\n        \"material\": {type: \"Material\", val: new THREE.LineBasicMaterial({color: 0xffffff})}\n        \"type\":\n          type: \"Float\"\n          val: THREE.LineStrip\n          values:\n            \"LineStrip\": THREE.LineStrip\n            \"LinePieces\": THREE.LinePieces\n    return $.extend(true, base_fields, fields)\n\n  compute: =>\n    needs_rebuild = false\n    numItems = @fields.getMaxInputSliceCount()\n    new_material_cache = @get_material_cache()\n    new_geometry_cache = @get_geometry_cache()\n\n    if @last_slice_count != numItems\n      needs_rebuild = true\n      @last_slice_count = numItems\n\n    if @inputValueHasChanged(@vars_shadow_options, @shadow_cache)\n      needs_rebuild = true\n\n    if @material_cache != new_material_cache\n      # let's trigger a geometry rebuild so we have the appropriate buffers set\n      @rebuild_geometry()\n\n    if @geometry_cache != new_geometry_cache || @material_cache != new_material_cache || needs_rebuild\n      @ob = []\n      for i in [0..numItems]\n        item = new THREE.Line(@fields.getField('geometry').getValue(i), @fields.getField('material').getValue(i))\n        @ob[i] = item\n\n    for i in [0..numItems]\n      @applyFieldsToVal(@fields.inputs, @ob[i], ['children', 'geometry', 'material', 'rotation'], i)\n      rotation = @fields.getField('rotation').getValue(i)\n      @applyRotation(@ob[i], rotation)\n\n    if needs_rebuild == true\n      @trigger(\"RebuildAllShaders\")\n\n    @shadow_cache = @createCacheObject(@vars_shadow_options)\n    @geometry_cache = @get_geometry_cache()\n    @material_cache = @get_material_cache()\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('ThreeLine', ThreeLine)\n\nclass Camera extends Node\n  @node_name = 'Camera'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    @ob = new THREE.PerspectiveCamera(75, 800 / 600, 1, 10000)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"fov\": 50\n        \"aspect\": 1\n        \"near\": 0.1\n        \"far\": 2000\n        \"position\": {type: \"Vector3\", val: new THREE.Vector3()}\n        \"target\": {type: \"Vector3\", val: new THREE.Vector3()}\n        \"useTarget\": false\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  deleteObjectAttributes: (ob) =>\n    if ob\n      delete ob.up\n      delete ob.position\n      delete ob.rotation\n      delete ob.scale\n      delete ob.matrix\n      delete ob.matrixWorld\n      delete ob.matrixRotationWorld\n      delete ob.quaternion\n      delete ob._vector\n\n  remove: () =>\n    @deleteObjectAttributes(@ob)\n    delete @ob\n    super\n\n  compute: =>\n    @applyFieldsToVal(@fields.inputs, @ob, ['target'])\n    @ob.lookAt(@fields.getField(\"target\").getValue())\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('Camera', Camera)\n\nclass Texture extends Node\n  @node_name = 'Texture'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    @ob = false\n    @cached = false\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"image\": {type: \"String\", val: false}\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    delete @cached\n    super\n\n  compute: =>\n    current = @fields.getField(\"image\").getValue()\n    if current && current != \"\"\n      if @cached == false ||($.type(@cached) == \"object\" && @cached.constructor == THREE.Texture && @cached.image.attributes[0].nodeValue != current)\n        #@ob = new THREE.Texture(current)\n        @ob = new THREE.ImageUtils.loadTexture(current)\n        console.log \"new texture\"\n        console.log @ob\n        @cached = @ob\n\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('Texture', Texture)\n\nclass Fog extends Node\n  @node_name = 'Fog'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    @ob = false\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xffffff)}\n        \"near\": 1\n        \"far\": 1000\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    if @ob == false\n      @ob = new THREE.Fog(0xffffff, 1, 1000)\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('Fog', Fog)\n\nclass FogExp2 extends Node\n  @node_name = 'FogExp2'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    @ob = false\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xffffff)}\n        \"density\": 0.00025\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    if @ob == false\n      @ob = new THREE.FogExp2(0xffffff, 0.00025)\n    @applyFieldsToVal(@fields.inputs, @ob)\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('FogExp2', FogExp2)\n\nclass WebGLRenderer extends Node\n  @node_name = 'WebGLRenderer'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    if !WebglBase.instance\n      @webgl = new WebglBase()\n    else\n      @webgl = WebglBase.instance\n    @auto_evaluate = true\n    @ob = WebglBase.current_renderer\n\n    @width = 0\n    @height = 0\n\n  getFields: =>\n    camera = new THREE.PerspectiveCamera(75, 800 / 600, 1, 10000)\n    camera.position.z = 1000\n    base_fields = super\n    fields =\n      inputs:\n        \"width\": 800\n        \"height\": 600\n        \"scene\": {type: \"Scene\", val: new THREE.Scene()}\n        \"camera\": {type: \"Camera\", val: camera}\n        \"bg_color\": {type: \"Color\", val: new THREE.Color(0, 0, 0)}\n        \"postfx\": {type: \"Array\", val: []}\n        \"shadowCameraNear\": 3\n        \"shadowCameraFar\": 3000\n        \"shadowMapWidth\": 512\n        \"shadowMapHeight\": 512\n        \"shadowMapEnabled\": false\n        \"shadowMapSoft\": true\n\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    if WebglBase.current_camera == @fields.getField(\"camera\").getValue()\n      WebglBase.current_camera = new THREE.PerspectiveCamera(75, 800 / 600, 1, 10000)\n      WebglBase.renderModel.camera = WebglBase.current_camera\n    if WebglBase.current_scene == @fields.getField(\"scene\").getValue()\n      WebglBase.current_scene = new THREE.Scene()\n      WebglBase.renderModel.scene = WebglBase.current_scene\n\n    $(@ob.domElement).unbind()\n    delete @ob\n    delete @width\n    delete @height\n    super\n\n  apply_post_fx: =>\n    # work on a copy of the incoming array\n    fxs = @fields.getField(\"postfx\").getValue().slice(0)\n    # 1st pass = rendermodel, last pass = screen\n    fxs.unshift WebglBase.renderModel\n    fxs.push WebglBase.effectScreen\n    WebglBase.composer.passes = fxs\n\n  compute: =>\n    if !WebglBase.current_renderer\n      return\n\n    @trigger(\"on_compute\")\n\n    @applyFieldsToVal(@fields.inputs, @ob, ['width', 'height', 'scene', 'camera', 'bg_color', 'postfx'])\n    WebglBase.current_camera = @fields.getField(\"camera\").getValue()\n    WebglBase.current_scene = @fields.getField(\"scene\").getValue()\n\n    #set the current aspect on the camera\n    @fields.getField(\"camera\").getValue().aspect = @width / @height\n    @fields.getField(\"camera\").getValue().updateProjectionMatrix()\n\n    @apply_post_fx()\n    @ob.clear()\n    WebglBase.renderModel.scene = WebglBase.current_scene\n    WebglBase.renderModel.camera = WebglBase.current_camera\n    WebglBase.composer.renderer = WebglBase.current_renderer\n    WebglBase.composer.render(0.05)\n\nThreeNodes.Core.addNodeType('WebGLRenderer', WebGLRenderer)\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/Three.coffee\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nUtils = require 'threenodes/utils/Utils'\nNode = require 'threenodes/nodes/models/Node'\nrequire 'Three'\nrequire 'csg'\nrequire 'ThreeCSG'\n\nclass NodeCSG extends Node\n  constructor: () ->\n    super\n    @auto_evaluate = true\n    @ob = false\n    @cached = []\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"a\": {type: \"Any\", val: false},\n        \"position_a\": {type: \"Vector3\", val: new THREE.Vector3()}\n        \"rotation_a\": {type: \"Vector3\", val: new THREE.Vector3()}\n        \"b\": {type: \"Any\", val: false},\n        \"position_b\": {type: \"Vector3\", val: new THREE.Vector3()}\n        \"rotation_b\": {type: \"Vector3\", val: new THREE.Vector3()}\n      outputs:\n        \"geometry\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  comput_csg_geometry: (a, b) => a.union(b)\n\n  get_cache_array: =>\n    a = @fields.getField(\"a\").getValue()\n    pos_a = @fields.getField(\"position_a\").getValue()\n    rot_a = @fields.getField(\"rotation_a\").getValue()\n    b = @fields.getField(\"b\").getValue()\n    pos_b = @fields.getField(\"position_b\").getValue()\n    rot_b = @fields.getField(\"rotation_b\").getValue()\n    if !a || !b then return []\n    [a.id, b.id, pos_a.x, pos_a.y, pos_a.z, rot_a.x, rot_a.y, rot_a.z, pos_b.x, pos_b.y, pos_b.z, rot_b.x, rot_b.y, rot_b.z]\n\n  remove: =>\n    delete @ob\n    delete @cached\n    super\n\n  compute: =>\n    a = @fields.getField(\"a\").getValue()\n    pos_a = @fields.getField(\"position_a\").getValue()\n    rot_a = @fields.getField(\"rotation_a\").getValue()\n    b = @fields.getField(\"b\").getValue()\n    pos_b = @fields.getField(\"position_b\").getValue()\n    rot_b = @fields.getField(\"rotation_b\").getValue()\n    new_cache = @get_cache_array()\n    # todo: recompute if a or b change\n    if (a && b) && (Utils.flatArraysAreEquals(new_cache, @cached) == false)\n      console.log \"csg operation\"\n      csg_a = THREE.CSG.toCSG(a, pos_a, rot_a)\n      csg_b = THREE.CSG.toCSG(b, pos_b, rot_b)\n      csg_geom = @comput_csg_geometry(csg_a, csg_b)\n      @ob = THREE.CSG.fromCSG(csg_geom)\n      @cached = new_cache\n    @fields.setField(\"geometry\", @ob)\n\nclass CsgUnion extends NodeCSG\n  @node_name = 'Union'\n  @group_name = 'Constructive-Geometry'\n\nThreeNodes.Core.addNodeType('CsgUnion', CsgUnion)\n\nclass CsgSubtract extends NodeCSG\n  @node_name = 'Subtract'\n  @group_name = 'Constructive-Geometry'\n\n  comput_csg_geometry: (a, b) => a.subtract(b)\n\nThreeNodes.Core.addNodeType('CsgSubtract', CsgSubtract)\n\nclass CsgIntersect extends NodeCSG\n  @node_name = 'Intersect'\n  @group_name = 'Constructive-Geometry'\n\n  comput_csg_geometry: (a, b) => a.intersect(b)\n\nThreeNodes.Core.addNodeType('CsgIntersect', CsgIntersect)\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/ConstructiveSolidGeometry.coffee\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nUtils = require 'threenodes/utils/Utils'\nNode = require 'threenodes/nodes/models/Node'\nObject3D = require 'threenodes/nodes/models/components/Three/Object3D'\nNodeMaterialBase = require 'threenodes/nodes/models/components/Three/NodeMaterialBase'\nrequire './Three'\nrequire './Materials'\nrequire 'libs/Tween'\nrequire 'libs/Sparks'\n\nclass ParticleSystem extends Object3D\n  @node_name = 'ParticleSystem'\n  @group_name = 'Particle'\n\n  initialize: () =>\n    super\n    @ob = new THREE.ParticleSystem(new THREE.CubeGeometry( 200, 200, 200 ), new THREE.ParticleBasicMaterial())\n    @ob.dynamic = true\n    @geometry_cache = false\n    @material_cache = false\n    @compute()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"geometry\": {type: \"Any\", val: new THREE.CubeGeometry( 200, 200, 200 )}\n        \"material\": {type: \"Any\", val: new THREE.ParticleBasicMaterial()}\n        \"sortParticles\": false\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    super\n    delete @geometry_cache\n    delete @material_cache\n\n  rebuild_geometry: =>\n    field = @fields.getField('geometry')\n    if field.connections.length > 0\n      geom = field.connections[0].from_field.node\n      geom.cached = []\n      geom.compute()\n    else\n      @fields.getField('geometry').setValue(new THREE.CubeGeometry( 200, 200, 200 ))\n\n  compute: =>\n    needs_rebuild = false\n\n    if @material_cache != @fields.getField('material').getValue().id\n      # let's trigger a geometry rebuild so we have the appropriate buffers set\n      @rebuild_geometry()\n\n    if @geometry_cache != @fields.getField('geometry').getValue().id || @material_cache != @fields.getField('material').getValue().id || needs_rebuild\n      @ob = new THREE.ParticleSystem(@fields.getField('geometry').getValue(), @fields.getField('material').getValue())\n      @geometry_cache = @fields.getField('geometry').getValue().id\n      @material_cache = @fields.getField('material').getValue().id\n\n    @applyFieldsToVal(@fields.inputs, @ob, ['children', 'geometry', 'material'])\n\n    if needs_rebuild == true\n      @trigger(\"RebuildAllShaders\")\n\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('ParticleSystem', ParticleSystem)\n\nclass ParticleBasicMaterial extends NodeMaterialBase\n  @node_name = 'ParticleBasicMaterial'\n  @group_name = 'Materials'\n\n  initialize: (options) =>\n    super\n    @ob = []\n    @material_class = THREE.ParticleBasicMaterial\n    @vars_rebuild_shader_on_change = [\"transparent\", \"depthTest\", \"map\"]\n    @material_cache = @createCacheObject(@vars_rebuild_shader_on_change)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"color\": {type: \"Color\", val: new THREE.Color(0xff0000)}\n        \"map\": {type: \"Any\", val: false}\n        \"size\": 1\n        \"sizeAttenuation\": true\n        \"vertexColors\": false\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\nThreeNodes.Core.addNodeType('ParticleBasicMaterial', ParticleBasicMaterial)\n\nclass SparksEmitter extends Node\n  @node_name = 'Emitter'\n  @group_name = 'Particle.sparks'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @geom = new THREE.Geometry()\n    @target_initializer = new SPARKS.Target( null, @setTargetParticle )\n    @pool = @fields.getField(\"pool\").getValue()\n    @ob = new SPARKS.Emitter(@fields.getField(\"counter\").getValue())\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"counter\": {type: \"Any\", val: new SPARKS.SteadyCounter(50)}\n        \"pool\": {type: \"Any\", val: false}\n        \"initializers\": {type: \"Array\", val: []}\n        \"actions\": {type: \"Array\", val: []}\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  setTargetParticle: (p) =>\n    if @pool && @pool.pool\n      return @pool.pool.get()\n\n  compute: =>\n    if @fields.getField(\"pool\").getValue() != false\n      if @pool != @fields.getField(\"pool\").getValue()\n        @ob.removeCallback \"created\"\n        @ob.removeCallback \"dead\"\n        @ob.stop()\n        @ob = new SPARKS.Emitter(@fields.getField(\"counter\").getValue())\n        @geom = new THREE.Geometry()\n\n        @pool = @fields.getField(\"pool\").getValue()\n        @pool.init_pool(@geom)\n        @ob.addCallback \"created\", @pool.on_particle_created\n        #@ob.addCallback \"updated\", @pool.on_particle_updated\n        @ob.addCallback \"dead\", @pool.on_particle_dead\n        console.log \"pool particle setup...\"\n\n    # works on a copy of the incoming array\n    initializers = @fields.getField(\"initializers\").getValue().slice(0)\n    initializers.push(@target_initializer)\n\n    @ob._initializers = initializers\n    @ob._actions = @fields.getField(\"actions\").getValue()\n    @ob._counter = @fields.getField(\"counter\").getValue()\n    if @pool != false && @ob.isRunning() == false\n      @ob.start()\n\n    @fields.setField(\"out\", @geom)\n\n  remove: =>\n    super\n    if @ob\n      @ob.removeCallback \"created\"\n      @ob.removeCallback \"dead\"\n      @ob.stop()\n    delete @ob\n    delete @target_initializer\n    delete @geom\n    delete @pool\n\nThreeNodes.Core.addNodeType('SparksEmitter', SparksEmitter)\n\nclass SparksAge extends Node\n  @node_name = 'Age'\n  @group_name = 'Particle.sparks.actions'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.Age(TWEEN.Easing.Linear.EaseNone)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"easing\": {type: \"Any\", val: TWEEN.Easing.Linear.EaseNone}\n      outputs:\n        \"action\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob._easing = @fields.getField(\"easing\").get(\"value\")\n    @fields.setField(\"action\", @ob)\n\nThreeNodes.Core.addNodeType('SparksAge', SparksAge)\n\nclass SparksMove extends Node\n  @node_name = 'Move'\n  @group_name = 'Particle.sparks.actions'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.Move()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      outputs:\n        \"action\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @fields.setField(\"action\", @ob)\n\nThreeNodes.Core.addNodeType('SparksMove', SparksMove)\n\nclass SparksAccelerate extends Node\n  @node_name = 'Accelerate'\n  @group_name = 'Particle.sparks.actions'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.Accelerate(new THREE.Vector3(0, 1, 0))\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"vector\": {type: \"Vector3\", val: new THREE.Vector3(0, 1, 0)}\n      outputs:\n        \"action\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.acceleration = @fields.getField(\"vector\").getValue()\n    @fields.setField(\"action\", @ob)\n\nThreeNodes.Core.addNodeType('SparksAccelerate', SparksAccelerate)\n\nclass SparksAccelerateFactor extends Node\n  @node_name = 'AccelerateFactor'\n  @group_name = 'Particle.sparks.actions'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.AccelerateFactor(2.0)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"factor\": 2.0\n      outputs:\n        \"action\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.factor = @fields.getField(\"factor\").getValue()\n    @fields.setField(\"action\", @ob)\n\nThreeNodes.Core.addNodeType('SparksAccelerateFactor', SparksAccelerateFactor)\n\nclass SparksAccelerateVelocity extends Node\n  @node_name = 'AccelerateVelocity'\n  @group_name = 'Particle.sparks.actions'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.AccelerateVelocity(2.0)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"factor\": 2.0\n      outputs:\n        \"action\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.factor = @fields.getField(\"factor\").getValue()\n    @fields.setField(\"action\", @ob)\n\nThreeNodes.Core.addNodeType('SparksAccelerateVelocity', SparksAccelerateVelocity)\n\nclass SparksRandomDrift extends Node\n  @node_name = 'RandomDrift'\n  @group_name = 'Particle.sparks.actions'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.RandomDrift(new THREE.Vector3(0, 1, 0))\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"vector\": {type: \"Vector3\", val: new THREE.Vector3(0, 1, 0)}\n      outputs:\n        \"action\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.drift = @fields.getField(\"vector\").getValue()\n    @fields.setField(\"action\", @ob)\n\nThreeNodes.Core.addNodeType('SparksRandomDrift', SparksRandomDrift)\n\nclass SparksLifetime extends Node\n  @node_name = 'Lifetime'\n  @group_name = 'Particle.sparks.initializers'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.Lifetime(4, 7)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"min\": 4\n        \"max\": 7\n      outputs:\n        \"initializer\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob._min = @fields.getField(\"min\").getValue()\n    @ob._min = @fields.getField(\"max\").getValue()\n    @fields.setField(\"initializer\", @ob)\n\nThreeNodes.Core.addNodeType('SparksLifetime', SparksLifetime)\n\nclass SparksPosition extends Node\n  @node_name = 'Position'\n  @group_name = 'Particle.sparks.initializers'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.Position(new SPARKS.PointZone( new THREE.Vector3(0,0,0)))\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"zone\": {type: \"Any\", val: new SPARKS.PointZone( new THREE.Vector3(0,0,0))}\n      outputs:\n        \"initializer\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.zone = @fields.getField(\"zone\").getValue()\n    @fields.setField(\"initializer\", @ob)\n\nThreeNodes.Core.addNodeType('SparksPosition', SparksPosition)\n\nclass SparksPointZone extends Node\n  @node_name = 'PointZone'\n  @group_name = 'Particle.sparks.zone'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.PointZone(new THREE.Vector3())\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"pos\": {type: \"Vector3\", val: new THREE.Vector3()}\n      outputs:\n        \"zone\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.pos = @fields.getField(\"pos\").getValue()\n    @fields.setField(\"zone\", @ob)\n\nThreeNodes.Core.addNodeType('SparksPointZone', SparksPointZone)\n\nclass SparksLineZone extends Node\n  @node_name = 'LineZone'\n  @group_name = 'Particle.sparks.zone'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.LineZone(new THREE.Vector3(), new THREE.Vector3(100, 0, 0))\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"start\": {type: \"Vector3\", val: new THREE.Vector3()}\n        \"end\": {type: \"Vector3\", val: new THREE.Vector3(100, 0, 0)}\n      outputs:\n        \"zone\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    if this.ob.start != this.fields.get(\"start\").getValue() ||this.ob.end != this.fields.get(\"end\").getValue()\n      @ob.start = @fields.getField(\"start\").getValue()\n      @ob.end = @fields.getField(\"end\").getValue()\n      @ob._length = @ob.end.clone().subSelf( @ob.start )\n    @fields.setField(\"zone\", @ob)\n\nThreeNodes.Core.addNodeType('SparksLineZone', SparksLineZone)\n\nclass SparksCubeZone extends Node\n  @node_name = 'CubeZone'\n  @group_name = 'Particle.sparks.zone'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.CubeZone(new THREE.Vector3(), 0, 0, 0)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"position\": {type: \"Vector3\", val: new THREE.Vector3()}\n        \"x\": 0\n        \"y\": 0\n        \"z\": 0\n      outputs:\n        \"zone\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.position = @fields.getField(\"position\").getValue()\n    @ob.x = @fields.getField(\"x\").getValue()\n    @ob.y = @fields.getField(\"y\").getValue()\n    @ob.z = @fields.getField(\"z\").getValue()\n    @fields.setField(\"zone\", @ob)\n\nThreeNodes.Core.addNodeType('SparksCubeZone', SparksCubeZone)\n\nclass SparksSteadyCounter extends Node\n  @node_name = 'SteadyCounter'\n  @group_name = 'Particle.sparks'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new SPARKS.SteadyCounter(100)\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"rate\": 100\n      outputs:\n        \"counter\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    super\n\n  compute: =>\n    @ob.pos = @fields.getField(\"rate\").getValue()\n    @fields.setField(\"counter\", @ob)\n\nThreeNodes.Core.addNodeType('SparksSteadyCounter', SparksSteadyCounter)\n\nclass ParticlePool extends Node\n  @node_name = 'ParticlePool'\n  @group_name = 'Particle.sparks'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @geom = false\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"maxParticles\": 10000\n      outputs:\n        \"pool\": {type: \"Any\", val: this}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @pool\n    delete @geom\n    super\n\n  init_pool: (geom) =>\n    @geom = geom\n    @pool =\n      pools: []\n      get: () ->\n        if @pools.length > 0\n          return @pools.pop()\n        return null\n      add: (v) ->\n        @pools.push(v)\n\n    new_pos = () ->\n      new THREE.Vector3(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY)\n\n    for i in [0..@fields.getField(\"maxParticles\").getValue() - 1]\n      pos = new_pos()\n      geom.vertices.push(pos)\n      @pool.add(pos)\n\n  on_particle_created: (particle) =>\n    if @geom == false\n      return false\n    target = particle.target\n\n    if target\n      particle.target.position = particle.position\n\n  on_particle_updated: (particle) =>\n    return true\n\n  on_particle_dead: (particle) =>\n    if @geom == false\n      return false\n    target = particle.target\n    if target\n      particle.target.position.set(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY)\n      @pool.add(particle.target)\n\n  compute: () =>\n    if @geom != false\n      @geom.verticesNeedUpdate = true\n    @fields.setField(\"pool\", this)\n\nThreeNodes.Core.addNodeType('ParticlePool', ParticlePool)\n\nclass RandomCloudGeometry extends Node\n  @node_name = 'RandomCloudGeometry'\n  @group_name = 'Particle'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = true\n    @ob = new THREE.Geometry()\n    @cache = @get_cache_array()\n    @generate()\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"nbrParticles\": 20000\n        \"radius\": 2000\n        \"rndVelocity\": {type: \"Vector3\", val: new THREE.Vector3(1, 1, 1)}\n        \"linearVelocity\": {type: \"Vector3\", val: new THREE.Vector3(1, 1, 1)}\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return $.extend(true, base_fields, fields)\n\n  remove: () =>\n    delete @ob\n    delete @cache\n    super\n\n  get_cache_array: =>\n    [@fields.getField(\"radius\").getValue(), @fields.getField(\"nbrParticles\").getValue(), @fields.getField(\"linearVelocity\").getValue()]\n\n  limit_position: (pos) =>\n    radius = @fields.getField(\"radius\").getValue()\n    margin = 5\n    if pos < radius * -1\n      pos = radius - margin\n    else if pos > radius\n      pos = radius * -1 + margin\n    pos\n\n  move_particles: =>\n    rndVelocity = @fields.getField(\"rndVelocity\").getValue()\n    for key,p of @ob.vertices\n      p.x += Math.random() * rndVelocity.x - rndVelocity.x * 0.5 + p.velocity.x\n      p.y += Math.random() * rndVelocity.y - rndVelocity.y * 0.5 + p.velocity.y\n      p.z += Math.random() * rndVelocity.z - rndVelocity.z * 0.5 + p.velocity.z\n      p.x = @limit_position(p.x)\n      p.y = @limit_position(p.y)\n      p.z = @limit_position(p.z)\n    @ob.verticesNeedUpdate = true\n    true\n\n  generate: =>\n    @ob = new THREE.Geometry()\n    rad = @fields.getField(\"radius\").getValue()\n    total = @fields.getField(\"nbrParticles\").getValue()\n    linearVelocity = @fields.getField(\"linearVelocity\").getValue()\n    for i in [0..total]\n      v = new THREE.Vector3( Math.random() * rad * 2 - rad, Math.random() * rad * 2 - rad, Math.random() * rad * 2 - rad )\n      v.velocity = new THREE.Vector3( Math.random() * linearVelocity.x - linearVelocity.x * 0.5, Math.random() * linearVelocity.y - linearVelocity.y * 0.5, Math.random() * linearVelocity.z - linearVelocity.z * 0.5 )\n      @ob.vertices.push( v )\n    true\n\n  compute: =>\n    new_cache = @get_cache_array()\n    if Utils.flatArraysAreEquals(new_cache, @cache) == false\n      @generate()\n\n    @move_particles()\n    @cache = new_cache\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('RandomCloudGeometry', RandomCloudGeometry)\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/Particle.coffee\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Blob\"\n ** module id = 31\n ** module chunks = 0 3\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"FileSaver\"\n ** module id = 32\n ** module chunks = 0 3\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_33__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Three\"\n ** module id = 33\n ** module chunks = 0\n **/","class Utils\n  @flatArraysAreEquals: (arr1, arr2) ->\n    if arr1.length != arr2.length\n      return false\n\n    for k, i in arr1\n      if arr1[i] != arr2[i]\n        return false\n\n    true\n\nmodule.exports = Utils\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/utils/Utils.coffee\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nUtils = require 'threenodes/utils/Utils'\nFields = require 'threenodes/fields/collections/Fields'\n\n### Node model ###\n\n# Common base for all nodes.\nclass Node extends Backbone.Model\n  @node_name = ''\n  @group_name = ''\n\n  defaults:\n    nid: -1\n    gid: -1 # group id, set on subnodes of group == group.nid\n    x: 0\n    y: 0\n    width: null\n    height: null\n    name: \"\"\n\n  initialize: (options) =>\n    super\n\n    # Define common node properties defining how the node should be updated\n    @auto_evaluate = false\n    @delays_output = false\n    @dirty = true\n\n    # Define some utility variables, used internally\n    @is_animated = false\n    @out_connections = []\n\n    # Keep reference of some variables\n    @apptimeline = options.timeline\n    @settings = options.settings\n    @indexer = options.indexer\n    @options = options\n\n    # Parent node, used to detect if a node is part of a group\n    @parent = options.parent\n\n    # Set a default node name if none is provided\n    if @get('name') == '' then @set('name', @typename())\n\n    if @get('nid') == -1\n      # If this a new node assign a unique id to it\n      @set('nid', @indexer.getUID())\n    else\n      # If the node is loaded set the indexer uid to the node.nid.\n      # With this, the following created nodes will have a unique nid\n      @indexer.uid = @get('nid')\n\n    # Create the fields collections\n    @fields = new Fields(false, {node: this, indexer: @indexer})\n\n    # Call onFieldsCreated so that nodes can alias fields\n    @onFieldsCreated()\n\n    # Load saved data after the fields have been set\n    @fields.load(@options.fields)\n\n    # Init animation for current fields\n    @anim = @createAnimContainer()\n\n    # Load saved animation data if it exists\n    if @options.anim != false\n      @loadAnimation()\n\n    return this\n\n  typename: => String(@constructor.name)\n\n  onFieldsCreated: () =>\n    # This is where fields can get aliased ex:\n    # @v_in = @fields.getField(\"in\")\n\n  # Cleanup the variables and destroy internal anims and fields for garbage collection\n  remove: () =>\n    if @anim\n      @anim.destroy()\n    if @fields\n      @fields.destroy()\n    delete @fields\n    delete @apptimeline\n    delete @anim\n    delete @options\n    delete @settings\n    delete @indexer\n\n    # todo : remove when @model.postInit is removed in NodeView\n    delete @fully_inited\n\n    @destroy()\n\n  # Load the animation from json data\n  loadAnimation: () =>\n    for propLabel, anims of @options.anim\n      track = @anim.getPropertyTrack(propLabel)\n      for propKey in anims\n        track.keys.push\n          time: propKey.time,\n          value: propKey.value,\n          easing: Timeline.stringToEasingFunction(propKey.easing),\n          track: track\n      @anim.timeline.rebuildTrackAnimsFromKeys(track)\n    true\n\n  createConnection: (field1, field2) =>\n    @trigger(\"createConnection\", field1, field2)\n\n  addCountInput : () =>\n    @fields.addFields\n      inputs:\n        \"count\" : 1\n\n  createCacheObject: (values) =>\n    res = {}\n    for v in values\n      field = @fields.getField(v)\n      res[v] = if !field then false else field.attributes[\"value\"]\n    res\n\n  inputValueHasChanged: (values, cache = @material_cache) =>\n    for v in values\n      field = @fields.getField(v)\n      if !field\n        return false\n      else\n        v2 = field.attributes[\"value\"]\n        if v2 != cache[v]\n          return true\n    false\n\n  getFields: =>\n    # to implement\n    return {}\n\n  hasOutConnection: () =>\n    @out_connections.length != 0\n\n  getUpstreamNodes: () => @fields.getUpstreamNodes()\n  getDownstreamNodes: () => @fields.getDownstreamNodes()\n\n  hasPropertyTrackAnim: () =>\n    for propTrack in @anim.objectTrack.propertyTracks\n      if propTrack.anims.length > 0\n        return true\n    false\n\n  getAnimationData: () =>\n    if !@anim || !@anim.objectTrack || !@anim.objectTrack.propertyTracks || @hasPropertyTrackAnim() == false\n      return false\n    if @anim != false\n      res = {}\n      for propTrack in @anim.objectTrack.propertyTracks\n        res[propTrack.propertyName] = []\n        for anim in propTrack.keys\n          k =\n            time: anim.time\n            value: anim.value\n            easing: Timeline.easingFunctionToString(anim.easing)\n          res[propTrack.propertyName].push(k)\n\n    res\n\n  toJSON: () =>\n    res =\n      nid: @get('nid')\n      name: @get('name')\n      type: @typename()\n      anim: @getAnimationData()\n      x: @get('x')\n      y: @get('y')\n      width: @get('width')\n      height: @get('height')\n      fields: @fields.toJSON()\n    res\n\n  applyFieldsToVal: (afields, target, exceptions = [], index) =>\n    for f of afields\n      nf = afields[f]\n      field_name = nf.get(\"name\")\n      # Only apply value from fields that are not in the exclude list\n      if exceptions.indexOf(field_name) == -1\n        # Apply the field's value to the object property\n        target[field_name] = @fields.getField(field_name).getValue(index)\n\n  addOutConnection: (c, field) =>\n    if @out_connections.indexOf(c) == -1 then @out_connections.push(c)\n    c\n\n  removeConnection: (c) =>\n    c_index = @out_connections.indexOf(c)\n    if c_index != -1\n      @out_connections.splice(c_index, 1)\n    c\n\n  disablePropertyAnim: (field) =>\n    # We only want to animate inputs so we deactivate timeline's animation for outputs fields\n    if @anim && field.get(\"is_output\") == false\n      @anim.disableProperty(field.get(\"name\"))\n\n  enablePropertyAnim: (field) =>\n    # Make sure we don't enable animation on output fields\n    if field.get(\"is_output\") == true || !@anim\n      return false\n\n    # If the field can be animated enabale property animation\n    if field.isAnimationProperty() then @anim.enableProperty(field.get(\"name\"))\n\n  createAnimContainer: () =>\n    res = anim(\"nid-\" + @get(\"nid\"), @fields.inputs)\n    # enable track animation only for number/boolean\n    for f of @fields.inputs\n      field = @fields.inputs[f]\n      if field.isAnimationProperty() == false then @disablePropertyAnim(field)\n    return res\n\nmodule.exports = Node\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/Node.coffee\n **/","Node = require 'threenodes/nodes/models/Node'\n\nclass NodeMaterialBase extends Node\n  initialize: (options) =>\n    super\n    @ob = false\n    @auto_evaluate = false\n    @material_class = false\n    @last_slice_count = -1\n    @is_material = true\n\n  getFields: =>\n    base_fields = super\n    fields =\n      inputs:\n        \"opacity\": 1\n        \"transparent\": false\n        \"side\":\n          type: \"Float\"\n          val: THREE.FrontSide\n          values:\n            \"Front\": THREE.FrontSide\n            \"Back\": THREE.BackSide\n            \"Both\": THREE.DoubleSide\n        \"depthTest\": true\n        \"alphaTest\": 0\n        \"polygonOffset\": false\n        \"polygonOffsetFactor\": 0\n        \"polygonOffsetUnits\": 0\n        \"blending\":\n          type: \"Float\"\n          val: THREE.NormalBlending\n          values:\n            \"Normal\": THREE.NormalBlending\n            \"Additive\": THREE.AdditiveBlending\n            \"Subtractive\": THREE.SubtractiveBlending\n            \"Multiply\": THREE.MultiplyBlending\n            \"AdditiveAlpha\": THREE.AdditiveAlphaBlending\n    return $.extend(true, base_fields, fields)\n\n  rebuildShader: () =>\n    if !@ob\n      return @\n    if $.type(@ob) == \"array\"\n      for sub_material in @ob\n        console.log \"rebuilding submaterial\"\n        sub_material.needsUpdate = true\n    else\n      @ob.needsUpdate = true\n    @\n\n  remove: () =>\n    delete @ob\n    delete @material_cache\n    delete @material_class\n    super\n\n  compute: =>\n    needs_rebuild = false\n    numItems = @fields.getMaxInputSliceCount()\n    if @inputValueHasChanged(@vars_rebuild_shader_on_change) || @last_slice_count != numItems\n      needs_rebuild = true\n\n    if needs_rebuild == true\n      @ob = []\n      for i in [0..numItems]\n        @ob[i] = new @material_class()\n    for i in [0..numItems]\n      @applyFieldsToVal(@fields.inputs, @ob[i], [], i)\n    @material_cache = @createCacheObject(@vars_rebuild_shader_on_change)\n\n    @last_slice_count = numItems\n    @fields.setField(\"out\", @ob)\n\nmodule.exports = NodeMaterialBase\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/Three/NodeMaterialBase.coffee\n **/","Node = require 'threenodes/nodes/models/Node'\n\nclass Object3D extends Node\n  @node_name = 'Object3D'\n  @group_name = 'Three'\n\n  initialize: (options) =>\n    super\n    @auto_evaluate = false\n    @ob = new THREE.Object3D()\n    @vars_shadow_options = [\"castShadow\", \"receiveShadow\"]\n    @shadow_cache = @createCacheObject(@vars_shadow_options)\n    @vars_shadow_options = [\"castShadow\", \"receiveShadow\"]\n\n  getFields: =>\n    # We don't want to have the basic input / output\n    # so don't call super neither extend fields with base_fields\n    fields =\n      inputs:\n        \"children\": {type: \"Object3D\", val: [], default: [], propagateDirty: false}\n        \"position\": {type: \"Vector3\", val: new THREE.Vector3(), propagateDirty: false}\n        \"rotation\": {type: \"Any\", val: new THREE.Euler(), propagateDirty: false}\n        \"scale\": {type: \"Vector3\", val: new THREE.Vector3(1, 1, 1), propagateDirty: false}\n        \"visible\": true\n        \"castShadow\": false\n        \"receiveShadow\": false\n      outputs:\n        \"out\": {type: \"Any\", val: @ob}\n    return fields\n\n  deleteObjectAttributes: (ob) =>\n    if ob\n      delete ob.up\n      delete ob.position\n      delete ob.rotation\n      delete ob.scale\n      delete ob.matrix\n      delete ob.matrixWorld\n      delete ob.matrixRotationWorld\n      delete ob.quaternion\n      delete ob._vector\n\n  remove: () =>\n    super\n    @deleteObjectAttributes(@ob)\n    delete @ob\n    delete @shadow_cache\n\n  get_children_array: =>\n    childs = @fields.getField(\"children\").get(\"value\")\n    if childs && $.type(childs) != \"array\"\n      return [childs]\n    return childs\n\n  apply_children: =>\n    children = @fields.getField(\"children\")\n    if !children then return false\n    if !children.changed then return\n    #console.log \"changed\"\n\n    # no connections means no children\n    if @fields.getField(\"children\").connections.length == 0 && @ob.children.length != 0\n      @ob.remove(@ob.children[0]) while @ob.children.length > 0\n      return true\n\n    childs_in = @get_children_array()\n    # remove old childs\n    i = @ob.children.length\n\n    # webglrender node trigger apply_children on each frame..\n    # when removing objects, every items are removed first\n    # if setting from 300 > 20 items, remove 300 then add 20, should remove 280\n\n    #for child in @ob.children\n    while i--\n      child = @ob.children[i]\n\n      #ind = childs_in.indexOf(child)\n      item = _.find(childs_in, (item) ->\n        item.uuid == child.uuid\n      )\n      if !item\n        console.log \"object remove child\"\n        @ob.remove(child)\n\n    #add new childs\n    for child in childs_in\n      #ind = @ob.children.indexOf(child)\n      item = _.find(@ob.children, (item) -> item.uuid == child.uuid)\n      if !item\n        if child instanceof THREE.Light == true\n          #if ind == -1\n          @ob.add(child)\n          @trigger(\"RebuildAllShaders\")\n        else\n          #if ind == -1\n          console.log \"scene add child\"\n          @ob.add(child)\n\n  applyRotation: (target, rotation) =>\n    if rotation instanceof THREE.Euler\n      target.setRotationFromEuler(rotation)\n    else if rotation instanceof THREE.Quaternion\n      target.quaternion = rotation\n    else if rotation instanceof THREE.Vector3\n      target.rotation.set(rotation.x, rotation.y, rotation.z, \"XYZ\")\n\n  compute: =>\n    @applyFieldsToVal(@fields.inputs, @ob, ['children', 'rotation'])\n    rotation = @fields.getField('rotation').getValue()\n    @applyRotation(@ob, rotation)\n    @apply_children()\n    @fields.setField(\"out\", @ob)\n\nThreeNodes.Core.addNodeType('Object3D', Object3D)\n\nmodule.exports = Object3D\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/nodes/models/components/Three/Object3D.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\n\n#THREE = require 'Three'\nrequire 'EffectComposer'\nrequire 'MaskPass'\nrequire 'RenderPass'\nrequire 'ShaderPass'\nrequire 'CopyShader'\nrequire 'Blob'\nrequire 'FileSaver'\nrequire 'libs/canvas-toBlob.min'\n\nclass WebglBase\n  @instance: false\n\n  constructor: () ->\n    console.log \"webgl init...\"\n    WebglBase.instance = this\n    @current_scene = new THREE.Scene()\n    @current_camera = new THREE.PerspectiveCamera(75, 800 / 600, 1, 10000)\n    @current_renderer = false\n    if window.WebGLRenderingContext\n      @current_renderer = new THREE.WebGLRenderer\n        clearColor: 0x000000\n        preserveDrawingBuffer: true\n    @current_renderer.autoClear = false\n    @effectScreen = new THREE.ShaderPass( THREE.CopyShader )\n    @effectScreen.renderToScreen = true\n    @renderModel = new THREE.RenderPass( @current_scene, @current_camera )\n    @composer = new THREE.EffectComposer( @current_renderer )\n\n    WebglBase.current_renderer = @current_renderer\n    WebglBase.current_scene = @current_scene\n    WebglBase.current_camera = @current_camera\n    WebglBase.composer = @composer\n    WebglBase.renderModel = @renderModel\n    WebglBase.effectScreen = @effectScreen\n\n  exportImage: (fname) =>\n    canvas = @current_renderer.domElement\n    on_write = (blob) ->\n      saveAs(blob, fname)\n    canvas.toBlob(on_write, \"image/png\")\n\nmodule.exports = WebglBase\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/utils/WebglBase.coffee\n **/","class Indexer\n  constructor: () ->\n    # Define a \"unique id\" property\n    @uid = 0\n\n  getUID: (increment = true) ->\n    if increment\n      return @uid += 1\n    else\n      return @uid\n\n  reset: () ->\n    @uid = 0\n\nmodule.exports = Indexer\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/utils/Indexer.coffee\n **/","/*\n * namespace.coffee v1.0.0\n * Copyright (c) 2011 CodeCatalyst, LLC.\n * Open source under the MIT License.\n */\n(function() {\n  var namespace;\n  namespace = function(name, values) {\n    var key, subpackage, target, value, _i, _len, _ref, _results;\n    target = typeof exports !== \"undefined\" && exports !== null ? exports : window;\n    //target = window;\n    if (name.length > 0) {\n      _ref = name.split('.');\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        subpackage = _ref[_i];\n        target = target[subpackage] || (target[subpackage] = {});\n      }\n    }\n    _results = [];\n    for (key in values) {\n      value = values[key];\n      _results.push(target[key] = value);\n    }\n    return _results;\n  };\n  namespace(\"\", {\n    namespace: namespace\n  });\n}).call(this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/namespace.js\n ** module id = 50\n ** module chunks = 0 2 3\n **/","// Constructive Solid Geometry (CSG) is a modeling technique that uses Boolean\n// operations like union and intersection to combine 3D solids. This library\n// implements CSG operations on meshes elegantly and concisely using BSP trees,\n// and is meant to serve as an easily understandable implementation of the\n// algorithm. All edge cases involving overlapping coplanar polygons in both\n// solids are correctly handled.\n// \n// Example usage:\n// \n//     var cube = CSG.cube();\n//     var sphere = CSG.sphere({ radius: 1.3 });\n//     var polygons = cube.subtract(sphere).toPolygons();\n// \n// ## Implementation Details\n// \n// All CSG operations are implemented in terms of two functions, `clipTo()` and\n// `invert()`, which remove parts of a BSP tree inside another BSP tree and swap\n// solid and empty space, respectively. To find the union of `a` and `b`, we\n// want to remove everything in `a` inside `b` and everything in `b` inside `a`,\n// then combine polygons from `a` and `b` into one solid:\n// \n//     a.clipTo(b);\n//     b.clipTo(a);\n//     a.build(b.allPolygons());\n// \n// The only tricky part is handling overlapping coplanar polygons in both trees.\n// The code above keeps both copies, but we need to keep them in one tree and\n// remove them in the other tree. To remove them from `b` we can clip the\n// inverse of `b` against `a`. The code for union now looks like this:\n// \n//     a.clipTo(b);\n//     b.clipTo(a);\n//     b.invert();\n//     b.clipTo(a);\n//     b.invert();\n//     a.build(b.allPolygons());\n// \n// Subtraction and intersection naturally follow from set operations. If\n// union is `A | B`, subtraction is `A - B = ~(~A | B)` and intersection is\n// `A & B = ~(~A | ~B)` where `~` is the complement operator.\n// \n// ## License\n// \n// Copyright (c) 2011 Evan Wallace (http://madebyevan.com/), under the MIT license.\n\n// # class CSG\n\n// Holds a binary space partition tree representing a 3D solid. Two solids can\n// be combined using the `union()`, `subtract()`, and `intersect()` methods.\n\nCSG = function() {\n  this.polygons = [];\n};\n\n// Construct a CSG solid from a list of `CSG.Polygon` instances.\nCSG.fromPolygons = function(polygons) {\n  var csg = new CSG();\n  csg.polygons = polygons;\n  return csg;\n};\n\nCSG.prototype = {\n  clone: function() {\n    var csg = new CSG();\n    csg.polygons = this.polygons.map(function(p) { return p.clone(); });\n    return csg;\n  },\n\n  toPolygons: function() {\n    return this.polygons;\n  },\n\n  // Return a new CSG solid representing space in either this solid or in the\n  // solid `csg`. Neither this solid nor the solid `csg` are modified.\n  // \n  //     A.union(B)\n  // \n  //     +-------+            +-------+\n  //     |       |            |       |\n  //     |   A   |            |       |\n  //     |    +--+----+   =   |       +----+\n  //     +----+--+    |       +----+       |\n  //          |   B   |            |       |\n  //          |       |            |       |\n  //          +-------+            +-------+\n  // \n  union: function(csg) {\n    var a = new CSG.Node(this.clone().polygons);\n    var b = new CSG.Node(csg.clone().polygons);\n    a.clipTo(b);\n    b.clipTo(a);\n    b.invert();\n    b.clipTo(a);\n    b.invert();\n    a.build(b.allPolygons());\n    return CSG.fromPolygons(a.allPolygons());\n  },\n\n  // Return a new CSG solid representing space in this solid but not in the\n  // solid `csg`. Neither this solid nor the solid `csg` are modified.\n  // \n  //     A.subtract(B)\n  // \n  //     +-------+            +-------+\n  //     |       |            |       |\n  //     |   A   |            |       |\n  //     |    +--+----+   =   |    +--+\n  //     +----+--+    |       +----+\n  //          |   B   |\n  //          |       |\n  //          +-------+\n  // \n  subtract: function(csg) {\n    var a = new CSG.Node(this.clone().polygons);\n    var b = new CSG.Node(csg.clone().polygons);\n    a.invert();\n    a.clipTo(b);\n    b.clipTo(a);\n    b.invert();\n    b.clipTo(a);\n    b.invert();\n    a.build(b.allPolygons());\n    a.invert();\n    return CSG.fromPolygons(a.allPolygons());\n  },\n\n  // Return a new CSG solid representing space both this solid and in the\n  // solid `csg`. Neither this solid nor the solid `csg` are modified.\n  // \n  //     A.intersect(B)\n  // \n  //     +-------+\n  //     |       |\n  //     |   A   |\n  //     |    +--+----+   =   +--+\n  //     +----+--+    |       +--+\n  //          |   B   |\n  //          |       |\n  //          +-------+\n  // \n  intersect: function(csg) {\n    var a = new CSG.Node(this.clone().polygons);\n    var b = new CSG.Node(csg.clone().polygons);\n    a.invert();\n    b.clipTo(a);\n    b.invert();\n    a.clipTo(b);\n    b.clipTo(a);\n    a.build(b.allPolygons());\n    a.invert();\n    return CSG.fromPolygons(a.allPolygons());\n  },\n\n  // Return a new CSG solid with solid and empty space switched. This solid is\n  // not modified.\n  inverse: function() {\n    var csg = this.clone();\n    csg.polygons.map(function(p) { p.flip(); });\n    return csg;\n  }\n};\n\n// Construct an axis-aligned solid cuboid. Optional parameters are `center` and\n// `radius`, which default to `[0, 0, 0]` and `[1, 1, 1]`. The radius can be\n// specified using a single number or a list of three numbers, one for each axis.\n// \n// Example code:\n// \n//     var cube = CSG.cube({\n//       center: [0, 0, 0],\n//       radius: 1\n//     });\nCSG.cube = function(options) {\n  options = options || {};\n  var c = new CSG.Vector(options.center || [0, 0, 0]);\n  var r = !options.radius ? [1, 1, 1] : options.radius.length ?\n           options.radius : [options.radius, options.radius, options.radius];\n  return CSG.fromPolygons([\n    [[0, 4, 6, 2], [-1, 0, 0]],\n    [[1, 3, 7, 5], [+1, 0, 0]],\n    [[0, 1, 5, 4], [0, -1, 0]],\n    [[2, 6, 7, 3], [0, +1, 0]],\n    [[0, 2, 3, 1], [0, 0, -1]],\n    [[4, 5, 7, 6], [0, 0, +1]]\n  ].map(function(info) {\n    return new CSG.Polygon(info[0].map(function(i) {\n      var pos = new CSG.Vector(\n        c.x + r[0] * (2 * !!(i & 1) - 1),\n        c.y + r[1] * (2 * !!(i & 2) - 1),\n        c.z + r[2] * (2 * !!(i & 4) - 1)\n      );\n      return new CSG.Vertex(pos, new CSG.Vector(info[1]));\n    }));\n  }));\n};\n\n// Construct a solid sphere. Optional parameters are `center`, `radius`,\n// `slices`, and `stacks`, which default to `[0, 0, 0]`, `1`, `16`, and `8`.\n// The `slices` and `stacks` parameters control the tessellation along the\n// longitude and latitude directions.\n// \n// Example usage:\n// \n//     var sphere = CSG.sphere({\n//       center: [0, 0, 0],\n//       radius: 1,\n//       slices: 16,\n//       stacks: 8\n//     });\nCSG.sphere = function(options) {\n  options = options || {};\n  var c = new CSG.Vector(options.center || [0, 0, 0]);\n  var r = options.radius || 1;\n  var slices = options.slices || 16;\n  var stacks = options.stacks || 8;\n  var polygons = [], vertices;\n  function vertex(theta, phi) {\n    theta *= Math.PI * 2;\n    phi *= Math.PI;\n    var dir = new CSG.Vector(\n      Math.cos(theta) * Math.sin(phi),\n      Math.cos(phi),\n      Math.sin(theta) * Math.sin(phi)\n    );\n    vertices.push(new CSG.Vertex(c.plus(dir.times(r)), dir));\n  }\n  for (var i = 0; i < slices; i++) {\n    for (var j = 0; j < stacks; j++) {\n      vertices = [];\n      vertex(i / slices, j / stacks);\n      if (j > 0) vertex((i + 1) / slices, j / stacks);\n      if (j < stacks - 1) vertex((i + 1) / slices, (j + 1) / stacks);\n      vertex(i / slices, (j + 1) / stacks);\n      polygons.push(new CSG.Polygon(vertices));\n    }\n  }\n  return CSG.fromPolygons(polygons);\n};\n\n// Construct a solid cylinder. Optional parameters are `start`, `end`,\n// `radius`, and `slices`, which default to `[0, -1, 0]`, `[0, 1, 0]`, `1`, and\n// `16`. The `slices` parameter controls the tessellation.\n// \n// Example usage:\n// \n//     var cylinder = CSG.cylinder({\n//       start: [0, -1, 0],\n//       end: [0, 1, 0],\n//       radius: 1,\n//       slices: 16\n//     });\nCSG.cylinder = function(options) {\n  options = options || {};\n  var s = new CSG.Vector(options.start || [0, -1, 0]);\n  var e = new CSG.Vector(options.end || [0, 1, 0]);\n  var ray = e.minus(s);\n  var r = options.radius || 1;\n  var slices = options.slices || 16;\n  var axisZ = ray.unit(), isY = (Math.abs(axisZ.y) > 0.5);\n  var axisX = new CSG.Vector(isY, !isY, 0).cross(axisZ).unit();\n  var axisY = axisX.cross(axisZ).unit();\n  var start = new CSG.Vertex(s, axisZ.negated());\n  var end = new CSG.Vertex(e, axisZ.unit());\n  var polygons = [];\n  function point(stack, slice, normalBlend) {\n    var angle = slice * Math.PI * 2;\n    var out = axisX.times(Math.cos(angle)).plus(axisY.times(Math.sin(angle)));\n    var pos = s.plus(ray.times(stack)).plus(out.times(r));\n    var normal = out.times(1 - Math.abs(normalBlend)).plus(axisZ.times(normalBlend));\n    return new CSG.Vertex(pos, normal);\n  }\n  for (var i = 0; i < slices; i++) {\n    var t0 = i / slices, t1 = (i + 1) / slices;\n    polygons.push(new CSG.Polygon([start, point(0, t0, -1), point(0, t1, -1)]));\n    polygons.push(new CSG.Polygon([point(0, t1, 0), point(0, t0, 0), point(1, t0, 0), point(1, t1, 0)]));\n    polygons.push(new CSG.Polygon([end, point(1, t1, 1), point(1, t0, 1)]));\n  }\n  return CSG.fromPolygons(polygons);\n};\n\n// # class Vector\n\n// Represents a 3D vector.\n// \n// Example usage:\n// \n//     new CSG.Vector(1, 2, 3);\n//     new CSG.Vector([1, 2, 3]);\n//     new CSG.Vector({ x: 1, y: 2, z: 3 });\n\nCSG.Vector = function(x, y, z) {\n  if (arguments.length == 3) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  } else if ('x' in x) {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z;\n  } else {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2];\n  }\n};\n\nCSG.Vector.prototype = {\n  clone: function() {\n    return new CSG.Vector(this.x, this.y, this.z);\n  },\n\n  negated: function() {\n    return new CSG.Vector(-this.x, -this.y, -this.z);\n  },\n\n  plus: function(a) {\n    return new CSG.Vector(this.x + a.x, this.y + a.y, this.z + a.z);\n  },\n\n  minus: function(a) {\n    return new CSG.Vector(this.x - a.x, this.y - a.y, this.z - a.z);\n  },\n\n  times: function(a) {\n    return new CSG.Vector(this.x * a, this.y * a, this.z * a);\n  },\n\n  dividedBy: function(a) {\n    return new CSG.Vector(this.x / a, this.y / a, this.z / a);\n  },\n\n  dot: function(a) {\n    return this.x * a.x + this.y * a.y + this.z * a.z;\n  },\n\n  lerp: function(a, t) {\n    return this.plus(a.minus(this).times(t));\n  },\n\n  length: function() {\n    return Math.sqrt(this.dot(this));\n  },\n\n  unit: function() {\n    return this.dividedBy(this.length());\n  },\n\n  cross: function(a) {\n    return new CSG.Vector(\n      this.y * a.z - this.z * a.y,\n      this.z * a.x - this.x * a.z,\n      this.x * a.y - this.y * a.x\n    );\n  }\n};\n\n// # class Vertex\n\n// Represents a vertex of a polygon. Use your own vertex class instead of this\n// one to provide additional features like texture coordinates and vertex\n// colors. Custom vertex classes need to provide a `pos` property and `clone()`,\n// `flip()`, and `interpolate()` methods that behave analogous to the ones\n// defined by `CSG.Vertex`. This class provides `normal` so convenience\n// functions like `CSG.sphere()` can return a smooth vertex normal, but `normal`\n// is not used anywhere else.\n\nCSG.Vertex = function(pos, normal) {\n  this.pos = new CSG.Vector(pos);\n  this.normal = new CSG.Vector(normal);\n};\n\nCSG.Vertex.prototype = {\n  clone: function() {\n    return new CSG.Vertex(this.pos.clone(), this.normal.clone());\n  },\n\n  // Invert all orientation-specific data (e.g. vertex normal). Called when the\n  // orientation of a polygon is flipped.\n  flip: function() {\n    this.normal = this.normal.negated();\n  },\n\n  // Create a new vertex between this vertex and `other` by linearly\n  // interpolating all properties using a parameter of `t`. Subclasses should\n  // override this to interpolate additional properties.\n  interpolate: function(other, t) {\n    return new CSG.Vertex(\n      this.pos.lerp(other.pos, t),\n      this.normal.lerp(other.normal, t)\n    );\n  }\n};\n\n// # class Plane\n\n// Represents a plane in 3D space.\n\nCSG.Plane = function(normal, w) {\n  this.normal = normal;\n  this.w = w;\n};\n\n// `CSG.Plane.EPSILON` is the tolerance used by `splitPolygon()` to decide if a\n// point is on the plane.\nCSG.Plane.EPSILON = 1e-5;\n\nCSG.Plane.fromPoints = function(a, b, c) {\n  var n = b.minus(a).cross(c.minus(a)).unit();\n  return new CSG.Plane(n, n.dot(a));\n};\n\nCSG.Plane.prototype = {\n  clone: function() {\n    return new CSG.Plane(this.normal.clone(), this.w);\n  },\n\n  flip: function() {\n    this.normal = this.normal.negated();\n    this.w = -this.w;\n  },\n\n  // Split `polygon` by this plane if needed, then put the polygon or polygon\n  // fragments in the appropriate lists. Coplanar polygons go into either\n  // `coplanarFront` or `coplanarBack` depending on their orientation with\n  // respect to this plane. Polygons in front or in back of this plane go into\n  // either `front` or `back`.\n  splitPolygon: function(polygon, coplanarFront, coplanarBack, front, back) {\n    var COPLANAR = 0;\n    var FRONT = 1;\n    var BACK = 2;\n    var SPANNING = 3;\n\n    // Classify each point as well as the entire polygon into one of the above\n    // four classes.\n    var polygonType = 0;\n    var types = [];\n    for (var i = 0; i < polygon.vertices.length; i++) {\n      var t = this.normal.dot(polygon.vertices[i].pos) - this.w;\n      var type = (t < -CSG.Plane.EPSILON) ? BACK : (t > CSG.Plane.EPSILON) ? FRONT : COPLANAR;\n      polygonType |= type;\n      types.push(type);\n    }\n\n    // Put the polygon in the correct list, splitting it when necessary.\n    switch (polygonType) {\n      case COPLANAR:\n        (this.normal.dot(polygon.plane.normal) > 0 ? coplanarFront : coplanarBack).push(polygon);\n        break;\n      case FRONT:\n        front.push(polygon);\n        break;\n      case BACK:\n        back.push(polygon);\n        break;\n      case SPANNING:\n        var f = [], b = [];\n        for (var i = 0; i < polygon.vertices.length; i++) {\n          var j = (i + 1) % polygon.vertices.length;\n          var ti = types[i], tj = types[j];\n          var vi = polygon.vertices[i], vj = polygon.vertices[j];\n          if (ti != BACK) f.push(vi);\n          if (ti != FRONT) b.push(ti != BACK ? vi.clone() : vi);\n          if ((ti | tj) == SPANNING) {\n            var t = (this.w - this.normal.dot(vi.pos)) / this.normal.dot(vj.pos.minus(vi.pos));\n            var v = vi.interpolate(vj, t);\n            f.push(v);\n            b.push(v.clone());\n          }\n        }\n        if (f.length >= 3) front.push(new CSG.Polygon(f, polygon.shared));\n        if (b.length >= 3) back.push(new CSG.Polygon(b, polygon.shared));\n        break;\n    }\n  }\n};\n\n// # class Polygon\n\n// Represents a convex polygon. The vertices used to initialize a polygon must\n// be coplanar and form a convex loop. They do not have to be `CSG.Vertex`\n// instances but they must behave similarly (duck typing can be used for\n// customization).\n// \n// Each convex polygon has a `shared` property, which is shared between all\n// polygons that are clones of each other or were split from the same polygon.\n// This can be used to define per-polygon properties (such as surface color).\n\nCSG.Polygon = function(vertices, shared) {\n  this.vertices = vertices;\n  this.shared = shared;\n  this.plane = CSG.Plane.fromPoints(vertices[0].pos, vertices[1].pos, vertices[2].pos);\n};\n\nCSG.Polygon.prototype = {\n  clone: function() {\n    var vertices = this.vertices.map(function(v) { return v.clone(); });\n    return new CSG.Polygon(vertices, this.shared);\n  },\n\n  flip: function() {\n    this.vertices.reverse().map(function(v) { v.flip(); });\n    this.plane.flip();\n  }\n};\n\n// # class Node\n\n// Holds a node in a BSP tree. A BSP tree is built from a collection of polygons\n// by picking a polygon to split along. That polygon (and all other coplanar\n// polygons) are added directly to that node and the other polygons are added to\n// the front and/or back subtrees. This is not a leafy BSP tree since there is\n// no distinction between internal and leaf nodes.\n\nCSG.Node = function(polygons) {\n  this.plane = null;\n  this.front = null;\n  this.back = null;\n  this.polygons = [];\n  if (polygons) this.build(polygons);\n};\n\nCSG.Node.prototype = {\n  clone: function() {\n    var node = new CSG.Node();\n    node.plane = this.plane && this.plane.clone();\n    node.front = this.front && this.front.clone();\n    node.back = this.back && this.back.clone();\n    node.polygons = this.polygons.map(function(p) { return p.clone(); });\n    return node;\n  },\n\n  // Convert solid space to empty space and empty space to solid space.\n  invert: function() {\n    for (var i = 0; i < this.polygons.length; i++) {\n      this.polygons[i].flip();\n    }\n    this.plane.flip();\n    if (this.front) this.front.invert();\n    if (this.back) this.back.invert();\n    var temp = this.front;\n    this.front = this.back;\n    this.back = temp;\n  },\n\n  // Recursively remove all polygons in `polygons` that are inside this BSP\n  // tree.\n  clipPolygons: function(polygons) {\n    if (!this.plane) return polygons.slice();\n    var front = [], back = [];\n    for (var i = 0; i < polygons.length; i++) {\n      this.plane.splitPolygon(polygons[i], front, back, front, back);\n    }\n    if (this.front) front = this.front.clipPolygons(front);\n    if (this.back) back = this.back.clipPolygons(back);\n    else back = [];\n    return front.concat(back);\n  },\n\n  // Remove all polygons in this BSP tree that are inside the other BSP tree\n  // `bsp`.\n  clipTo: function(bsp) {\n    this.polygons = bsp.clipPolygons(this.polygons);\n    if (this.front) this.front.clipTo(bsp);\n    if (this.back) this.back.clipTo(bsp);\n  },\n\n  // Return a list of all polygons in this BSP tree.\n  allPolygons: function() {\n    var polygons = this.polygons.slice();\n    if (this.front) polygons = polygons.concat(this.front.allPolygons());\n    if (this.back) polygons = polygons.concat(this.back.allPolygons());\n    return polygons;\n  },\n\n  // Build a BSP tree out of `polygons`. When called on an existing tree, the\n  // new polygons are filtered down to the bottom of the tree and become new\n  // nodes there. Each set of polygons is partitioned using the first polygon\n  // (no heuristic is used to pick a good split).\n  build: function(polygons) {\n    if (!polygons.length) return;\n    if (!this.plane) this.plane = polygons[0].plane.clone();\n    var front = [], back = [];\n    for (var i = 0; i < polygons.length; i++) {\n      this.plane.splitPolygon(polygons[i], this.polygons, this.polygons, front, back);\n    }\n    if (front.length) {\n      if (!this.front) this.front = new CSG.Node();\n      this.front.build(front);\n    }\n    if (back.length) {\n      if (!this.back) this.back = new CSG.Node();\n      this.back.build(back);\n    }\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/csg.js\n ** module id = 52\n ** module chunks = 0\n **/","'use strict';\nwindow.ThreeBSP = (function() {\n\t\n\tvar ThreeBSP,\n\t\tEPSILON = 1e-5,\n\t\tCOPLANAR = 0,\n\t\tFRONT = 1,\n\t\tBACK = 2,\n\t\tSPANNING = 3;\n\t\n\tThreeBSP = function( geometry ) {\n\t\t// Convert THREE.Geometry to ThreeBSP\n\t\tvar i, _length_i,\n\t\t\tface, vertex, faceVertexUvs,\n\t\t\tpolygon,\n\t\t\tpolygons = [],\n\t\t\ttree;\n\t\n\t\tif ( geometry instanceof THREE.Geometry ) {\n\t\t\tthis.matrix = new THREE.Matrix4;\n\t\t} else if ( geometry instanceof THREE.Mesh ) {\n\t\t\t// #todo: add hierarchy support\n\t\t\tgeometry.updateMatrix();\n\t\t\tthis.matrix = geometry.matrix.clone();\n\t\t\tgeometry = geometry.geometry;\n\t\t} else if ( geometry instanceof ThreeBSP.Node ) {\n\t\t\tthis.tree = geometry;\n\t\t\tthis.matrix = new THREE.Matrix4;\n\t\t\treturn this;\n\t\t} else {\n\t\t\tthrow 'ThreeBSP: Given geometry is unsupported';\n\t\t}\n\t\n\t\tfor ( i = 0, _length_i = geometry.faces.length; i < _length_i; i++ ) {\n\t\t\tface = geometry.faces[i];\n\t\t\tfaceVertexUvs = geometry.faceVertexUvs[0][i];\n\t\t\tpolygon = new ThreeBSP.Polygon;\n\t\t\t\n\t\t\tif ( face instanceof THREE.Face3 ) {\n\t\t\t\tvertex = geometry.vertices[ face.a ];\n\t\t\t\tvertex = new ThreeBSP.Vertex( vertex.x, vertex.y, vertex.z, face.vertexNormals[0], new THREE.Vector2( faceVertexUvs[0].x, faceVertexUvs[0].y ) );\n\t\t\t\tvertex.applyMatrix4(this.matrix);\n\t\t\t\tpolygon.vertices.push( vertex );\n\t\t\t\t\n\t\t\t\tvertex = geometry.vertices[ face.b ];\n\t\t\t\tvertex = new ThreeBSP.Vertex( vertex.x, vertex.y, vertex.z, face.vertexNormals[1], new THREE.Vector2( faceVertexUvs[1].x, faceVertexUvs[1].y ) );\n\t\t\t\tvertex.applyMatrix4(this.matrix);\n\t\t\t\tpolygon.vertices.push( vertex );\n\t\t\t\t\n\t\t\t\tvertex = geometry.vertices[ face.c ];\n\t\t\t\tvertex = new ThreeBSP.Vertex( vertex.x, vertex.y, vertex.z, face.vertexNormals[2], new THREE.Vector2( faceVertexUvs[2].x, faceVertexUvs[2].y ) );\n\t\t\t\tvertex.applyMatrix4(this.matrix);\n\t\t\t\tpolygon.vertices.push( vertex );\n\t\t\t} else if ( typeof THREE.Face4 ) {\n\t\t\t\tvertex = geometry.vertices[ face.a ];\n\t\t\t\tvertex = new ThreeBSP.Vertex( vertex.x, vertex.y, vertex.z, face.vertexNormals[0], new THREE.Vector2( faceVertexUvs[0].x, faceVertexUvs[0].y ) );\n\t\t\t\tvertex.applyMatrix4(this.matrix);\n\t\t\t\tpolygon.vertices.push( vertex );\n\t\t\t\t\n\t\t\t\tvertex = geometry.vertices[ face.b ];\n\t\t\t\tvertex = new ThreeBSP.Vertex( vertex.x, vertex.y, vertex.z, face.vertexNormals[1], new THREE.Vector2( faceVertexUvs[1].x, faceVertexUvs[1].y ) );\n\t\t\t\tvertex.applyMatrix4(this.matrix);\n\t\t\t\tpolygon.vertices.push( vertex );\n\t\t\t\t\n\t\t\t\tvertex = geometry.vertices[ face.c ];\n\t\t\t\tvertex = new ThreeBSP.Vertex( vertex.x, vertex.y, vertex.z, face.vertexNormals[2], new THREE.Vector2( faceVertexUvs[2].x, faceVertexUvs[2].y ) );\n\t\t\t\tvertex.applyMatrix4(this.matrix);\n\t\t\t\tpolygon.vertices.push( vertex );\n\t\t\t\t\n\t\t\t\tvertex = geometry.vertices[ face.d ];\n\t\t\t\tvertex = new ThreeBSP.Vertex( vertex.x, vertex.y, vertex.z, face.vertexNormals[3], new THREE.Vector2( faceVertexUvs[3].x, faceVertexUvs[3].y ) );\n\t\t\t\tvertex.applyMatrix4(this.matrix);\n\t\t\t\tpolygon.vertices.push( vertex );\n\t\t\t} else {\n\t\t\t\tthrow 'Invalid face type at index ' + i;\n\t\t\t}\n\t\t\t\n\t\t\tpolygon.calculateProperties();\n\t\t\tpolygons.push( polygon );\n\t\t};\n\t\n\t\tthis.tree = new ThreeBSP.Node( polygons );\n\t};\n\tThreeBSP.prototype.subtract = function( other_tree ) {\n\t\tvar a = this.tree.clone(),\n\t\t\tb = other_tree.tree.clone();\n\t\t\n\t\ta.invert();\n\t\ta.clipTo( b );\n\t\tb.clipTo( a );\n\t\tb.invert();\n\t\tb.clipTo( a );\n\t\tb.invert();\n\t\ta.build( b.allPolygons() );\n\t\ta.invert();\n\t\ta = new ThreeBSP( a );\n\t\ta.matrix = this.matrix;\n\t\treturn a;\n\t};\n\tThreeBSP.prototype.union = function( other_tree ) {\n\t\tvar a = this.tree.clone(),\n\t\t\tb = other_tree.tree.clone();\n\t\t\n\t\ta.clipTo( b );\n\t\tb.clipTo( a );\n\t\tb.invert();\n\t\tb.clipTo( a );\n\t\tb.invert();\n\t\ta.build( b.allPolygons() );\n\t\ta = new ThreeBSP( a );\n\t\ta.matrix = this.matrix;\n\t\treturn a;\n\t};\n\tThreeBSP.prototype.intersect = function( other_tree ) {\n\t\tvar a = this.tree.clone(),\n\t\t\tb = other_tree.tree.clone();\n\t\t\n\t\ta.invert();\n\t\tb.clipTo( a );\n\t\tb.invert();\n\t\ta.clipTo( b );\n\t\tb.clipTo( a );\n\t\ta.build( b.allPolygons() );\n\t\ta.invert();\n\t\ta = new ThreeBSP( a );\n\t\ta.matrix = this.matrix;\n\t\treturn a;\n\t};\n\tThreeBSP.prototype.toGeometry = function() {\n\t\tvar i, j,\n\t\t\tmatrix = new THREE.Matrix4().getInverse( this.matrix ),\n\t\t\tgeometry = new THREE.Geometry(),\n\t\t\tpolygons = this.tree.allPolygons(),\n\t\t\tpolygon_count = polygons.length,\n\t\t\tpolygon, polygon_vertice_count,\n\t\t\tvertice_dict = {},\n\t\t\tvertex_idx_a, vertex_idx_b, vertex_idx_c,\n\t\t\tvertex, face,\n\t\t\tverticeUvs;\n\t\n\t\tfor ( i = 0; i < polygon_count; i++ ) {\n\t\t\tpolygon = polygons[i];\n\t\t\tpolygon_vertice_count = polygon.vertices.length;\n\t\t\t\n\t\t\tfor ( j = 2; j < polygon_vertice_count; j++ ) {\n\t\t\t\tverticeUvs = [];\n\t\t\t\t\n\t\t\t\tvertex = polygon.vertices[0];\n\t\t\t\tverticeUvs.push( new THREE.Vector2( vertex.uv.x, vertex.uv.y ) );\n\t\t\t\tvertex = new THREE.Vector3( vertex.x, vertex.y, vertex.z );\n\t\t\t\tvertex.applyMatrix4(matrix);\n\t\t\t\t\n\t\t\t\tif ( typeof vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ] !== 'undefined' ) {\n\t\t\t\t\tvertex_idx_a = vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ];\n\t\t\t\t} else {\n\t\t\t\t\tgeometry.vertices.push( vertex );\n\t\t\t\t\tvertex_idx_a = vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ] = geometry.vertices.length - 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvertex = polygon.vertices[j-1];\n\t\t\t\tverticeUvs.push( new THREE.Vector2( vertex.uv.x, vertex.uv.y ) );\n\t\t\t\tvertex = new THREE.Vector3( vertex.x, vertex.y, vertex.z );\n\t\t\t\tvertex.applyMatrix4(matrix);\n\t\t\t\tif ( typeof vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ] !== 'undefined' ) {\n\t\t\t\t\tvertex_idx_b = vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ];\n\t\t\t\t} else {\n\t\t\t\t\tgeometry.vertices.push( vertex );\n\t\t\t\t\tvertex_idx_b = vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ] = geometry.vertices.length - 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvertex = polygon.vertices[j];\n\t\t\t\tverticeUvs.push( new THREE.Vector2( vertex.uv.x, vertex.uv.y ) );\n\t\t\t\tvertex = new THREE.Vector3( vertex.x, vertex.y, vertex.z );\n\t\t\t\tvertex.applyMatrix4(matrix);\n\t\t\t\tif ( typeof vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ] !== 'undefined' ) {\n\t\t\t\t\tvertex_idx_c = vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ];\n\t\t\t\t} else {\n\t\t\t\t\tgeometry.vertices.push( vertex );\n\t\t\t\t\tvertex_idx_c = vertice_dict[ vertex.x + ',' + vertex.y + ',' + vertex.z ] = geometry.vertices.length - 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tface = new THREE.Face3(\n\t\t\t\t\tvertex_idx_a,\n\t\t\t\t\tvertex_idx_b,\n\t\t\t\t\tvertex_idx_c,\n\t\t\t\t\tnew THREE.Vector3( polygon.normal.x, polygon.normal.y, polygon.normal.z )\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\tgeometry.faces.push( face );\n\t\t\t\tgeometry.faceVertexUvs[0].push( verticeUvs );\n\t\t\t}\n\t\t\t\n\t\t}\n\t\treturn geometry;\n\t};\n\tThreeBSP.prototype.toMesh = function( material ) {\n\t\tvar geometry = this.toGeometry(),\n\t\t\tmesh = new THREE.Mesh( geometry, material );\n\t\t\n\t\tmesh.position.getPositionFromMatrix( this.matrix );\n\t\tmesh.rotation.setFromRotationMatrix( this.matrix );\n\t\t\n\t\treturn mesh;\n\t};\n\t\n\t\n\tThreeBSP.Polygon = function( vertices, normal, w ) {\n\t\tif ( !( vertices instanceof Array ) ) {\n\t\t\tvertices = [];\n\t\t}\n\t\t\n\t\tthis.vertices = vertices;\n\t\tif ( vertices.length > 0 ) {\n\t\t\tthis.calculateProperties();\n\t\t} else {\n\t\t\tthis.normal = this.w = undefined;\n\t\t}\n\t};\n\tThreeBSP.Polygon.prototype.calculateProperties = function() {\n\t\tvar a = this.vertices[0],\n\t\t\tb = this.vertices[1],\n\t\t\tc = this.vertices[2];\n\t\t\t\n\t\tthis.normal = b.clone().subtract( a ).cross(\n\t\t\tc.clone().subtract( a )\n\t\t).normalize();\n\t\t\n\t\tthis.w = this.normal.clone().dot( a );\n\t\t\n\t\treturn this;\n\t};\n\tThreeBSP.Polygon.prototype.clone = function() {\n\t\tvar i, vertice_count,\n\t\t\tpolygon = new ThreeBSP.Polygon;\n\t\t\n\t\tfor ( i = 0, vertice_count = this.vertices.length; i < vertice_count; i++ ) {\n\t\t\tpolygon.vertices.push( this.vertices[i].clone() );\n\t\t};\n\t\tpolygon.calculateProperties();\n\t\t\n\t\treturn polygon;\n\t};\n\t\n\tThreeBSP.Polygon.prototype.flip = function() {\n\t\tvar i, vertices = [];\n\t\t\n\t\tthis.normal.multiplyScalar( -1 );\n\t\tthis.w *= -1;\n\t\t\n\t\tfor ( i = this.vertices.length - 1; i >= 0; i-- ) {\n\t\t\tvertices.push( this.vertices[i] );\n\t\t};\n\t\tthis.vertices = vertices;\n\t\t\n\t\treturn this;\n\t};\n\tThreeBSP.Polygon.prototype.classifyVertex = function( vertex ) {  \n\t\tvar side_value = this.normal.dot( vertex ) - this.w;\n\t\t\n\t\tif ( side_value < -EPSILON ) {\n\t\t\treturn BACK;\n\t\t} else if ( side_value > EPSILON ) {\n\t\t\treturn FRONT;\n\t\t} else {\n\t\t\treturn COPLANAR;\n\t\t}\n\t};\n\tThreeBSP.Polygon.prototype.classifySide = function( polygon ) {\n\t\tvar i, vertex, classification,\n\t\t\tnum_positive = 0,\n\t\t\tnum_negative = 0,\n\t\t\tvertice_count = polygon.vertices.length;\n\t\t\n\t\tfor ( i = 0; i < vertice_count; i++ ) {\n\t\t\tvertex = polygon.vertices[i];\n\t\t\tclassification = this.classifyVertex( vertex );\n\t\t\tif ( classification === FRONT ) {\n\t\t\t\tnum_positive++;\n\t\t\t} else if ( classification === BACK ) {\n\t\t\t\tnum_negative++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif ( num_positive > 0 && num_negative === 0 ) {\n\t\t\treturn FRONT;\n\t\t} else if ( num_positive === 0 && num_negative > 0 ) {\n\t\t\treturn BACK;\n\t\t} else if ( num_positive === 0 && num_negative === 0 ) {\n\t\t\treturn COPLANAR;\n\t\t} else {\n\t\t\treturn SPANNING;\n\t\t}\n\t};\n\tThreeBSP.Polygon.prototype.splitPolygon = function( polygon, coplanar_front, coplanar_back, front, back ) {\n\t\tvar classification = this.classifySide( polygon );\n\t\t\n\t\tif ( classification === COPLANAR ) {\n\t\t\t\n\t\t\t( this.normal.dot( polygon.normal ) > 0 ? coplanar_front : coplanar_back ).push( polygon );\n\t\t\t\n\t\t} else if ( classification === FRONT ) {\n\t\t\t\n\t\t\tfront.push( polygon );\n\t\t\t\n\t\t} else if ( classification === BACK ) {\n\t\t\t\n\t\t\tback.push( polygon );\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tvar vertice_count,\n\t\t\t\ti, j, ti, tj, vi, vj,\n\t\t\t\tt, v,\n\t\t\t\tf = [],\n\t\t\t\tb = [];\n\t\t\t\n\t\t\tfor ( i = 0, vertice_count = polygon.vertices.length; i < vertice_count; i++ ) {\n\t\t\t\t\n\t\t\t\tj = (i + 1) % vertice_count;\n\t\t\t\tvi = polygon.vertices[i];\n\t\t\t\tvj = polygon.vertices[j];\n\t\t\t\tti = this.classifyVertex( vi );\n\t\t\t\ttj = this.classifyVertex( vj );\n\t\t\t\t\n\t\t\t\tif ( ti != BACK ) f.push( vi );\n\t\t\t\tif ( ti != FRONT ) b.push( vi );\n\t\t\t\tif ( (ti | tj) === SPANNING ) {\n\t\t\t\t\tt = ( this.w - this.normal.dot( vi ) ) / this.normal.dot( vj.clone().subtract( vi ) );\n\t\t\t\t\tv = vi.interpolate( vj, t );\n\t\t\t\t\tf.push( v );\n\t\t\t\t\tb.push( v );\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif ( f.length >= 3 ) front.push( new ThreeBSP.Polygon( f ).calculateProperties() );\n\t\t\tif ( b.length >= 3 ) back.push( new ThreeBSP.Polygon( b ).calculateProperties() );\n\t\t}\n\t};\n\t\n\tThreeBSP.Vertex = function( x, y, z, normal, uv ) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.normal = normal || new THREE.Vector3;\n\t\tthis.uv = uv || new THREE.Vector2;\n\t};\n\tThreeBSP.Vertex.prototype.clone = function() {\n\t\treturn new ThreeBSP.Vertex( this.x, this.y, this.z, this.normal.clone(), this.uv.clone() );\n\t};\n\tThreeBSP.Vertex.prototype.add = function( vertex ) {\n\t\tthis.x += vertex.x;\n\t\tthis.y += vertex.y;\n\t\tthis.z += vertex.z;\n\t\treturn this;\n\t};\n\tThreeBSP.Vertex.prototype.subtract = function( vertex ) {\n\t\tthis.x -= vertex.x;\n\t\tthis.y -= vertex.y;\n\t\tthis.z -= vertex.z;\n\t\treturn this;\n\t};\n\tThreeBSP.Vertex.prototype.multiplyScalar = function( scalar ) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\treturn this;\n\t};\n\tThreeBSP.Vertex.prototype.cross = function( vertex ) {\n\t\tvar x = this.x,\n\t\t\ty = this.y,\n\t\t\tz = this.z;\n\n\t\tthis.x = y * vertex.z - z * vertex.y;\n\t\tthis.y = z * vertex.x - x * vertex.z;\n\t\tthis.z = x * vertex.y - y * vertex.x;\n\t\t\n\t\treturn this;\n\t};\n\tThreeBSP.Vertex.prototype.normalize = function() {\n\t\tvar length = Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\t\t\n\t\tthis.x /= length;\n\t\tthis.y /= length;\n\t\tthis.z /= length;\n\t\t\n\t\treturn this;\n\t};\n\tThreeBSP.Vertex.prototype.dot = function( vertex ) {\n\t\treturn this.x * vertex.x + this.y * vertex.y + this.z * vertex.z;\n\t};\n\tThreeBSP.Vertex.prototype.lerp = function( a, t ) {\n\t\tthis.add(\n\t\t\ta.clone().subtract( this ).multiplyScalar( t )\n\t\t);\n\t\t\n\t\tthis.normal.add(\n\t\t\ta.normal.clone().sub( this.normal ).multiplyScalar( t )\n\t\t);\n\t\t\n\t\tthis.uv.add(\n\t\t\ta.uv.clone().sub( this.uv ).multiplyScalar( t )\n\t\t);\n\t\t\n\t\treturn this;\n\t};\n\tThreeBSP.Vertex.prototype.interpolate = function( other, t ) {\n\t\treturn this.clone().lerp( other, t );\n\t};\n\tThreeBSP.Vertex.prototype.applyMatrix4 = function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[0] * x + e[4] * y + e[8]  * z + e[12];\n\t\tthis.y = e[1] * x + e[5] * y + e[9]  * z + e[13];\n\t\tthis.z = e[2] * x + e[6] * y + e[10] * z + e[14];\n\n\t\treturn this;\n\n\t}\n\t\n\t\n\tThreeBSP.Node = function( polygons ) {\n\t\tvar i, polygon_count,\n\t\t\tfront = [],\n\t\t\tback = [];\n\n\t\tthis.polygons = [];\n\t\tthis.front = this.back = undefined;\n\t\t\n\t\tif ( !(polygons instanceof Array) || polygons.length === 0 ) return;\n\n\t\tthis.divider = polygons[0].clone();\n\t\t\n\t\tfor ( i = 0, polygon_count = polygons.length; i < polygon_count; i++ ) {\n\t\t\tthis.divider.splitPolygon( polygons[i], this.polygons, this.polygons, front, back );\n\t\t}   \n\t\t\n\t\tif ( front.length > 0 ) {\n\t\t\tthis.front = new ThreeBSP.Node( front );\n\t\t}\n\t\t\n\t\tif ( back.length > 0 ) {\n\t\t\tthis.back = new ThreeBSP.Node( back );\n\t\t}\n\t};\n\tThreeBSP.Node.isConvex = function( polygons ) {\n\t\tvar i, j;\n\t\tfor ( i = 0; i < polygons.length; i++ ) {\n\t\t\tfor ( j = 0; j < polygons.length; j++ ) {\n\t\t\t\tif ( i !== j && polygons[i].classifySide( polygons[j] ) !== BACK ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t};\n\tThreeBSP.Node.prototype.build = function( polygons ) {\n\t\tvar i, polygon_count,\n\t\t\tfront = [],\n\t\t\tback = [];\n\t\t\n\t\tif ( !this.divider ) {\n\t\t\tthis.divider = polygons[0].clone();\n\t\t}\n\n\t\tfor ( i = 0, polygon_count = polygons.length; i < polygon_count; i++ ) {\n\t\t\tthis.divider.splitPolygon( polygons[i], this.polygons, this.polygons, front, back );\n\t\t}   \n\t\t\n\t\tif ( front.length > 0 ) {\n\t\t\tif ( !this.front ) this.front = new ThreeBSP.Node();\n\t\t\tthis.front.build( front );\n\t\t}\n\t\t\n\t\tif ( back.length > 0 ) {\n\t\t\tif ( !this.back ) this.back = new ThreeBSP.Node();\n\t\t\tthis.back.build( back );\n\t\t}\n\t};\n\tThreeBSP.Node.prototype.allPolygons = function() {\n\t\tvar polygons = this.polygons.slice();\n\t\tif ( this.front ) polygons = polygons.concat( this.front.allPolygons() );\n\t\tif ( this.back ) polygons = polygons.concat( this.back.allPolygons() );\n\t\treturn polygons;\n\t};\n\tThreeBSP.Node.prototype.clone = function() {\n\t\tvar node = new ThreeBSP.Node();\n\t\t\n\t\tnode.divider = this.divider.clone();\n\t\tnode.polygons = this.polygons.map( function( polygon ) { return polygon.clone(); } );\n\t\tnode.front = this.front && this.front.clone();\n\t\tnode.back = this.back && this.back.clone();\n\t\t\n\t\treturn node;\n\t};\n\tThreeBSP.Node.prototype.invert = function() {\n\t\tvar i, polygon_count, temp;\n\t\t\n\t\tfor ( i = 0, polygon_count = this.polygons.length; i < polygon_count; i++ ) {\n\t\t\tthis.polygons[i].flip();\n\t\t}\n\t\t\n\t\tthis.divider.flip();\n\t\tif ( this.front ) this.front.invert();\n\t\tif ( this.back ) this.back.invert();\n\t\t\n\t\ttemp = this.front;\n\t\tthis.front = this.back;\n\t\tthis.back = temp;\n\t\t\n\t\treturn this;\n\t};\n\tThreeBSP.Node.prototype.clipPolygons = function( polygons ) {\n\t\tvar i, polygon_count,\n\t\t\tfront, back;\n\n\t\tif ( !this.divider ) return polygons.slice();\n\t\t\n\t\tfront = [], back = [];\n\t\t\n\t\tfor ( i = 0, polygon_count = polygons.length; i < polygon_count; i++ ) {\n\t\t\tthis.divider.splitPolygon( polygons[i], front, back, front, back );\n\t\t}\n\n\t\tif ( this.front ) front = this.front.clipPolygons( front );\n\t\tif ( this.back ) back = this.back.clipPolygons( back );\n\t\telse back = [];\n\n\t\treturn front.concat( back );\n\t};\n\t\n\tThreeBSP.Node.prototype.clipTo = function( node ) {\n\t\tthis.polygons = node.clipPolygons( this.polygons );\n\t\tif ( this.front ) this.front.clipTo( node );\n\t\tif ( this.back ) this.back.clipTo( node );\n\t};\n\t\n\t\n\treturn ThreeBSP;\n})();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/ThreeCSG.js\n ** module id = 53\n ** module chunks = 0\n **/","// tween.js r5 - http://github.com/sole/tween.js\nvar TWEEN=TWEEN||function(){var a,e,c=60,b=false,h=[],i;return{setFPS:function(f){c=f||60},start:function(f){arguments.length!=0&&this.setFPS(f);e=setInterval(this.update,1E3/c)},stop:function(){clearInterval(e)},setAutostart:function(f){(b=f)&&!e&&this.start()},add:function(f){h.push(f);b&&!e&&this.start()},getAll:function(){return h},removeAll:function(){h=[]},remove:function(f){a=h.indexOf(f);a!==-1&&h.splice(a,1)},update:function(f){a=0;i=h.length;for(f=f||Date.now();a<i;)if(h[a].update(f))a++;\nelse{h.splice(a,1);i--}i==0&&b==true&&this.stop()}}}();\nTWEEN.Tween=function(a){var e={},c={},b={},h=1E3,i=0,f=null,n=TWEEN.Easing.Linear.EaseNone,k=null,l=null,m=null;this.to=function(d,g){if(g!==null)h=g;for(var j in d)if(a[j]!==null)b[j]=d[j];return this};this.start=function(d){TWEEN.add(this);f=d?d+i:Date.now()+i;for(var g in b)if(a[g]!==null){e[g]=a[g];c[g]=b[g]-a[g]}return this};this.stop=function(){TWEEN.remove(this);return this};this.delay=function(d){i=d;return this};this.easing=function(d){n=d;return this};this.chain=function(d){k=d};this.onUpdate=\nfunction(d){l=d;return this};this.onComplete=function(d){m=d;return this};this.update=function(d){var g,j;if(d<f)return true;d=(d-f)/h;d=d>1?1:d;j=n(d);for(g in c)a[g]=e[g]+c[g]*j;l!==null&&l.call(a,j);if(d==1){m!==null&&m.call(a);k!==null&&k.start();return false}return true}};TWEEN.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};TWEEN.Easing.Linear.EaseNone=function(a){return a};\nTWEEN.Easing.Quadratic.EaseIn=function(a){return a*a};TWEEN.Easing.Quadratic.EaseOut=function(a){return-a*(a-2)};TWEEN.Easing.Quadratic.EaseInOut=function(a){if((a*=2)<1)return 0.5*a*a;return-0.5*(--a*(a-2)-1)};TWEEN.Easing.Cubic.EaseIn=function(a){return a*a*a};TWEEN.Easing.Cubic.EaseOut=function(a){return--a*a*a+1};TWEEN.Easing.Cubic.EaseInOut=function(a){if((a*=2)<1)return 0.5*a*a*a;return 0.5*((a-=2)*a*a+2)};TWEEN.Easing.Quartic.EaseIn=function(a){return a*a*a*a};\nTWEEN.Easing.Quartic.EaseOut=function(a){return-(--a*a*a*a-1)};TWEEN.Easing.Quartic.EaseInOut=function(a){if((a*=2)<1)return 0.5*a*a*a*a;return-0.5*((a-=2)*a*a*a-2)};TWEEN.Easing.Quintic.EaseIn=function(a){return a*a*a*a*a};TWEEN.Easing.Quintic.EaseOut=function(a){return(a-=1)*a*a*a*a+1};TWEEN.Easing.Quintic.EaseInOut=function(a){if((a*=2)<1)return 0.5*a*a*a*a*a;return 0.5*((a-=2)*a*a*a*a+2)};TWEEN.Easing.Sinusoidal.EaseIn=function(a){return-Math.cos(a*Math.PI/2)+1};\nTWEEN.Easing.Sinusoidal.EaseOut=function(a){return Math.sin(a*Math.PI/2)};TWEEN.Easing.Sinusoidal.EaseInOut=function(a){return-0.5*(Math.cos(Math.PI*a)-1)};TWEEN.Easing.Exponential.EaseIn=function(a){return a==0?0:Math.pow(2,10*(a-1))};TWEEN.Easing.Exponential.EaseOut=function(a){return a==1?1:-Math.pow(2,-10*a)+1};TWEEN.Easing.Exponential.EaseInOut=function(a){if(a==0)return 0;if(a==1)return 1;if((a*=2)<1)return 0.5*Math.pow(2,10*(a-1));return 0.5*(-Math.pow(2,-10*(a-1))+2)};\nTWEEN.Easing.Circular.EaseIn=function(a){return-(Math.sqrt(1-a*a)-1)};TWEEN.Easing.Circular.EaseOut=function(a){return Math.sqrt(1- --a*a)};TWEEN.Easing.Circular.EaseInOut=function(a){if((a/=0.5)<1)return-0.5*(Math.sqrt(1-a*a)-1);return 0.5*(Math.sqrt(1-(a-=2)*a)+1)};TWEEN.Easing.Elastic.EaseIn=function(a){var e,c=0.1,b=0.4;if(a==0)return 0;if(a==1)return 1;b||(b=0.3);if(!c||c<1){c=1;e=b/4}else e=b/(2*Math.PI)*Math.asin(1/c);return-(c*Math.pow(2,10*(a-=1))*Math.sin((a-e)*2*Math.PI/b))};\nTWEEN.Easing.Elastic.EaseOut=function(a){var e,c=0.1,b=0.4;if(a==0)return 0;if(a==1)return 1;b||(b=0.3);if(!c||c<1){c=1;e=b/4}else e=b/(2*Math.PI)*Math.asin(1/c);return c*Math.pow(2,-10*a)*Math.sin((a-e)*2*Math.PI/b)+1};\nTWEEN.Easing.Elastic.EaseInOut=function(a){var e,c=0.1,b=0.4;if(a==0)return 0;if(a==1)return 1;b||(b=0.3);if(!c||c<1){c=1;e=b/4}else e=b/(2*Math.PI)*Math.asin(1/c);if((a*=2)<1)return-0.5*c*Math.pow(2,10*(a-=1))*Math.sin((a-e)*2*Math.PI/b);return c*Math.pow(2,-10*(a-=1))*Math.sin((a-e)*2*Math.PI/b)*0.5+1};TWEEN.Easing.Back.EaseIn=function(a){return a*a*(2.70158*a-1.70158)};TWEEN.Easing.Back.EaseOut=function(a){return(a-=1)*a*(2.70158*a+1.70158)+1};\nTWEEN.Easing.Back.EaseInOut=function(a){if((a*=2)<1)return 0.5*a*a*(3.5949095*a-2.5949095);return 0.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)};TWEEN.Easing.Bounce.EaseIn=function(a){return 1-TWEEN.Easing.Bounce.EaseOut(1-a)};TWEEN.Easing.Bounce.EaseOut=function(a){return(a/=1)<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375};\nTWEEN.Easing.Bounce.EaseInOut=function(a){if(a<0.5)return TWEEN.Easing.Bounce.EaseIn(a*2)*0.5;return TWEEN.Easing.Bounce.EaseOut(a*2-1)*0.5+0.5};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/Tween.js\n ** module id = 54\n ** module chunks = 0\n **/","/*\n * @author zz85 (http://github.com/zz85 http://www.lab4games.net/zz85/blog)\n *\n * a simple to use javascript 3d particles system inspired by FliNT and Stardust\n * created with TWEEN.js and THREE.js\n *\n * for feature requests or bugs, please visit https://github.com/zz85/sparks.js\n *\n * licensed under the MIT license \n */\n\nvar SPARKS = {};\n\n/********************************\n* Emitter Class\n*\n*   Creates and Manages Particles\n*********************************/\n\n\nSPARKS.Engine = {\n\t// Combined Singleton Engine;\n\t_TIMESTEP: 15,\n\t_timer: null,\n\t_lastTime: null,\n\t_timerStep: 10,\n\t_velocityVerlet: false,\n\t_emitters: [],\n\t_isRunning: false,\n\t\n\tadd: function(emitter) {\n\t\tthis._emitters.push(emitter);\n\t},\n\t// run its built in timer / stepping\n\tstart: function() {\n\t\tthis._lastTime = Date.now();\n\t\tthis._timer = setTimeout(this.step, this._timerStep, this);\n\t\t\n\t\tfor (var i=0,il=this._emitters.length;i<il;i++) {\n\t\t\tthis._emitters[i]._isRunning = true;\n\t\t}\n\t\t\n\t\tthis._isRunning = true;\n\t},\n\t\n\tstop: function() {\n\t\tthis._isRunning = false;\n\t\tfor (var i=0,il=this._emitters.length;i<il;i++) {\n\t\t\tthis._emitters[i]._isRunning = false;\n\t\t}\n\t\tclearTimeout(this._timer);\n\t},\n\t\n\tisRunning: function() {\n\t\treturn this._isRunning;\n\t},\n\t\n\t// Step gets called upon by the engine\n\t// but attempts to call update() on a regular basics\n\tstep: function(me) {\n\t\t\n\t\tvar time = Date.now();\n\t\tvar elapsed = time - me._lastTime;\n\t   \t\n\t\tif (!this._velocityVerlet) {\n\t\t\t// if elapsed is way higher than time step, (usually after switching tabs, or excution cached in ff)\n\t\t\t// we will drop cycles. perhaps set to a limit of 10 or something?\n\t\t\tvar maxBlock = me._TIMESTEP * 20;\n\t\t\t\n\t\t\tif (elapsed >= maxBlock) {\n\t\t\t\t//console.log('warning: sparks.js is fast fowarding engine, skipping steps', elapsed / emitter._TIMESTEP);\n\t\t\t\t//emitter.update( (elapsed - maxBlock) / 1000);\n\t\t\t\telapsed = maxBlock;\n\t\t\t}\n\t\t\n\t\t\twhile(elapsed >= me._TIMESTEP) {\n\t\t\t\tme.update(me._TIMESTEP / 1000);\n\t\t\t\telapsed -= me._TIMESTEP;\n\t\t\t}\n\t\t\tme._lastTime = time - elapsed;\n\t\t\t\n\t\t} else {\n\t\t\tme.update(elapsed/1000);\n\t\t\tme._lastTime = time;\n\t\t}\n\t\t\n\t\t\n\t\tsetTimeout(me.step, me._timerStep, me);\n\t\t\n\t},\n\t\n\tupdate: function(time) {\n\t\tfor (var i=0,il=this._emitters.length;i<il;i++) {\n\t\t\tthis._emitters[i].update(time);\n\t\t}\n\t}\n\t\n};\n\nSPARKS.Emitter = function (counter) {\n    \n    this._counter = counter ? counter : new SPARKS.SteadyCounter(10); // provides number of particles to produce\n    \n    this._particles = [];\n    \n    \n    this._initializers = []; // use for creation of particles\n    this._actions = [];     // uses action to update particles\n    this._activities = [];  //  not supported yet\n        \n    this._handlers = [];\n    \n    this.callbacks = {};\n};\n\n\nSPARKS.Emitter.prototype = {\n\t\n\t_TIMESTEP: 15,\n\t_timer: null,\n\t_lastTime: null,\n\t_timerStep: 10,\n\t_velocityVerlet: false,\n\t_isRunning: false,\n\t\n\t// run its built in timer / stepping\n\tstart: function() {\n\t\tthis._lastTime = Date.now();\n\t\tthis._timer = setTimeout(this.step, this._timerStep, this);\n\t\tthis._isRunning = true;\n\t},\n\t\n\tstop: function() {\n\t\tthis._isRunning = false;\n\t\tclearTimeout(this._timer);\n\t},\n\t\n\tisRunning: function() {\n\t\treturn this._isRunning;\n\t},\n\t\n\t// Step gets called upon by the engine\n\t// but attempts to call update() on a regular basics\n\t// This method is also described in http://gameclosure.com/2011/04/11/deterministic-delta-tee-in-js-games/\n\tstep: function(emitter) {\n\t\t\n\t\tvar time = Date.now();\n\t\tvar elapsed = time - emitter._lastTime;\n\t   \t\n\t\tif (!this._velocityVerlet) {\n\t\t\t// if elapsed is way higher than time step, (usually after switching tabs, or excution cached in ff)\n\t\t\t// we will drop cycles. perhaps set to a limit of 10 or something?\n\t\t\tvar maxBlock = emitter._TIMESTEP * 20;\n\t\t\t\n\t\t\tif (elapsed >= maxBlock) {\n\t\t\t\t//console.log('warning: sparks.js is fast fowarding engine, skipping steps', elapsed / emitter._TIMESTEP);\n\t\t\t\t//emitter.update( (elapsed - maxBlock) / 1000);\n\t\t\t\telapsed = maxBlock;\n\t\t\t}\n\t\t\n\t\t\twhile(elapsed >= emitter._TIMESTEP) {\n\t\t\t\temitter.update(emitter._TIMESTEP / 1000);\n\t\t\t\telapsed -= emitter._TIMESTEP;\n\t\t\t}\n\t\t\temitter._lastTime = time - elapsed;\n\t\t\t\n\t\t} else {\n\t\t\temitter.update(elapsed/1000);\n\t\t\temitter._lastTime = time;\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tif (emitter._isRunning)\n\t\tsetTimeout(emitter.step, emitter._timerStep, emitter);\n\t\t\n\t},\n\n\n\t// Update particle engine in seconds, not milliseconds\n    update: function(time) {\n\t\t\n        var len = this._counter.updateEmitter( this, time );\n        \n        // Create particles\n        for( i = 0; i < len; i++ ) {\n            this.createParticle();\n        }\n        \n        // Update activities\n        len = this._activities.length;\n        for ( i = 0; i < len; i++ )\n        {\n            this._activities[i].update( this, time );\n        }\n        \n        \n        len = this._actions.length;\n        var action;\n        var len2 = this._particles.length;\n        \n        for( j = 0; j < len; j++ )\n        {\n            action = this._actions[j];\n            for ( i = 0; i < len2; ++i )\n            {\n                particle = this._particles[i];\n                action.update( this, particle, time );\n            }\n        }\n        \n        \n        // remove dead particles\n        for ( i = len2; i--; )\n        {\n            particle = this._particles[i];\n            if ( particle.isDead )\n            {\n                //particle = \n\t\t\t\tthis._particles.splice( i, 1 );\n                this.dispatchEvent(\"dead\", particle);\n\t\t\t\tSPARKS.VectorPool.release(particle.position); //\n\t\t\t\tSPARKS.VectorPool.release(particle.velocity);\n                \n            } else {\n                this.dispatchEvent(\"updated\", particle);\n            }\n        }\n        \n\t\tthis.dispatchEvent(\"loopUpdated\");\n\t\t\n    },\n    \n    createParticle: function() {\n        var particle = new SPARKS.Particle();\n        // In future, use a Particle Factory\n        var len = this._initializers.length, i;\n\n        for ( i = 0; i < len; i++ ) {\n            this._initializers[i].initialize( this, particle );\n        }\n        \n        this._particles.push( particle );\n        \n        this.dispatchEvent(\"created\", particle); // ParticleCreated\n        \n        return particle;\n    },\n    \n    addInitializer: function (initializer) {\n        this._initializers.push(initializer);\n    },\n    \n    addAction: function (action) {\n        this._actions.push(action);\n    },\n\n    removeInitializer: function (initializer) {\n\t\tvar index = this._initializers.indexOf(initializer);\n\t\tif (index > -1) {\n\t\t\tthis._initializers.splice( index, 1 );\n\t\t}\n    },\n\n    removeAction: function (action) {\n\t\tvar index = this._actions.indexOf(action);\n\t\tif (index > -1) {\n\t\t\tthis._actions.splice( index, 1 );\n\t\t}\n\t\t//console.log('removeAction', index, this._actions);\n    },\n    \n    addCallback: function(name, callback) {\n        this.callbacks[name] = callback;\n    },\n    \n    removeCallback: function(name) {\n        delete this.callbacks[name];\n    },\n    \n    dispatchEvent: function(name, args) {\n        var callback = this.callbacks[name];\n        if (callback) {\n            callback(args);\n        }\n    \n    }\n    \n\n};\n\n\n/*\n * Constant Names for\n * Events called by emitter.dispatchEvent()\n * \n */\nSPARKS.EVENT_PARTICLE_CREATED = \"created\"\nSPARKS.EVENT_PARTICLE_UPDATED = \"updated\"\nSPARKS.EVENT_PARTICLE_DEAD = \"dead\";\nSPARKS.EVENT_LOOP_UPDATED = \"loopUpdated\";\n\n\n\n/*\n * Steady Counter attempts to produces a particle rate steadily\n *\n */\n\n// Number of particles per seconds\nSPARKS.SteadyCounter = function(rate) {\n    this.rate = rate;\n    \n\t// we use a shortfall counter to make up for slow emitters \n\tthis.leftover = 0;\n\t\n};\n\nSPARKS.SteadyCounter.prototype.updateEmitter = function(emitter, time) {\n\n\tvar targetRelease = time * this.rate + this.leftover;\n\tvar actualRelease = Math.floor(targetRelease);\n\t\n\tthis.leftover = targetRelease - actualRelease;\n\t\n\treturn actualRelease;\n};\n\n\n/*\n * Shot Counter produces specified particles \n * on a single impluse or burst\n */\n\nSPARKS.ShotCounter = function(particles) {\n\tthis.particles = particles;\n\tthis.used = false;\n};\n\nSPARKS.ShotCounter.prototype.updateEmitter = function(emitter, time) {\n\n\tif (this.used) {\n\t\treturn 0;\n\t} else {\n\t\tthis.used = true;\n\t}\n\t\n\treturn this.particles;\n};\n\n\n/********************************\n* Particle Class\n*\n*   Represents a single particle\n*********************************/\nSPARKS.Particle = function() {\n\n    /**\n     * The lifetime of the particle, in seconds.\n     */\n    this.lifetime = 0;\n    \n    /**\n     * The age of the particle, in seconds.\n     */\n    this.age = 0;\n    \n    /**\n     * The energy of the particle.\n     */\n    this.energy = 1;\n    \n    /**\n     * Whether the particle is dead and should be removed from the stage.\n     */\n    this.isDead = false;\n    \n    this.target = null; // tag\n    \n    /**\n     * For 3D\n     */\n     \n     this.position = SPARKS.VectorPool.get().set(0,0,0); //new THREE.Vector3( 0, 0, 0 );\n     this.velocity = SPARKS.VectorPool.get().set(0,0,0); //new THREE.Vector3( 0, 0, 0 );\n\tthis._oldvelocity = SPARKS.VectorPool.get().set(0,0,0);\n     // rotation vec3\n     // angVelocity vec3\n     // faceAxis vec3\n    \n};\n\n\n/********************************\n* Action Classes\n*\n*   An abstract class which have\n*   update function\n*********************************/\nSPARKS.Action = function() {\n    this._priority = 0;\n};\n\n\nSPARKS.Age = function(easing) {\n    this._easing = (easing == null) ? TWEEN.Easing.Linear.EaseNone : easing;\n};\n\nSPARKS.Age.prototype.update = function (emitter, particle, time) {\n    particle.age += time;\n    if( particle.age >= particle.lifetime )\n    {\n        particle.energy = 0;\n        particle.isDead = true;\n    }\n    else\n    {\n        var t = this._easing(particle.age / particle.lifetime);\n        particle.energy = -1 * t + 1;\n    }\n};\n\n/*\n// Mark particle as dead when particle's < 0\n\nSPARKS.Death = function(easing) {\n    this._easing = (easing == null) ? TWEEN.Linear.EaseNone : easing;\n};\n\nSPARKS.Death.prototype.update = function (emitter, particle, time) {\n    if (particle.life <= 0) {\n        particle.isDead = true;\n    }\n};\n*/\n\t\t\t\n\nSPARKS.Move = function() {\n    \n};\n\nSPARKS.Move.prototype.update = function(emitter, particle, time) {\n    // attempt verlet velocity updating.\n    var p = particle.position;\n\tvar v = particle.velocity;\n    var old = particle._oldvelocity;\n\t\n\tif (this._velocityVerlet) {\t\n\t\tp.x += (v.x + old.x) * 0.5 * time;\n\t\tp.y += (v.y + old.y) * 0.5 * time;\n\t\tp.z += (v.z + old.z) * 0.5 * time;\n\t} else {\n\t\tp.x += v.x * time;\n\t\tp.y += v.y * time;\n\t\tp.z += v.z * time;\n\t}\n\n    //  OldVel = Vel;\n    // Vel = Vel + Accel * dt;\n    // Pos = Pos + (vel + Vel + Accel * dt) * 0.5 * dt;\n\t\n\n\n};\n\n/* Marks particles found in specified zone dead */\nSPARKS.DeathZone = function(zone) {\n    this.zone = zone;\n};\n\nSPARKS.DeathZone.prototype.update = function(emitter, particle, time) {\n    \n    if (this.zone.contains(particle.position)) {\n\t\tparticle.isDead = true;\n\t}\n\n};\n\n/*\n * SPARKS.ActionZone applies an action when particle is found in zone\n */\nSPARKS.ActionZone = function(action, zone) {\n\tthis.action = action;\n    this.zone = zone;\n};\n\nSPARKS.ActionZone.prototype.update = function(emitter, particle, time) {\n\n    if (this.zone.contains(particle.position)) {\n\t\tthis.action.update( emitter, particle, time );\n\t}\n\n};\n\n/*\n * Accelerate action affects velocity in specified 3d direction \n */\nSPARKS.Accelerate = function(x,y,z) {\n\t\n\tif (x instanceof THREE.Vector3) {\n\t\tthis.acceleration = x;\n\t\treturn;\n\t}\n\n    this.acceleration = new THREE.Vector3(x,y,z);\n    \n};\n\nSPARKS.Accelerate.prototype.update = function(emitter, particle, time) {\n    var acc = this.acceleration;\n    \n    var v = particle.velocity;\n    \n\tparticle._oldvelocity.set(v.x, v.y, v.z);\n\t\n    v.x += acc.x * time;\n    v.y += acc.y * time;\n    v.z += acc.z * time; \n\n};\n\n/*\n * Accelerate Factor accelerate based on a factor of particle's velocity.\n */\nSPARKS.AccelerateFactor = function(factor) {\n    this.factor = factor;\n};\n\nSPARKS.AccelerateFactor.prototype.update = function(emitter, particle, time) {\n    var factor = this.factor;\n    \n    var v = particle.velocity;\n\tvar len = v.length();\n\tvar adjFactor;\n    if (len>0) {\n\n\t\tadjFactor = factor * time / len;\n\t\tadjFactor += 1;\n\t\t\n\t\tv.multiplyScalar(adjFactor);\n\n\t}\n\n};\n\n/*\nAccelerateNormal\n * AccelerateVelocity affects velocity based on its velocity direction\n */\nSPARKS.AccelerateVelocity = function(factor) {\n\n\tthis.factor = factor;\n\n};\n\nSPARKS.AccelerateVelocity.prototype.update = function(emitter, particle, time) {\n    var factor = this.factor;\n\n    var v = particle.velocity;\n\n\n    v.z += - v.x * factor;\n    v.y += v.z * factor;\n    v.x +=  v.y * factor;\n\n};\n\n\n/* Set the max ammount of x,y,z drift movements in a second */\nSPARKS.RandomDrift = function(x,y,z) {\n\tif (x instanceof THREE.Vector3) {\n\t\tthis.drift = x;\n\t\treturn;\n\t}\n\n    this.drift = new THREE.Vector3(x,y,z);\n}\n\n\nSPARKS.RandomDrift.prototype.update = function(emitter, particle, time) {\n    var drift = this.drift;\n    \n    var v = particle.velocity;\n    \n    v.x += ( Math.random() - 0.5 ) * drift.x * time;\n    v.y += ( Math.random() - 0.5 ) * drift.y * time;\n    v.z += ( Math.random() - 0.5 ) * drift.z * time;\n\n};\n\n/********************************\n* Zone Classes\n*\n*   An abstract classes which have\n*   getLocation() function\n*********************************/\nSPARKS.Zone = function() {\n};\n\n// TODO, contains() for Zone\n\nSPARKS.PointZone = function(pos) {\n    this.pos = pos;\n};\n\nSPARKS.PointZone.prototype.getLocation = function() {\n    return this.pos;\n};\n\nSPARKS.PointZone = function(pos) {\n    this.pos = pos;\n};\n\nSPARKS.PointZone.prototype.getLocation = function() {\n    return this.pos;\n};\n\nSPARKS.LineZone = function(start, end) {\n    this.start = start;\n\tthis.end = end;\n\tthis._length = end.clone().sub( start );\n};\n\nSPARKS.LineZone.prototype.getLocation = function() {\n    var len = this._length.clone();\n\n\tlen.multiplyScalar( Math.random() );\n\treturn len.add( this.start );\n\t\n};\n\n// Basically a RectangleZone\nSPARKS.ParallelogramZone = function(corner, side1, side2) {\n    this.corner = corner;\n\tthis.side1 = side1;\n\tthis.side2 = side2;\n};\n\nSPARKS.ParallelogramZone.prototype.getLocation = function() {\n    \n\tvar d1 = this.side1.clone().multiplyScalar( Math.random() );\n\tvar d2 = this.side2.clone().multiplyScalar( Math.random() );\n\td1.add(d2);\n\treturn d1.add( this.corner );\n\t\n};\n\nSPARKS.CubeZone = function(position, x, y, z) {\n    this.position = position;\n\tthis.x = x;\n\tthis.y = y;\n\tthis.z = z;\n};\n\nSPARKS.CubeZone.prototype.getLocation = function() {\n    //TODO use pool?\n\n\tvar location = this.position.clone();\n\tlocation.x += Math.random() * this.x;\n\tlocation.y += Math.random() * this.y;\n\tlocation.z += Math.random() * this.z;\n\t\n\treturn location;\n\t\n};\n\n\nSPARKS.CubeZone.prototype.contains = function(position) {\n\n\tvar startX = this.position.x;\n\tvar startY = this.position.y;\n\tvar startZ = this.position.z;\n\tvar x = this.x; // width\n\tvar y = this.y; // depth\n\tvar z = this.z; // height\n\t\n\tif (x<0) {\n\t\tstartX += x;\n\t\tx = Math.abs(x);\n\t}\n\t\n\tif (y<0) {\n\t\tstartY += y;\n\t\ty = Math.abs(y);\n\t}\n\t\n\tif (z<0) {\n\t\tstartZ += z;\n\t\tz = Math.abs(z);\n\t}\n\t\n\tvar diffX = position.x - startX;\n\tvar diffY = position.y - startY;\n\tvar diffZ = position.z - startZ;\n\t\n\tif ( (diffX > 0) && (diffX < x) && \n\t\t\t(diffY > 0) && (diffY < y) && \n\t\t\t(diffZ > 0) && (diffZ < z) ) {\n\t\treturn true;\n\t}\n\t\n\treturn false;\n\t\n};\n\n\n\n/**\n * The constructor creates a DiscZone 3D zone.\n * \n * @param centre The point at the center of the disc.\n * @param normal A vector normal to the disc.\n * @param outerRadius The outer radius of the disc.\n * @param innerRadius The inner radius of the disc. This defines the hole \n * in the center of the disc. If set to zero, there is no hole. \n */\n\n/*\n// BUGGY!!\nSPARKS.DiscZone = function(center, radiusNormal, outerRadius, innerRadius) {\n    this.center = center;\n\tthis.radiusNormal = radiusNormal;\n\tthis.outerRadius = (outerRadius==undefined) ? 0 : outerRadius;\n\tthis.innerRadius = (innerRadius==undefined) ? 0 : innerRadius;\n\t\n};\n\nSPARKS.DiscZone.prototype.getLocation = function() {\n    var rand = Math.random();\n\tvar _innerRadius = this.innerRadius;\n\tvar _outerRadius = this.outerRadius;\n\tvar center = this.center;\n\tvar _normal = this.radiusNormal;\n\t\n\t_distToOrigin = _normal.dot( center );\n\t\n\tvar radius = _innerRadius + (1 - rand * rand ) * ( _outerRadius - _innerRadius );\n\tvar angle = Math.random() * SPARKS.Utils.TWOPI;\n\t\n\tvar _distToOrigin = _normal.dot( center );\n\tvar axes = SPARKS.Utils.getPerpendiculars( _normal.clone() );\n\tvar _planeAxis1 = axes[0];\n\tvar _planeAxis2 = axes[1];\n\t\n\tvar p = _planeAxis1.clone();\n\tp.multiplyScalar( radius * Math.cos( angle ) );\n\tvar p2 = _planeAxis2.clone();\n\tp2.multiplyScalar( radius * Math.sin( angle ) );\n\tp.add( p2 );\n\treturn _center.add( p );\n\t\n};\n*/\n\nSPARKS.SphereCapZone = function(x, y, z, minr, maxr, angle) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.minr = minr;\n    this.maxr = maxr;\n    this.angle = angle;\n};\n\nSPARKS.SphereCapZone.prototype.getLocation = function() {\n    var theta = Math.PI *2  * SPARKS.Utils.random();\n    var r = SPARKS.Utils.random();\n    \n    //new THREE.Vector3\n    var v =  SPARKS.VectorPool.get().set(r * Math.cos(theta), -1 / Math.tan(this.angle * SPARKS.Utils.DEGREE_TO_RADIAN), r * Math.sin(theta));\n    \n    //v.length = StardustMath.interpolate(0, _minRadius, 1, _maxRadius, Math.random());\n            \n    var i = this.minr - ((this.minr-this.maxr) *  Math.random() );\n    v.multiplyScalar(i);\n\n\tv.__markedForReleased = true;\n    \n    return v;\n};\n\n\n/********************************\n* Initializer Classes\n*\n*   Classes which initializes\n*   particles. Implements initialize( emitter:Emitter, particle:Particle )\n*********************************/\n\n// Specifies random life between max and min\nSPARKS.Lifetime = function(min, max) {\n    this._min = min;\n    \n    this._max = max ? max : min;\n    \n};\n\nSPARKS.Lifetime.prototype.initialize = function( emitter/*Emitter*/, particle/*Particle*/ ) {\n    particle.lifetime = this._min + SPARKS.Utils.random() * ( this._max - this._min );\n};\n\n\nSPARKS.Position = function(zone) {\n    this.zone = zone;\n};\n\nSPARKS.Position.prototype.initialize = function( emitter/*Emitter*/, particle/*Particle*/ ) {\n    var pos = this.zone.getLocation();\n    particle.position.set(pos.x, pos.y, pos.z);\n};\n\nSPARKS.Velocity = function(zone) {\n    this.zone = zone;\n};\n\nSPARKS.Velocity.prototype.initialize = function( emitter/*Emitter*/, particle/*Particle*/ ) {\n    var pos = this.zone.getLocation();\n    particle.velocity.set(pos.x, pos.y, pos.z);\n\tif (pos.__markedForReleased) {\n\t\t//console.log(\"release\");\n\t\tSPARKS.VectorPool.release(pos);\n\t\tpos.__markedForReleased = false;\n\t}\n};\n\nSPARKS.Target = function(target, callback) {\n    this.target = target;\n    this.callback = callback;\n};\n\nSPARKS.Target.prototype.initialize = function( emitter, particle ) {\n\n    if (this.callback) {\n        particle.target = this.callback();\n    } else {\n        particle.target = this.target;\n    }\n\n};\n\n/********************************\n* VectorPool \n*\n*  Reuse much of Vectors if possible\n*********************************/\n\nSPARKS.VectorPool = {\n\t__pools: [],\n\n\t// Get a new Vector\n\tget: function() {\n\t\tif (this.__pools.length>0) {\n\t\t\treturn this.__pools.pop();\n\t\t}\n\t\t\n\t\treturn this._addToPool();\n\t\t\n\t},\n\t\n\t// Release a vector back into the pool\n\trelease: function(v) {\n\t\tthis.__pools.push(v);\n\t},\n\t\n\t// Create a bunch of vectors and add to the pool\n\t_addToPool: function() {\n\t\t//console.log(\"creating some pools\");\n\t\t\n\t\tfor (var i=0, size = 100; i < size; i++) {\n\t\t\tthis.__pools.push(new THREE.Vector3());\n\t\t}\n\t\t\n\t\treturn new THREE.Vector3();\n\t\t\n\t}\n\t\n\t\n\t\n};\n\n\n/********************************\n* Util Classes\n*\n*   Classes which initializes\n*   particles. Implements initialize( emitter:Emitter, particle:Particle )\n*********************************/\nSPARKS.Utils = {\n    random: function() {\n        return Math.random();\n    },\n    DEGREE_TO_RADIAN: Math.PI / 180,\n\tTWOPI: Math.PI * 2,\n\n\tgetPerpendiculars: function(normal) {\n\t\tvar p1 = this.getPerpendicular( normal );\n\t\tvar p2 = normal.cross( p1 );\n\t\tp2.normalize();\n\t\treturn [ p1, p2 ];\n\t},\n\t\n\tgetPerpendicular: function( v )\n\t{\n\t\tif( v.x == 0 )\n\t\t{\n\t\t\treturn new THREE.Vector3D( 1, 0, 0 );\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar temp = new THREE.Vector3( v.y, -v.x, 0 );\n\t\t\treturn temp.normalize();\n\t\t}\n\t}\n\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/Sparks.js\n ** module id = 55\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Vignette shader\n * based on PaintEffect postprocess from ro.me\n * http://code.google.com/p/3-dreams-of-black/source/browse/deploy/js/effects/PaintEffect.js\n */\n\nTHREE.VignetteShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { type: \"t\", value: null },\n\t\t\"offset\":   { type: \"f\", value: 1.0 },\n\t\t\"darkness\": { type: \"f\", value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\"),\n\n\tfragmentShader: [\n\n\t\t\"uniform float offset;\",\n\t\t\"uniform float darkness;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t// Eskil's vignette\n\n\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\t\"vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );\",\n\t\t\t\"gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );\",\n\n\t\t\t/*\n\t\t\t// alternative version from glfx.js\n\t\t\t// this one makes more \"dusty\" look (as opposed to \"burned\")\n\n\t\t\t\"vec4 color = texture2D( tDiffuse, vUv );\",\n\t\t\t\"float dist = distance( vUv, vec2( 0.5 ) );\",\n\t\t\t\"color.rgb *= smoothstep( 0.8, offset * 0.799, dist *( darkness + offset ) );\",\n\t\t\t\"gl_FragColor = color;\",\n\t\t\t*/\n\n\t\t\"}\"\n\n\t].join(\"\\n\")\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/shaders/VignetteShader.js\n ** module id = 61\n ** module chunks = 0\n **/","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Two pass Gaussian blur filter (horizontal and vertical blur shaders)\n * - described in http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/\n *   and used in http://www.cake23.de/traveling-wavefronts-lit-up.html\n *\n * - 9 samples per pass\n * - standard deviation 2.7\n * - \"h\" and \"v\" parameters should be set to \"1 / width\" and \"1 / height\"\n */\n\nTHREE.HorizontalBlurShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { type: \"t\", value: null },\n\t\t\"h\":        { type: \"f\", value: 1.0 / 512.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\"),\n\n\tfragmentShader: [\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform float h;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 sum = vec4( 0.0 );\",\n\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\",\n\n\t\t\t\"gl_FragColor = sum;\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\")\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/shaders/HorizontalBlurShader.js\n ** module id = 62\n ** module chunks = 0\n **/","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Two pass Gaussian blur filter (horizontal and vertical blur shaders)\n * - described in http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/\n *   and used in http://www.cake23.de/traveling-wavefronts-lit-up.html\n *\n * - 9 samples per pass\n * - standard deviation 2.7\n * - \"h\" and \"v\" parameters should be set to \"1 / width\" and \"1 / height\"\n */\n\nTHREE.VerticalBlurShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { type: \"t\", value: null },\n\t\t\"v\":        { type: \"f\", value: 1.0 / 512.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\"),\n\n\tfragmentShader: [\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform float v;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 sum = vec4( 0.0 );\",\n\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\",\n\t\t\t\"sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\",\n\n\t\t\t\"gl_FragColor = sum;\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\")\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/shaders/VerticalBlurShader.js\n ** module id = 63\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Bleach bypass shader [http://en.wikipedia.org/wiki/Bleach_bypass]\n * - based on Nvidia example\n * http://developer.download.nvidia.com/shaderlibrary/webpages/shader_library.html#post_bleach_bypass\n */\n\nTHREE.BleachBypassShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { type: \"t\", value: null },\n\t\t\"opacity\":  { type: \"f\", value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\"),\n\n\tfragmentShader: [\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 base = texture2D( tDiffuse, vUv );\",\n\n\t\t\t\"vec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );\",\n\t\t\t\"float lum = dot( lumCoeff, base.rgb );\",\n\t\t\t\"vec3 blend = vec3( lum );\",\n\n\t\t\t\"float L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );\",\n\n\t\t\t\"vec3 result1 = 2.0 * base.rgb * blend;\",\n\t\t\t\"vec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );\",\n\n\t\t\t\"vec3 newColor = mix( result1, result2, L );\",\n\n\t\t\t\"float A2 = opacity * base.a;\",\n\t\t\t\"vec3 mixRGB = A2 * newColor.rgb;\",\n\t\t\t\"mixRGB += ( ( 1.0 - A2 ) * base.rgb );\",\n\n\t\t\t\"gl_FragColor = vec4( mixRGB, base.a );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\")\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/shaders/BleachBypassShader.js\n ** module id = 64\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Convolution shader\n * ported from o3d sample to WebGL / GLSL\n * http://o3d.googlecode.com/svn/trunk/samples/convolution.html\n */\n\nTHREE.ConvolutionShader = {\n\n\tdefines: {\n\n\t\t\"KERNEL_SIZE_FLOAT\": \"25.0\",\n\t\t\"KERNEL_SIZE_INT\": \"25\",\n\n\t},\n\n\tuniforms: {\n\n\t\t\"tDiffuse\":        { type: \"t\", value: null },\n\t\t\"uImageIncrement\": { type: \"v2\", value: new THREE.Vector2( 0.001953125, 0.0 ) },\n\t\t\"cKernel\":         { type: \"fv1\", value: [] }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"uniform vec2 uImageIncrement;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\"),\n\n\tfragmentShader: [\n\n\t\t\"uniform float cKernel[ KERNEL_SIZE_INT ];\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform vec2 uImageIncrement;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec2 imageCoord = vUv;\",\n\t\t\t\"vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );\",\n\n\t\t\t\"for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {\",\n\n\t\t\t\t\"sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];\",\n\t\t\t\t\"imageCoord += uImageIncrement;\",\n\n\t\t\t\"}\",\n\n\t\t\t\"gl_FragColor = sum;\",\n\n\t\t\"}\"\n\n\n\t].join(\"\\n\"),\n\n\tbuildKernel: function ( sigma ) {\n\n\t\t// We lop off the sqrt(2 * pi) * sigma term, since we're going to normalize anyway.\n\n\t\tfunction gauss( x, sigma ) {\n\n\t\t\treturn Math.exp( - ( x * x ) / ( 2.0 * sigma * sigma ) );\n\n\t\t}\n\n\t\tvar i, values, sum, halfWidth, kMaxKernelSize = 25, kernelSize = 2 * Math.ceil( sigma * 3.0 ) + 1;\n\n\t\tif ( kernelSize > kMaxKernelSize ) kernelSize = kMaxKernelSize;\n\t\thalfWidth = ( kernelSize - 1 ) * 0.5;\n\n\t\tvalues = new Array( kernelSize );\n\t\tsum = 0.0;\n\t\tfor ( i = 0; i < kernelSize; ++i ) {\n\n\t\t\tvalues[ i ] = gauss( i - halfWidth, sigma );\n\t\t\tsum += values[ i ];\n\n\t\t}\n\n\t\t// normalize the kernel\n\n\t\tfor ( i = 0; i < kernelSize; ++i ) values[ i ] /= sum;\n\n\t\treturn values;\n\n\t}\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/shaders/ConvolutionShader.js\n ** module id = 65\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Film grain & scanlines shader\n *\n * - ported from HLSL to WebGL / GLSL\n * http://www.truevision3d.com/forums/showcase/staticnoise_colorblackwhite_scanline_shaders-t18698.0.html\n *\n * Screen Space Static Postprocessor\n *\n * Produces an analogue noise overlay similar to a film grain / TV static\n *\n * Original implementation and noise algorithm\n * Pat 'Hawthorne' Shearon\n *\n * Optimized scanlines + noise version with intensity scaling\n * Georg 'Leviathan' Steinrohder\n *\n * This version is provided under a Creative Commons Attribution 3.0 License\n * http://creativecommons.org/licenses/by/3.0/\n */\n\nTHREE.FilmShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\":   { type: \"t\", value: null },\n\t\t\"time\":       { type: \"f\", value: 0.0 },\n\t\t\"nIntensity\": { type: \"f\", value: 0.5 },\n\t\t\"sIntensity\": { type: \"f\", value: 0.05 },\n\t\t\"sCount\":     { type: \"f\", value: 4096 },\n\t\t\"grayscale\":  { type: \"i\", value: 1 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\"),\n\n\tfragmentShader: [\n\n\t\t// control parameter\n\t\t\"uniform float time;\",\n\n\t\t\"uniform bool grayscale;\",\n\n\t\t// noise effect intensity value (0 = no effect, 1 = full effect)\n\t\t\"uniform float nIntensity;\",\n\n\t\t// scanlines effect intensity value (0 = no effect, 1 = full effect)\n\t\t\"uniform float sIntensity;\",\n\n\t\t// scanlines effect count value (0 = no effect, 4096 = full effect)\n\t\t\"uniform float sCount;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t// sample the source\n\t\t\t\"vec4 cTextureScreen = texture2D( tDiffuse, vUv );\",\n\n\t\t\t// make some noise\n\t\t\t\"float x = vUv.x * vUv.y * time *  1000.0;\",\n\t\t\t\"x = mod( x, 13.0 ) * mod( x, 123.0 );\",\n\t\t\t\"float dx = mod( x, 0.01 );\",\n\n\t\t\t// add noise\n\t\t\t\"vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );\",\n\n\t\t\t// get us a sine and cosine\n\t\t\t\"vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );\",\n\n\t\t\t// add scanlines\n\t\t\t\"cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;\",\n\n\t\t\t// interpolate between source and result by intensity\n\t\t\t\"cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\",\n\n\t\t\t// convert to grayscale if desired\n\t\t\t\"if( grayscale ) {\",\n\n\t\t\t\t\"cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );\",\n\n\t\t\t\"}\",\n\n\t\t\t\"gl_FragColor =  vec4( cResult, cTextureScreen.a );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\")\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/shaders/FilmShader.js\n ** module id = 66\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DotScreenPass = function ( center, angle, scale ) {\n\n\tif ( THREE.DotScreenShader === undefined )\n\t\tconsole.error( \"THREE.DotScreenPass relies on THREE.DotScreenShader\" );\n\n\tvar shader = THREE.DotScreenShader;\n\n\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\tif ( center !== undefined ) this.uniforms[ \"center\" ].value.copy( center );\n\tif ( angle !== undefined ) this.uniforms[ \"angle\"].value = angle;\n\tif ( scale !== undefined ) this.uniforms[ \"scale\"].value = scale;\n\n\tthis.material = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\n\t} );\n\n\tthis.enabled = true;\n\tthis.renderToScreen = false;\n\tthis.needsSwap = true;\n\n};\n\nTHREE.DotScreenPass.prototype = {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta ) {\n\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer;\n\t\tthis.uniforms[ \"tSize\" ].value.set( readBuffer.width, readBuffer.height );\n\n\t\tTHREE.EffectComposer.quad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera );\n\n\t\t} else {\n\n\t\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera, writeBuffer, false );\n\n\t\t}\n\n\t}\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/postprocessing/DotScreenPass.js\n ** module id = 67\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.BloomPass = function ( strength, kernelSize, sigma, resolution ) {\n\n\tstrength = ( strength !== undefined ) ? strength : 1;\n\tkernelSize = ( kernelSize !== undefined ) ? kernelSize : 25;\n\tsigma = ( sigma !== undefined ) ? sigma : 4.0;\n\tresolution = ( resolution !== undefined ) ? resolution : 256;\n\n\t// render targets\n\n\tvar pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat };\n\n\tthis.renderTargetX = new THREE.WebGLRenderTarget( resolution, resolution, pars );\n\tthis.renderTargetY = new THREE.WebGLRenderTarget( resolution, resolution, pars );\n\n\t// copy material\n\n\tif ( THREE.CopyShader === undefined )\n\t\tconsole.error( \"THREE.BloomPass relies on THREE.CopyShader\" );\n\n\tvar copyShader = THREE.CopyShader;\n\n\tthis.copyUniforms = THREE.UniformsUtils.clone( copyShader.uniforms );\n\n\tthis.copyUniforms[ \"opacity\" ].value = strength;\n\n\tthis.materialCopy = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.copyUniforms,\n\t\tvertexShader: copyShader.vertexShader,\n\t\tfragmentShader: copyShader.fragmentShader,\n\t\tblending: THREE.AdditiveBlending,\n\t\ttransparent: true\n\n\t} );\n\n\t// convolution material\n\n\tif ( THREE.ConvolutionShader === undefined )\n\t\tconsole.error( \"THREE.BloomPass relies on THREE.ConvolutionShader\" );\n\n\tvar convolutionShader = THREE.ConvolutionShader;\n\n\tthis.convolutionUniforms = THREE.UniformsUtils.clone( convolutionShader.uniforms );\n\n\tthis.convolutionUniforms[ \"uImageIncrement\" ].value = THREE.BloomPass.blurx;\n\tthis.convolutionUniforms[ \"cKernel\" ].value = THREE.ConvolutionShader.buildKernel( sigma );\n\n\tthis.materialConvolution = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.convolutionUniforms,\n\t\tvertexShader:  convolutionShader.vertexShader,\n\t\tfragmentShader: convolutionShader.fragmentShader,\n\t\tdefines: {\n\t\t\t\"KERNEL_SIZE_FLOAT\": kernelSize.toFixed( 1 ),\n\t\t\t\"KERNEL_SIZE_INT\": kernelSize.toFixed( 0 )\n\t\t}\n\n\t} );\n\n\tthis.enabled = true;\n\tthis.needsSwap = false;\n\tthis.clear = false;\n\n};\n\nTHREE.BloomPass.prototype = {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tif ( maskActive ) renderer.context.disable( renderer.context.STENCIL_TEST );\n\n\t\t// Render quad with blured scene into texture (convolution pass 1)\n\n\t\tTHREE.EffectComposer.quad.material = this.materialConvolution;\n\n\t\tthis.convolutionUniforms[ \"tDiffuse\" ].value = readBuffer;\n\t\tthis.convolutionUniforms[ \"uImageIncrement\" ].value = THREE.BloomPass.blurX;\n\n\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera, this.renderTargetX, true );\n\n\n\t\t// Render quad with blured scene into texture (convolution pass 2)\n\n\t\tthis.convolutionUniforms[ \"tDiffuse\" ].value = this.renderTargetX;\n\t\tthis.convolutionUniforms[ \"uImageIncrement\" ].value = THREE.BloomPass.blurY;\n\n\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera, this.renderTargetY, true );\n\n\t\t// Render original scene with superimposed blur to texture\n\n\t\tTHREE.EffectComposer.quad.material = this.materialCopy;\n\n\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.renderTargetY;\n\n\t\tif ( maskActive ) renderer.context.enable( renderer.context.STENCIL_TEST );\n\n\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera, readBuffer, this.clear );\n\n\t}\n\n};\n\nTHREE.BloomPass.blurX = new THREE.Vector2( 0.001953125, 0.0 );\nTHREE.BloomPass.blurY = new THREE.Vector2( 0.0, 0.001953125 );\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/postprocessing/BloomPass.js\n ** module id = 68\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.FilmPass = function ( noiseIntensity, scanlinesIntensity, scanlinesCount, grayscale ) {\n\n\tif ( THREE.FilmShader === undefined )\n\t\tconsole.error( \"THREE.FilmPass relies on THREE.FilmShader\" );\n\n\tvar shader = THREE.FilmShader;\n\n\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\tthis.material = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\n\t} );\n\n\tif ( grayscale !== undefined )\tthis.uniforms.grayscale.value = grayscale;\n\tif ( noiseIntensity !== undefined ) this.uniforms.nIntensity.value = noiseIntensity;\n\tif ( scanlinesIntensity !== undefined ) this.uniforms.sIntensity.value = scanlinesIntensity;\n\tif ( scanlinesCount !== undefined ) this.uniforms.sCount.value = scanlinesCount;\n\n\tthis.enabled = true;\n\tthis.renderToScreen = false;\n\tthis.needsSwap = true;\n\n};\n\nTHREE.FilmPass.prototype = {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta ) {\n\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer;\n\t\tthis.uniforms[ \"time\" ].value += delta;\n\n\t\tTHREE.EffectComposer.quad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera );\n\n\t\t} else {\n\n\t\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera, writeBuffer, false );\n\n\t\t}\n\n\t}\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/postprocessing/FilmPass.js\n ** module id = 69\n ** module chunks = 0\n **/","/**\n * @author Tim Knip / http://www.floorplanner.com/ / tim at floorplanner.com\n */\n\nTHREE.ColladaLoader = function () {\n\n\tvar COLLADA = null;\n\tvar scene = null;\n\tvar daeScene;\n\n\tvar readyCallbackFunc = null;\n\n\tvar sources = {};\n\tvar images = {};\n\tvar animations = {};\n\tvar controllers = {};\n\tvar geometries = {};\n\tvar materials = {};\n\tvar effects = {};\n\tvar cameras = {};\n\tvar lights = {};\n\n\tvar animData;\n\tvar visualScenes;\n\tvar baseUrl;\n\tvar morphs;\n\tvar skins;\n\n\tvar flip_uv = true;\n\tvar preferredShading = THREE.SmoothShading;\n\n\tvar options = {\n\t\t// Force Geometry to always be centered at the local origin of the\n\t\t// containing Mesh.\n\t\tcenterGeometry: false,\n\n\t\t// Axis conversion is done for geometries, animations, and controllers.\n\t\t// If we ever pull cameras or lights out of the COLLADA file, they'll\n\t\t// need extra work.\n\t\tconvertUpAxis: false,\n\n\t\tsubdivideFaces: true,\n\n\t\tupAxis: 'Y',\n\n\t\t// For reflective or refractive materials we'll use this cubemap\n\t\tdefaultEnvMap: null\n\n\t};\n\n\tvar colladaUnit = 1.0;\n\tvar colladaUp = 'Y';\n\tvar upConversion = null;\n\n\tfunction load ( url, readyCallback, progressCallback ) {\n\n\t\tvar length = 0;\n\n\t\tif ( document.implementation && document.implementation.createDocument ) {\n\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\trequest.onreadystatechange = function() {\n\n\t\t\t\tif( request.readyState == 4 ) {\n\n\t\t\t\t\tif( request.status == 0 || request.status == 200 ) {\n\n\n\t\t\t\t\t\tif ( request.responseXML ) {\n\n\t\t\t\t\t\t\treadyCallbackFunc = readyCallback;\n\t\t\t\t\t\t\tparse( request.responseXML, undefined, url );\n\n\t\t\t\t\t\t} else if ( request.responseText ) {\n\n\t\t\t\t\t\t\treadyCallbackFunc = readyCallback;\n\t\t\t\t\t\t\tvar xmlParser = new DOMParser();\n\t\t\t\t\t\t\tvar responseXML = xmlParser.parseFromString( request.responseText, \"application/xml\" );\n\t\t\t\t\t\t\tparse( responseXML, undefined, url );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.error( \"ColladaLoader: Empty or non-existing file (\" + url + \")\" );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( request.readyState == 3 ) {\n\n\t\t\t\t\tif ( progressCallback ) {\n\n\t\t\t\t\t\tif ( length == 0 ) {\n\n\t\t\t\t\t\t\tlength = request.getResponseHeader( \"Content-Length\" );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tprogressCallback( { total: length, loaded: request.responseText.length } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\trequest.open( \"GET\", url, true );\n\t\t\trequest.send( null );\n\n\t\t} else {\n\n\t\t\talert( \"Don't know how to parse XML!\" );\n\n\t\t}\n\n\t}\n\n\tfunction parse( doc, callBack, url ) {\n\n\t\tCOLLADA = doc;\n\t\tcallBack = callBack || readyCallbackFunc;\n\n\t\tif ( url !== undefined ) {\n\n\t\t\tvar parts = url.split( '/' );\n\t\t\tparts.pop();\n\t\t\tbaseUrl = ( parts.length < 1 ? '.' : parts.join( '/' ) ) + '/';\n\n\t\t}\n\n\t\tparseAsset();\n\t\tsetUpConversion();\n\t\timages = parseLib( \"library_images image\", _Image, \"image\" );\n\t\tmaterials = parseLib( \"library_materials material\", Material, \"material\" );\n\t\teffects = parseLib( \"library_effects effect\", Effect, \"effect\" );\n\t\tgeometries = parseLib( \"library_geometries geometry\", Geometry, \"geometry\" );\n\t\tcameras = parseLib( \"library_cameras camera\", Camera, \"camera\" );\n\t\tlights = parseLib( \"library_lights light\", Light, \"light\" );\n\t\tcontrollers = parseLib( \"library_controllers controller\", Controller, \"controller\" );\n\t\tanimations = parseLib( \"library_animations animation\", Animation, \"animation\" );\n\t\tvisualScenes = parseLib( \"library_visual_scenes visual_scene\", VisualScene, \"visual_scene\" );\n\t\t\n\t\tmorphs = [];\n\t\tskins = [];\n\n\t\tdaeScene = parseScene();\n\t\tscene = new THREE.Object3D();\n\n\t\tfor ( var i = 0; i < daeScene.nodes.length; i ++ ) {\n\n\t\t\tscene.add( createSceneGraph( daeScene.nodes[ i ] ) );\n\n\t\t}\n\n\t\t// unit conversion\n\t\tscene.scale.multiplyScalar( colladaUnit );\n\n\t\tcreateAnimations();\n\n\t\tvar result = {\n\n\t\t\tscene: scene,\n\t\t\tmorphs: morphs,\n\t\t\tskins: skins,\n\t\t\tanimations: animData,\n\t\t\tdae: {\n\t\t\t\timages: images,\n\t\t\t\tmaterials: materials,\n\t\t\t\tcameras: cameras,\n\t\t\t\tlights: lights,\n\t\t\t\teffects: effects,\n\t\t\t\tgeometries: geometries,\n\t\t\t\tcontrollers: controllers,\n\t\t\t\tanimations: animations,\n\t\t\t\tvisualScenes: visualScenes,\n\t\t\t\tscene: daeScene\n\t\t\t}\n\n\t\t};\n\n\t\tif ( callBack ) {\n\n\t\t\tcallBack( result );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction setPreferredShading ( shading ) {\n\n\t\tpreferredShading = shading;\n\n\t}\n\n\tfunction parseAsset () {\n\n\t\tvar elements = COLLADA.querySelectorAll('asset');\n\n\t\tvar element = elements[0];\n\n\t\tif ( element && element.childNodes ) {\n\n\t\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\tcase 'unit':\n\n\t\t\t\t\t\tvar meter = child.getAttribute( 'meter' );\n\n\t\t\t\t\t\tif ( meter ) {\n\n\t\t\t\t\t\t\tcolladaUnit = parseFloat( meter );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'up_axis':\n\n\t\t\t\t\t\tcolladaUp = child.textContent.charAt(0);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction parseLib ( q, classSpec, prefix ) {\n\n\t\tvar elements = COLLADA.querySelectorAll(q);\n\n\t\tvar lib = {};\n\n\t\tvar i = 0;\n\n\t\tvar elementsLength = elements.length;\n\n\t\tfor ( var j = 0; j < elementsLength; j ++ ) {\n\n\t\t\tvar element = elements[j];\n\t\t\tvar daeElement = ( new classSpec() ).parse( element );\n\n\t\t\tif ( !daeElement.id || daeElement.id.length == 0 ) daeElement.id = prefix + ( i ++ );\n\t\t\tlib[ daeElement.id ] = daeElement;\n\n\t\t}\n\n\t\treturn lib;\n\n\t}\n\n\tfunction parseScene() {\n\t\n\t\tvar sceneElement = COLLADA.querySelectorAll('scene instance_visual_scene')[0];\n\t\t\n\t\tif ( sceneElement ) {\n\n\t\t\tvar url = sceneElement.getAttribute( 'url' ).replace( /^#/, '' );\n\t\t\treturn visualScenes[ url.length > 0 ? url : 'visual_scene0' ];\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tfunction createAnimations() {\n\n\t\tanimData = [];\n\n\t\t// fill in the keys\n\t\trecurseHierarchy( scene );\n\n\t}\n\n\tfunction recurseHierarchy( node ) {\n\n\t\tvar n = daeScene.getChildById( node.name, true ),\n\t\t\tnewData = null;\n\n\t\tif ( n && n.keys ) {\n\n\t\t\tnewData = {\n\t\t\t\tfps: 60,\n\t\t\t\thierarchy: [ {\n\t\t\t\t\tnode: n,\n\t\t\t\t\tkeys: n.keys,\n\t\t\t\t\tsids: n.sids\n\t\t\t\t} ],\n\t\t\t\tnode: node,\n\t\t\t\tname: 'animation_' + node.name,\n\t\t\t\tlength: 0\n\t\t\t};\n\n\t\t\tanimData.push(newData);\n\n\t\t\tfor ( var i = 0, il = n.keys.length; i < il; i++ ) {\n\n\t\t\t\tnewData.length = Math.max( newData.length, n.keys[i].time );\n\n\t\t\t}\n\n\t\t} else  {\n\n\t\t\tnewData = {\n\t\t\t\thierarchy: [ {\n\t\t\t\t\tkeys: [],\n\t\t\t\t\tsids: []\n\t\t\t\t} ]\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0, il = node.children.length; i < il; i++ ) {\n\n\t\t\tvar d = recurseHierarchy( node.children[i] );\n\n\t\t\tfor ( var j = 0, jl = d.hierarchy.length; j < jl; j ++ ) {\n\n\t\t\t\tnewData.hierarchy.push( {\n\t\t\t\t\tkeys: [],\n\t\t\t\t\tsids: []\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn newData;\n\n\t}\n\n\tfunction calcAnimationBounds () {\n\n\t\tvar start = 1000000;\n\t\tvar end = -start;\n\t\tvar frames = 0;\n\t\tvar ID;\n\t\tfor ( var id in animations ) {\n\n\t\t\tvar animation = animations[ id ];\n\t\t\tID = ID || animation.id; \n\t\t\tfor ( var i = 0; i < animation.sampler.length; i ++ ) {\n\n\t\t\t\tvar sampler = animation.sampler[ i ];\n\t\t\t\t\n\t\t\t\tsampler.create();\n\n\t\t\t\tstart = Math.min( start, sampler.startTime );\n\t\t\t\tend = Math.max( end, sampler.endTime );\n\t\t\t\tframes = Math.max( frames, sampler.input.length );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn { start:start, end:end, frames:frames,ID:ID };\n\n\t}\n\n\tfunction createMorph ( geometry, ctrl ) {\n\n\t\tvar morphCtrl = ctrl instanceof InstanceController ? controllers[ ctrl.url ] : ctrl;\n\n\t\tif ( !morphCtrl || !morphCtrl.morph ) {\n\n\t\t\tconsole.log(\"could not find morph controller!\");\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar morph = morphCtrl.morph;\n\n\t\tfor ( var i = 0; i < morph.targets.length; i ++ ) {\n\n\t\t\tvar target_id = morph.targets[ i ];\n\t\t\tvar daeGeometry = geometries[ target_id ];\n\n\t\t\tif ( !daeGeometry.mesh ||\n\t\t\t\t !daeGeometry.mesh.primitives ||\n\t\t\t\t !daeGeometry.mesh.primitives.length ) {\n\t\t\t\t continue;\n\t\t\t}\n\n\t\t\tvar target = daeGeometry.mesh.primitives[ 0 ].geometry;\n\n\t\t\tif ( target.vertices.length === geometry.vertices.length ) {\n\n\t\t\t\tgeometry.morphTargets.push( { name: \"target_1\", vertices: target.vertices } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.morphTargets.push( { name: \"target_Z\", vertices: geometry.vertices } );\n\n\t};\n\n\tfunction createSkin ( geometry, ctrl, applyBindShape ) {\n\n\t\tvar skinCtrl = controllers[ ctrl.url ];\n\n\t\tif ( !skinCtrl || !skinCtrl.skin ) {\n\n\t\t\tconsole.log( \"could not find skin controller!\" );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( !ctrl.skeleton || !ctrl.skeleton.length ) {\n\n\t\t\tconsole.log( \"could not find the skeleton for the skin!\" );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar skin = skinCtrl.skin;\n\t\tvar skeleton = daeScene.getChildById( ctrl.skeleton[ 0 ] );\n\t\tvar hierarchy = [];\n\n\t\tapplyBindShape = applyBindShape !== undefined ? applyBindShape : true;\n\n\t\tvar bones = [];\n\t\tgeometry.skinWeights = [];\n\t\tgeometry.skinIndices = [];\n\n\t\t//createBones( geometry.bones, skin, hierarchy, skeleton, null, -1 );\n\t\t//createWeights( skin, geometry.bones, geometry.skinIndices, geometry.skinWeights );\n\n\t\t/*\n\t\tgeometry.animation = {\n\t\t\tname: 'take_001',\n\t\t\tfps: 30,\n\t\t\tlength: 2,\n\t\t\tJIT: true,\n\t\t\thierarchy: hierarchy\n\t\t};\n\t\t*/\n\n\t\tif ( applyBindShape ) {\n\n\t\t\tfor ( var i = 0; i < geometry.vertices.length; i ++ ) {\n\n\t\t\t\tgeometry.vertices[ i ].applyMatrix4( skin.bindShapeMatrix );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setupSkeleton ( node, bones, frame, parent ) {\n\n\t\tnode.world = node.world || new THREE.Matrix4();\n\t\tnode.localworld = node.localworld || new THREE.Matrix4();\n\t\tnode.world.copy( node.matrix );\n\t\tnode.localworld.copy( node.matrix );\n\n\t\tif ( node.channels && node.channels.length ) {\n\n\t\t\tvar channel = node.channels[ 0 ];\n\t\t\tvar m = channel.sampler.output[ frame ];\n\n\t\t\tif ( m instanceof THREE.Matrix4 ) {\n\n\t\t\t\tnode.world.copy( m );\n\t\t\t\tnode.localworld.copy(m);\n\t\t\t\tif(frame == 0)\n\t\t\t\t\tnode.matrix.copy(m);\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parent ) {\n\n\t\t\tnode.world.multiplyMatrices( parent, node.world );\n\n\t\t}\n\n\t\tbones.push( node );\n\n\t\tfor ( var i = 0; i < node.nodes.length; i ++ ) {\n\n\t\t\tsetupSkeleton( node.nodes[ i ], bones, frame, node.world );\n\n\t\t}\n\n\t}\n\n\tfunction setupSkinningMatrices ( bones, skin ) {\n\n\t\t// FIXME: this is dumb...\n\t\t\n\t\tfor ( var i = 0; i < bones.length; i ++ ) {\n\t\t\n\t\t\tvar bone = bones[ i ];\n\t\t\tvar found = -1;\n\n\t\t\tif ( bone.type != 'JOINT' ) continue;\n\n\t\t\tfor ( var j = 0; j < skin.joints.length; j ++ ) {\n\n\t\t\t\tif ( bone.sid == skin.joints[ j ] ) {\n\n\t\t\t\t\tfound = j;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( found >= 0 ) {\n\n\t\t\t\tvar inv = skin.invBindMatrices[ found ];\n\n\t\t\t\tbone.invBindMatrix = inv;\n\t\t\t\tbone.skinningMatrix = new THREE.Matrix4();\n\t\t\t\tbone.skinningMatrix.multiplyMatrices(bone.world, inv); // (IBMi * JMi)\n\t\t\t\tbone.animatrix = new THREE.Matrix4();\n\n\t\t\t\tbone.animatrix.copy(bone.localworld);\n\t\t\t\tbone.weights = [];\n\n\t\t\t\tfor ( var j = 0; j < skin.weights.length; j ++ ) {\n\t\t\t\t\t\n\t\t\t\t\tfor (var k = 0; k < skin.weights[ j ].length; k ++ ) {\n\n\t\t\t\t\t\tvar w = skin.weights[ j ][ k ];\n\n\t\t\t\t\t\tif ( w.joint == found ) {\n\n\t\t\t\t\t\t\tbone.weights.push( w );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( \"ColladaLoader: Could not find joint '\" + bone.sid + \"'.\" );\n\n\t\t\t\tbone.skinningMatrix = new THREE.Matrix4();\n\t\t\t\tbone.weights = [];\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t//Walk the Collada tree and flatten the bones into a list, extract the position, quat and scale from the matrix\n\tfunction flattenSkeleton(skeleton) {\n\n\t\tvar list = [];\n\t\tvar walk = function(parentid, node, list) {\n\n\t\t\tvar bone = {};\n\t\t\tbone.name = node.sid;\n\t\t\tbone.parent = parentid;\n\t\t\tbone.matrix = node.matrix;\n\t\t\tvar data = [new THREE.Vector3(),new THREE.Quaternion(),new THREE.Vector3()];\n\t\t\tbone.matrix.decompose(data[0],data[1],data[2]);\n\t\t\t\t\t\t\t\n\t\t\tbone.pos = [data[0].x,data[0].y,data[0].z];\n\t\t\t\t\t\t\t\n\t\t\tbone.scl = [data[2].x,data[2].y,data[2].z];\n\t\t\tbone.rotq = [data[1].x,data[1].y,data[1].z,data[1].w];\n\t\t\tlist.push(bone);\n\n\t\t\tfor(var i in node.nodes) {\n\n\t\t\t\twalk(node.sid,node.nodes[i],list);\n\n\t\t\t}\n\n\t\t};\n\n\t\twalk(-1,skeleton,list);\n\t\treturn list;\n\n\t}\n\n\t//Move the vertices into the pose that is proper for the start of the animation\n\tfunction skinToBindPose(geometry,skeleton,skinController) {\n\n\t\tvar bones = [];\n\t\tsetupSkeleton( skeleton, bones, -1 );\n\t\tsetupSkinningMatrices( bones, skinController.skin );\n\t\tv = new THREE.Vector3();\n\t\tvar skinned = [];\n\n\t\tfor(var i =0; i < geometry.vertices.length; i++) {\n\n\t\t\tskinned.push(new THREE.Vector3());\n\n\t\t}\n\n\t\tfor ( i = 0; i < bones.length; i ++ ) {\n\n\t\t\tif ( bones[ i ].type != 'JOINT' ) continue;\n\n\t\t\tfor ( j = 0; j < bones[ i ].weights.length; j ++ ) {\n\n\t\t\t\tw = bones[ i ].weights[ j ];\n\t\t\t\tvidx = w.index;\n\t\t\t\tweight = w.weight;\n\n\t\t\t\to = geometry.vertices[vidx];\n\t\t\t\ts = skinned[vidx];\n\t\t\t\t\n\t\t\t\tv.x = o.x;\n\t\t\t\tv.y = o.y;\n\t\t\t\tv.z = o.z;\n\n\t\t\t\tv.applyMatrix4( bones[i].skinningMatrix );\n\n\t\t\t\ts.x += (v.x * weight);\n\t\t\t\ts.y += (v.y * weight);\n\t\t\t\ts.z += (v.z * weight);\n\t\t\t}\n\n\t\t}\n\n\t\tfor(var i =0; i < geometry.vertices.length; i++) {\n\n\t\t\tgeometry.vertices[i] = skinned[i];\n\n\t\t}\n\n\t}\n\n\tfunction applySkin ( geometry, instanceCtrl, frame ) {\n\n\t\t// TODO: get this from the renderer or options\n\t\tvar maxbones = 30;\n\t\t\n\t\tvar skinController = controllers[ instanceCtrl.url ];\n\n\t\tframe = frame !== undefined ? frame : 40;\n\n\t\tif ( !skinController || !skinController.skin ) {\n\n\t\t\tconsole.log( 'ColladaLoader: Could not find skin controller.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( !instanceCtrl.skeleton || !instanceCtrl.skeleton.length ) {\n\n\t\t\tconsole.log( 'ColladaLoader: Could not find the skeleton for the skin. ' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar animationBounds = calcAnimationBounds();\n\t\tvar skeleton = daeScene.getChildById( instanceCtrl.skeleton[0], true ) ||\n\t\t\t\t\t   daeScene.getChildBySid( instanceCtrl.skeleton[0], true );\n\t\t\n\t\t//flatten the skeleton into a list of bones\n\t\tvar bonelist = flattenSkeleton(skeleton);\n\t\tvar joints = skinController.skin.joints;\n\n\t\t//sort that list so that the order reflects the order in the joint list\n\t\tvar sortedbones = [];\n\t\tfor(var i = 0; i < joints.length; i++) {\n\n\t\t\tfor(var j =0; j < bonelist.length; j++) {\n\n\t\t\t\tif(bonelist[j].name == joints[i]) {\n\n\t\t\t\t\tsortedbones[i] = bonelist[j];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//hook up the parents by index instead of name\n\t\tfor(var i = 0; i < sortedbones.length; i++) {\n\n\t\t\tfor(var j =0; j < sortedbones.length; j++) {\n\n\t\t\t\tif(sortedbones[i].parent == sortedbones[j].name) {\n\n\t\t\t\t\tsortedbones[i].parent = j;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar i, j, w, vidx, weight;\n\t\tvar v = new THREE.Vector3(), o, s;\n\n\t\t// move vertices to bind shape\n\t\tfor ( i = 0; i < geometry.vertices.length; i ++ ) {\n\t\t\t\t\tgeometry.vertices[i].applyMatrix4( skinController.skin.bindShapeMatrix );\n\t\t}\n\n\t\tvar skinIndices = [];\n\t\tvar skinWeights = [];\n\t\tvar weights = skinController.skin.weights;\n\n\t\t//hook up the skin weights\n\t\t// TODO -  this might be a good place to choose greatest 4 weights\n\t\tfor(var i =0; i < weights.length; i++) {\n\n\t\t\tvar indicies = new THREE.Vector4(weights[i][0]?weights[i][0].joint:0,weights[i][1]?weights[i][1].joint:0,weights[i][2]?weights[i][2].joint:0,weights[i][3]?weights[i][3].joint:0);\n\t\t\tvar weight = new THREE.Vector4(weights[i][0]?weights[i][0].weight:0,weights[i][1]?weights[i][1].weight:0,weights[i][2]?weights[i][2].weight:0,weights[i][3]?weights[i][3].weight:0);\n\t\t\t\n\t\t\tskinIndices.push(indicies);\n\t\t\tskinWeights.push(weight);\n\n\t\t}\n\n\t\tgeometry.skinIndices = skinIndices;\n\t\tgeometry.skinWeights = skinWeights;\n\t\tgeometry.bones = sortedbones;\n\t\t// process animation, or simply pose the rig if no animation\n\t\t\n\t\t//create an animation for the animated bones\n\t\t//NOTE: this has no effect when using morphtargets\n\t\tvar animationdata = {\"name\":animationBounds.ID,\"fps\":30,\"length\":animationBounds.frames/30,\"hierarchy\":[]};\n\n\t\tfor(var j =0; j < sortedbones.length; j++) {\n\n\t\t\tanimationdata.hierarchy.push({parent:sortedbones[j].parent, name:sortedbones[j].name, keys:[]});\n\n\t\t}\n\n\t\t//if using hardware skinning, move the vertices into the binding pose\n\t\tif(sortedbones.length < maxbones) {\n\n\t\t\tskinToBindPose(geometry,skeleton,skinController);\n\n\t\t}\n\n\t\tfor ( frame = 0; frame < animationBounds.frames; frame ++ ) {\n\n\t\t\tvar bones = [];\n\t\t\tvar skinned = [];\n\t\t\t// process the frame and setup the rig with a fresh\n\t\t\t// transform, possibly from the bone's animation channel(s)\n\n\t\t\tsetupSkeleton( skeleton, bones, frame );\n\t\t\tsetupSkinningMatrices( bones, skinController.skin );\n\n\t\t\t//if using hardware skinning, just hook up the animiation data\n\t\t\tif(sortedbones.length < maxbones) {\n\n\t\t\t\tfor(var i = 0; i < bones.length; i ++) {\n\n\t\t\t\t\tfor(var j = 0; j < animationdata.hierarchy.length; j ++) {\n\n\t\t\t\t\t\tif(animationdata.hierarchy[j].name == bones[i].sid) {\n\n\t\t\t\t\t\t\tvar key = {};\n\t\t\t\t\t\t\tkey.time = (frame/30);\n\t\t\t\t\t\t\tkey.matrix = bones[i].animatrix;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(frame == 0)\n\t\t\t\t\t\t\t\tbones[i].matrix = key.matrix;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar data = [new THREE.Vector3(),new THREE.Quaternion(),new THREE.Vector3()];\n\t\t\t\t\t\t\tkey.matrix.decompose(data[0],data[1],data[2]);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tkey.pos = [data[0].x,data[0].y,data[0].z];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tkey.scl = [data[2].x,data[2].y,data[2].z];\n\t\t\t\t\t\t\tkey.rot = data[1];\n\n\t\t\t\t\t\t\tanimationdata.hierarchy[j].keys.push(key);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.animation = animationdata;\n\n\t\t\t} else {\n\n\t\t\t\t// otherwise, process the animation into morphtargets\n\t\t\t\t\n\t\t\t\tfor ( i = 0; i < geometry.vertices.length; i++ ) {\n\n\t\t\t\t\tskinned.push( new THREE.Vector3() );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( i = 0; i < bones.length; i ++ ) {\n\n\t\t\t\t\tif ( bones[ i ].type != 'JOINT' ) continue;\n\n\t\t\t\t\tfor ( j = 0; j < bones[ i ].weights.length; j ++ ) {\n\n\t\t\t\t\t\tw = bones[ i ].weights[ j ];\n\t\t\t\t\t\tvidx = w.index;\n\t\t\t\t\t\tweight = w.weight;\n\n\t\t\t\t\t\to = geometry.vertices[vidx];\n\t\t\t\t\t\ts = skinned[vidx];\n\n\t\t\t\t\t\tv.x = o.x;\n\t\t\t\t\t\tv.y = o.y;\n\t\t\t\t\t\tv.z = o.z;\n\n\t\t\t\t\t\tv.applyMatrix4( bones[i].skinningMatrix );\n\n\t\t\t\t\t\ts.x += (v.x * weight);\n\t\t\t\t\t\ts.y += (v.y * weight);\n\t\t\t\t\t\ts.z += (v.z * weight);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\tgeometry.morphTargets.push( { name: \"target_\" + frame, vertices: skinned } );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction createSceneGraph ( node, parent ) {\n\n\t\tvar obj = new THREE.Object3D();\n\t\tvar skinned = false;\n\t\tvar skinController;\n\t\tvar morphController;\n\t\tvar i, j;\n\n\t\t// FIXME: controllers\n\n\t\tfor ( i = 0; i < node.controllers.length; i ++ ) {\n\n\t\t\tvar controller = controllers[ node.controllers[ i ].url ];\n\n\t\t\tswitch ( controller.type ) {\n\n\t\t\t\tcase 'skin':\n\n\t\t\t\t\tif ( geometries[ controller.skin.source ] ) {\n\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\tinst_geom.url = controller.skin.source;\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\n\n\t\t\t\t\t\tnode.geometries.push( inst_geom );\n\t\t\t\t\t\tskinned = true;\n\t\t\t\t\t\tskinController = node.controllers[ i ];\n\n\t\t\t\t\t} else if ( controllers[ controller.skin.source ] ) {\n\n\t\t\t\t\t\t// urgh: controller can be chained\n\t\t\t\t\t\t// handle the most basic case...\n\n\t\t\t\t\t\tvar second = controllers[ controller.skin.source ];\n\t\t\t\t\t\tmorphController = second;\n\t\t\t\t\t//\tskinController = node.controllers[i];\n\n\t\t\t\t\t\tif ( second.morph && geometries[ second.morph.source ] ) {\n\n\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\tinst_geom.url = second.morph.source;\n\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\n\n\t\t\t\t\t\t\tnode.geometries.push( inst_geom );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'morph':\n\n\t\t\t\t\tif ( geometries[ controller.morph.source ] ) {\n\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\tinst_geom.url = controller.morph.source;\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\n\n\t\t\t\t\t\tnode.geometries.push( inst_geom );\n\t\t\t\t\t\tmorphController = node.controllers[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log( 'ColladaLoader: Morph-controller partially supported.' );\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// geometries\n\n\t\tvar double_sided_materials = {};\n\n\t\tfor ( i = 0; i < node.geometries.length; i ++ ) {\n\n\t\t\tvar instance_geometry = node.geometries[i];\n\t\t\tvar instance_materials = instance_geometry.instance_material;\n\t\t\tvar geometry = geometries[ instance_geometry.url ];\n\t\t\tvar used_materials = {};\n\t\t\tvar used_materials_array = [];\n\t\t\tvar num_materials = 0;\n\t\t\tvar first_material;\n\n\t\t\tif ( geometry ) {\n\n\t\t\t\tif ( !geometry.mesh || !geometry.mesh.primitives )\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif ( obj.name.length == 0 ) {\n\n\t\t\t\t\tobj.name = geometry.id;\n\n\t\t\t\t}\n\n\t\t\t\t// collect used fx for this geometry-instance\n\n\t\t\t\tif ( instance_materials ) {\n\n\t\t\t\t\tfor ( j = 0; j < instance_materials.length; j ++ ) {\n\n\t\t\t\t\t\tvar instance_material = instance_materials[ j ];\n\t\t\t\t\t\tvar mat = materials[ instance_material.target ];\n\t\t\t\t\t\tvar effect_id = mat.instance_effect.url;\n\t\t\t\t\t\tvar shader = effects[ effect_id ].shader;\n\t\t\t\t\t\tvar material3js = shader.material;\n\n\t\t\t\t\t\tif ( geometry.doubleSided ) {\n\n\t\t\t\t\t\t\tif ( !( instance_material.symbol in double_sided_materials ) ) {\n\n\t\t\t\t\t\t\t\tvar _copied_material = material3js.clone();\n\t\t\t\t\t\t\t\t_copied_material.side = THREE.DoubleSide;\n\t\t\t\t\t\t\t\tdouble_sided_materials[ instance_material.symbol ] = _copied_material;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmaterial3js = double_sided_materials[ instance_material.symbol ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial3js.opacity = !material3js.opacity ? 1 : material3js.opacity;\n\t\t\t\t\t\tused_materials[ instance_material.symbol ] = num_materials;\n\t\t\t\t\t\tused_materials_array.push( material3js );\n\t\t\t\t\t\tfirst_material = material3js;\n\t\t\t\t\t\tfirst_material.name = mat.name == null || mat.name === '' ? mat.id : mat.name;\n\t\t\t\t\t\tnum_materials ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar mesh;\n\t\t\t\tvar material = first_material || new THREE.MeshLambertMaterial( { color: 0xdddddd, shading: THREE.FlatShading, side: geometry.doubleSided ? THREE.DoubleSide : THREE.FrontSide } );\n\t\t\t\tvar geom = geometry.mesh.geometry3js;\n\n\t\t\t\tif ( num_materials > 1 ) {\n\n\t\t\t\t\tmaterial = new THREE.MeshFaceMaterial( used_materials_array );\n\n\t\t\t\t\tfor ( j = 0; j < geom.faces.length; j ++ ) {\n\n\t\t\t\t\t\tvar face = geom.faces[ j ];\n\t\t\t\t\t\tface.materialIndex = used_materials[ face.daeMaterial ]\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( skinController !== undefined ) {\n\n\t\t\t\t\t\n\t\t\t\t\tapplySkin( geom, skinController );\n\n\t\t\t\t\tif(geom.morphTargets.length > 0) {\n\n\t\t\t\t\t\tmaterial.morphTargets = true;\n\t\t\t\t\t\tmaterial.skinning = false;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmaterial.morphTargets = false;\n\t\t\t\t\t\tmaterial.skinning = true;\n\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t\t\n\n\t\t\t\t\tmesh = new THREE.SkinnedMesh( geom, material, false );\n\n\n\t\t\t\t\t//mesh.skeleton = skinController.skeleton;\n\t\t\t\t\t//mesh.skinController = controllers[ skinController.url ];\n\t\t\t\t\t//mesh.skinInstanceController = skinController;\n\t\t\t\t\tmesh.name = 'skin_' + skins.length;\n\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t//mesh.animationHandle.setKey(0);\n\t\t\t\t\tskins.push( mesh );\n\n\t\t\t\t} else if ( morphController !== undefined ) {\n\n\t\t\t\t\tcreateMorph( geom, morphController );\n\n\t\t\t\t\tmaterial.morphTargets = true;\n\n\t\t\t\t\tmesh = new THREE.Mesh( geom, material );\n\t\t\t\t\tmesh.name = 'morph_' + morphs.length;\n\n\t\t\t\t\tmorphs.push( mesh );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmesh = new THREE.Mesh( geom, material );\n\t\t\t\t\t// mesh.geom.name = geometry.id;\n\n\t\t\t\t}\n\n\t\t\t\tnode.geometries.length > 1 ? obj.add( mesh ) : obj = mesh;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = 0; i < node.cameras.length; i ++ ) {\n\n\t\t\tvar instance_camera = node.cameras[i];\n\t\t\tvar cparams = cameras[instance_camera.url];\n\n\t\t\tobj = new THREE.PerspectiveCamera(cparams.fov, parseFloat(cparams.aspect_ratio), \n\t\t\t\t\tparseFloat(cparams.znear), parseFloat(cparams.zfar));\n\n\t\t}\n\n\t\tfor ( i = 0; i < node.lights.length; i ++ ) {\n\n\t\t\tvar instance_light = node.lights[i];\n\t\t\tvar lparams = lights[instance_light.url];\n\n\t\t\tif ( lparams && lparams.technique ) {\n\n\t\t\t\tvar color = lparams.color.getHex();\n\t\t\t\tvar intensity = lparams.intensity;\n\t\t\t\tvar distance = 0;\n\t\t\t\tvar angle = lparams.falloff_angle;\n\t\t\t\tvar exponent; // Intentionally undefined, don't know what this is yet\n\n\t\t\t\tswitch ( lparams.technique ) {\n\n\t\t\t\t\tcase 'directional':\n\n\t\t\t\t\t\tobj = new THREE.DirectionalLight( color, intensity, distance );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'point':\n\n\t\t\t\t\t\tobj = new THREE.PointLight( color, intensity, distance );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'spot':\n\n\t\t\t\t\t\tobj = new THREE.SpotLight( color, intensity, distance, angle, exponent );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\tobj = new THREE.AmbientLight( color );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tobj.name = node.name || node.id || \"\";\n\t\tobj.layer = node.layer || \"\";\n\t\tobj.matrix = node.matrix;\n\t\tobj.matrix.decompose( obj.position, obj.quaternion, obj.scale );\n\n\t\tif ( options.centerGeometry && obj.geometry ) {\n\n\t\t\tvar delta = THREE.GeometryUtils.center( obj.geometry );\n\t\t\tdelta.multiply( obj.scale );\n\t\t\tdelta.applyQuaternion( obj.quaternion );\n\n\t\t\tobj.position.sub( delta );\n\n\t\t}\n\n\t\tfor ( i = 0; i < node.nodes.length; i ++ ) {\n\n\t\t\tobj.add( createSceneGraph( node.nodes[i], node ) );\n\n\t\t}\n\n\t\treturn obj;\n\n\t};\n\n\tfunction getJointId( skin, id ) {\n\n\t\tfor ( var i = 0; i < skin.joints.length; i ++ ) {\n\n\t\t\tif ( skin.joints[ i ] == id ) {\n\n\t\t\t\treturn i;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction getLibraryNode( id ) {\n\n        var nodes = COLLADA.querySelectorAll('library_nodes node');\n\n        for ( var i = 0; i < nodes.length; i++ ) {\n\n            var attObj = nodes[i].attributes.getNamedItem('id');\n            if ( attObj && attObj.value === id ) {\n                return nodes[i];\n        }\n        }\n\n        return undefined;\n\n\t};\n\n\tfunction getChannelsForNode (node ) {\n\n\t\tvar channels = [];\n\t\tvar startTime = 1000000;\n\t\tvar endTime = -1000000;\n\n\t\tfor ( var id in animations ) {\n\n\t\t\tvar animation = animations[id];\n\n\t\t\tfor ( var i = 0; i < animation.channel.length; i ++ ) {\n\n\t\t\t\tvar channel = animation.channel[i];\n\t\t\t\tvar sampler = animation.sampler[i];\n\t\t\t\tvar id = channel.target.split('/')[0];\n\n\t\t\t\tif ( id == node.id ) {\n\n\t\t\t\t\tsampler.create();\n\t\t\t\t\tchannel.sampler = sampler;\n\t\t\t\t\tstartTime = Math.min(startTime, sampler.startTime);\n\t\t\t\t\tendTime = Math.max(endTime, sampler.endTime);\n\t\t\t\t\tchannels.push(channel);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( channels.length ) {\n\n\t\t\tnode.startTime = startTime;\n\t\t\tnode.endTime = endTime;\n\n\t\t}\n\n\t\treturn channels;\n\n\t};\n\n\tfunction calcFrameDuration( node ) {\n\n\t\tvar minT = 10000000;\n\n\t\tfor ( var i = 0; i < node.channels.length; i ++ ) {\n\n\t\t\tvar sampler = node.channels[i].sampler;\n\n\t\t\tfor ( var j = 0; j < sampler.input.length - 1; j ++ ) {\n\n\t\t\t\tvar t0 = sampler.input[ j ];\n\t\t\t\tvar t1 = sampler.input[ j + 1 ];\n\t\t\t\tminT = Math.min( minT, t1 - t0 );\n\n\t\t\t}\n\t\t}\n\n\t\treturn minT;\n\n\t};\n\n\tfunction calcMatrixAt( node, t ) {\n\n\t\tvar animated = {};\n\n\t\tvar i, j;\n\n\t\tfor ( i = 0; i < node.channels.length; i ++ ) {\n\n\t\t\tvar channel = node.channels[ i ];\n\t\t\tanimated[ channel.sid ] = channel;\n\n\t\t}\n\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\tfor ( i = 0; i < node.transforms.length; i ++ ) {\n\n\t\t\tvar transform = node.transforms[ i ];\n\t\t\tvar channel = animated[ transform.sid ];\n\n\t\t\tif ( channel !== undefined ) {\n\n\t\t\t\tvar sampler = channel.sampler;\n\t\t\t\tvar value;\n\n\t\t\t\tfor ( j = 0; j < sampler.input.length - 1; j ++ ) {\n\n\t\t\t\t\tif ( sampler.input[ j + 1 ] > t ) {\n\n\t\t\t\t\t\tvalue = sampler.output[ j ];\n\t\t\t\t\t\t//console.log(value.flatten)\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\tif ( value instanceof THREE.Matrix4 ) {\n\n\t\t\t\t\t\tmatrix.multiplyMatrices( matrix, value );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// FIXME: handle other types\n\n\t\t\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn matrix;\n\n\t};\n\n\tfunction bakeAnimations ( node ) {\n\n\t\tif ( node.channels && node.channels.length ) {\n\n\t\t\tvar keys = [],\n\t\t\t\tsids = [];\n\n\t\t\tfor ( var i = 0, il = node.channels.length; i < il; i++ ) {\n\n\t\t\t\tvar channel = node.channels[i],\n\t\t\t\t\tfullSid = channel.fullSid,\n\t\t\t\t\tsampler = channel.sampler,\n\t\t\t\t\tinput = sampler.input,\n\t\t\t\t\ttransform = node.getTransformBySid( channel.sid ),\n\t\t\t\t\tmember;\n\n\t\t\t\tif ( channel.arrIndices ) {\n\n\t\t\t\t\tmember = [];\n\n\t\t\t\t\tfor ( var j = 0, jl = channel.arrIndices.length; j < jl; j++ ) {\n\n\t\t\t\t\t\tmember[ j ] = getConvertedIndex( channel.arrIndices[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmember = getConvertedMember( channel.member );\n\n\t\t\t\t}\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tif ( sids.indexOf( fullSid ) === -1 ) {\n\n\t\t\t\t\t\tsids.push( fullSid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var j = 0, jl = input.length; j < jl; j++ ) {\n\n\t\t\t\t\t\tvar time = input[j],\n\t\t\t\t\t\t\tdata = sampler.getData( transform.type, j ),\n\t\t\t\t\t\t\tkey = findKey( keys, time );\n\n\t\t\t\t\t\tif ( !key ) {\n\n\t\t\t\t\t\t\tkey = new Key( time );\n\t\t\t\t\t\t\tvar timeNdx = findTimeNdx( keys, time );\n\t\t\t\t\t\t\tkeys.splice( timeNdx == -1 ? keys.length : timeNdx, 0, key );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tkey.addTarget( fullSid, transform, member, data );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log( 'Could not find transform \"' + channel.sid + '\" in node ' + node.id );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// post process\n\t\t\tfor ( var i = 0; i < sids.length; i++ ) {\n\n\t\t\t\tvar sid = sids[ i ];\n\n\t\t\t\tfor ( var j = 0; j < keys.length; j++ ) {\n\n\t\t\t\t\tvar key = keys[ j ];\n\n\t\t\t\t\tif ( !key.hasTarget( sid ) ) {\n\n\t\t\t\t\t\tinterpolateKeys( keys, key, j, sid );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnode.keys = keys;\n\t\t\tnode.sids = sids;\n\n\t\t}\n\n\t};\n\n\tfunction findKey ( keys, time) {\n\n\t\tvar retVal = null;\n\n\t\tfor ( var i = 0, il = keys.length; i < il && retVal == null; i++ ) {\n\n\t\t\tvar key = keys[i];\n\n\t\t\tif ( key.time === time ) {\n\n\t\t\t\tretVal = key;\n\n\t\t\t} else if ( key.time > time ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn retVal;\n\n\t};\n\n\tfunction findTimeNdx ( keys, time) {\n\n\t\tvar ndx = -1;\n\n\t\tfor ( var i = 0, il = keys.length; i < il && ndx == -1; i++ ) {\n\n\t\t\tvar key = keys[i];\n\n\t\t\tif ( key.time >= time ) {\n\n\t\t\t\tndx = i;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn ndx;\n\n\t};\n\n\tfunction interpolateKeys ( keys, key, ndx, fullSid ) {\n\n\t\tvar prevKey = getPrevKeyWith( keys, fullSid, ndx ? ndx-1 : 0 ),\n\t\t\tnextKey = getNextKeyWith( keys, fullSid, ndx+1 );\n\n\t\tif ( prevKey && nextKey ) {\n\n\t\t\tvar scale = (key.time - prevKey.time) / (nextKey.time - prevKey.time),\n\t\t\t\tprevTarget = prevKey.getTarget( fullSid ),\n\t\t\t\tnextData = nextKey.getTarget( fullSid ).data,\n\t\t\t\tprevData = prevTarget.data,\n\t\t\t\tdata;\n\n\t\t\tif ( prevTarget.type === 'matrix' ) {\n\n\t\t\t\tdata = prevData;\n\n\t\t\t} else if ( prevData.length ) {\n\n\t\t\t\tdata = [];\n\n\t\t\t\tfor ( var i = 0; i < prevData.length; ++i ) {\n\n\t\t\t\t\tdata[ i ] = prevData[ i ] + ( nextData[ i ] - prevData[ i ] ) * scale;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tdata = prevData + ( nextData - prevData ) * scale;\n\n\t\t\t}\n\n\t\t\tkey.addTarget( fullSid, prevTarget.transform, prevTarget.member, data );\n\n\t\t}\n\n\t};\n\n\t// Get next key with given sid\n\n\tfunction getNextKeyWith( keys, fullSid, ndx ) {\n\n\t\tfor ( ; ndx < keys.length; ndx++ ) {\n\n\t\t\tvar key = keys[ ndx ];\n\n\t\t\tif ( key.hasTarget( fullSid ) ) {\n\n\t\t\t\treturn key;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\t// Get previous key with given sid\n\n\tfunction getPrevKeyWith( keys, fullSid, ndx ) {\n\n\t\tndx = ndx >= 0 ? ndx : ndx + keys.length;\n\n\t\tfor ( ; ndx >= 0; ndx-- ) {\n\n\t\t\tvar key = keys[ ndx ];\n\n\t\t\tif ( key.hasTarget( fullSid ) ) {\n\n\t\t\t\treturn key;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tfunction _Image() {\n\n\t\tthis.id = \"\";\n\t\tthis.init_from = \"\";\n\n\t};\n\n\t_Image.prototype.parse = function(element) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tif ( child.nodeName == 'init_from' ) {\n\n\t\t\t\tthis.init_from = child.textContent;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Controller() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.type = \"\";\n\t\tthis.skin = null;\n\t\tthis.morph = null;\n\n\t};\n\n\tController.prototype.parse = function( element ) {\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.type = \"none\";\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'skin':\n\n\t\t\t\t\tthis.skin = (new Skin()).parse(child);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'morph':\n\n\t\t\t\t\tthis.morph = (new Morph()).parse(child);\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Morph() {\n\n\t\tthis.method = null;\n\t\tthis.source = null;\n\t\tthis.targets = null;\n\t\tthis.weights = null;\n\n\t};\n\n\tMorph.prototype.parse = function( element ) {\n\n\t\tvar sources = {};\n\t\tvar inputs = [];\n\t\tvar i;\n\n\t\tthis.method = element.getAttribute( 'method' );\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\n\n\t\tfor ( i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar source = ( new Source() ).parse( child );\n\t\t\t\t\tsources[ source.id ] = source;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'targets':\n\n\t\t\t\t\tinputs = this.parseInputs( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = 0; i < inputs.length; i ++ ) {\n\n\t\t\tvar input = inputs[ i ];\n\t\t\tvar source = sources[ input.source ];\n\n\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\tcase 'MORPH_TARGET':\n\n\t\t\t\t\tthis.targets = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'MORPH_WEIGHT':\n\n\t\t\t\t\tthis.weights = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tMorph.prototype.parseInputs = function(element) {\n\n\t\tvar inputs = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tinputs.push( (new Input()).parse(child) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn inputs;\n\n\t};\n\n\tfunction Skin() {\n\n\t\tthis.source = \"\";\n\t\tthis.bindShapeMatrix = null;\n\t\tthis.invBindMatrices = [];\n\t\tthis.joints = [];\n\t\tthis.weights = [];\n\n\t};\n\n\tSkin.prototype.parse = function( element ) {\n\n\t\tvar sources = {};\n\t\tvar joints, weights;\n\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\n\t\tthis.invBindMatrices = [];\n\t\tthis.joints = [];\n\t\tthis.weights = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'bind_shape_matrix':\n\n\t\t\t\t\tvar f = _floats(child.textContent);\n\t\t\t\t\tthis.bindShapeMatrix = getConvertedMat4( f );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar src = new Source().parse(child);\n\t\t\t\t\tsources[ src.id ] = src;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'joints':\n\n\t\t\t\t\tjoints = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vertex_weights':\n\n\t\t\t\t\tweights = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.parseJoints( joints, sources );\n\t\tthis.parseWeights( weights, sources );\n\n\t\treturn this;\n\n\t};\n\n\tSkin.prototype.parseJoints = function ( element, sources ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tvar input = ( new Input() ).parse( child );\n\t\t\t\t\tvar source = sources[ input.source ];\n\n\t\t\t\t\tif ( input.semantic == 'JOINT' ) {\n\n\t\t\t\t\t\tthis.joints = source.read();\n\n\t\t\t\t\t} else if ( input.semantic == 'INV_BIND_MATRIX' ) {\n\n\t\t\t\t\t\tthis.invBindMatrices = source.read();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tSkin.prototype.parseWeights = function ( element, sources ) {\n\n\t\tvar v, vcount, inputs = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tinputs.push( ( new Input() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'v':\n\n\t\t\t\t\tv = _ints( child.textContent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vcount':\n\n\t\t\t\t\tvcount = _ints( child.textContent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar index = 0;\n\n\t\tfor ( var i = 0; i < vcount.length; i ++ ) {\n\n\t\t\tvar numBones = vcount[i];\n\t\t\tvar vertex_weights = [];\n\n\t\t\tfor ( var j = 0; j < numBones; j++ ) {\n\n\t\t\t\tvar influence = {};\n\n\t\t\t\tfor ( var k = 0; k < inputs.length; k ++ ) {\n\n\t\t\t\t\tvar input = inputs[ k ];\n\t\t\t\t\tvar value = v[ index + input.offset ];\n\n\t\t\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\t\t\tcase 'JOINT':\n\n\t\t\t\t\t\t\tinfluence.joint = value;//this.joints[value];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'WEIGHT':\n\n\t\t\t\t\t\t\tinfluence.weight = sources[ input.source ].data[ value ];\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvertex_weights.push( influence );\n\t\t\t\tindex += inputs.length;\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < vertex_weights.length; j ++ ) {\n\n\t\t\t\tvertex_weights[ j ].index = i;\n\n\t\t\t}\n\n\t\t\tthis.weights.push( vertex_weights );\n\n\t\t}\n\n\t};\n\n\tfunction VisualScene () {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.nodes = [];\n\t\tthis.scene = new THREE.Object3D();\n\n\t};\n\n\tVisualScene.prototype.getChildById = function( id, recursive ) {\n\n\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\n\n\t\t\tvar node = this.nodes[ i ].getChildById( id, recursive );\n\n\t\t\tif ( node ) {\n\n\t\t\t\treturn node;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tVisualScene.prototype.getChildBySid = function( sid, recursive ) {\n\n\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\n\n\t\t\tvar node = this.nodes[ i ].getChildBySid( sid, recursive );\n\n\t\t\tif ( node ) {\n\n\t\t\t\treturn node;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tVisualScene.prototype.parse = function( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\t\tthis.nodes = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'node':\n\n\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Node() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.sid = \"\";\n\t\tthis.nodes = [];\n\t\tthis.controllers = [];\n\t\tthis.transforms = [];\n\t\tthis.geometries = [];\n\t\tthis.channels = [];\n\t\tthis.matrix = new THREE.Matrix4();\n\n\t};\n\n\tNode.prototype.getChannelForTransform = function( transformSid ) {\n\n\t\tfor ( var i = 0; i < this.channels.length; i ++ ) {\n\n\t\t\tvar channel = this.channels[i];\n\t\t\tvar parts = channel.target.split('/');\n\t\t\tvar id = parts.shift();\n\t\t\tvar sid = parts.shift();\n\t\t\tvar dotSyntax = (sid.indexOf(\".\") >= 0);\n\t\t\tvar arrSyntax = (sid.indexOf(\"(\") >= 0);\n\t\t\tvar arrIndices;\n\t\t\tvar member;\n\n\t\t\tif ( dotSyntax ) {\n\n\t\t\t\tparts = sid.split(\".\");\n\t\t\t\tsid = parts.shift();\n\t\t\t\tmember = parts.shift();\n\n\t\t\t} else if ( arrSyntax ) {\n\n\t\t\t\tarrIndices = sid.split(\"(\");\n\t\t\t\tsid = arrIndices.shift();\n\n\t\t\t\tfor ( var j = 0; j < arrIndices.length; j ++ ) {\n\n\t\t\t\t\tarrIndices[ j ] = parseInt( arrIndices[ j ].replace( /\\)/, '' ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( sid == transformSid ) {\n\n\t\t\t\tchannel.info = { sid: sid, dotSyntax: dotSyntax, arrSyntax: arrSyntax, arrIndices: arrIndices };\n\t\t\t\treturn channel;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tNode.prototype.getChildById = function ( id, recursive ) {\n\n\t\tif ( this.id == id ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( recursive ) {\n\n\t\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\n\n\t\t\t\tvar n = this.nodes[ i ].getChildById( id, recursive );\n\n\t\t\t\tif ( n ) {\n\n\t\t\t\t\treturn n;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tNode.prototype.getChildBySid = function ( sid, recursive ) {\n\n\t\tif ( this.sid == sid ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( recursive ) {\n\n\t\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\n\n\t\t\t\tvar n = this.nodes[ i ].getChildBySid( sid, recursive );\n\n\t\t\t\tif ( n ) {\n\n\t\t\t\t\treturn n;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tNode.prototype.getTransformBySid = function ( sid ) {\n\n\t\tfor ( var i = 0; i < this.transforms.length; i ++ ) {\n\n\t\t\tif ( this.transforms[ i ].sid == sid ) return this.transforms[ i ];\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tNode.prototype.parse = function( element ) {\n\n\t\tvar url;\n\n\t\tthis.id = element.getAttribute('id');\n\t\tthis.sid = element.getAttribute('sid');\n\t\tthis.name = element.getAttribute('name');\n\t\tthis.type = element.getAttribute('type');\n\t\tthis.layer = element.getAttribute('layer');\n\n\t\tthis.type = this.type == 'JOINT' ? this.type : 'NODE';\n\n\t\tthis.nodes = [];\n\t\tthis.transforms = [];\n\t\tthis.geometries = [];\n\t\tthis.cameras = [];\n\t\tthis.lights = [];\n\t\tthis.controllers = [];\n\t\tthis.matrix = new THREE.Matrix4();\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'node':\n\n\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_camera':\n\n\t\t\t\t\tthis.cameras.push( ( new InstanceCamera() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_controller':\n\n\t\t\t\t\tthis.controllers.push( ( new InstanceController() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_geometry':\n\n\t\t\t\t\tthis.geometries.push( ( new InstanceGeometry() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_light':\n\n\t\t\t\t\tthis.lights.push( ( new InstanceLight() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'instance_node':\n\n\t\t\t\t\turl = child.getAttribute( 'url' ).replace( /^#/, '' );\n\t\t\t\t\tvar iNode = getLibraryNode( url );\n\n\t\t\t\t\tif ( iNode ) {\n\n\t\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( iNode )) ;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\t\t\t\tcase 'translate':\n\t\t\t\tcase 'scale':\n\t\t\t\tcase 'matrix':\n\t\t\t\tcase 'lookat':\n\t\t\t\tcase 'skew':\n\n\t\t\t\t\tthis.transforms.push( ( new Transform() ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.channels = getChannelsForNode( this );\n\t\tbakeAnimations( this );\n\n\t\tthis.updateMatrix();\n\n\t\treturn this;\n\n\t};\n\n\tNode.prototype.updateMatrix = function () {\n\n\t\tthis.matrix.identity();\n\n\t\tfor ( var i = 0; i < this.transforms.length; i ++ ) {\n\n\t\t\tthis.transforms[ i ].apply( this.matrix );\n\n\t\t}\n\n\t};\n\n\tfunction Transform () {\n\n\t\tthis.sid = \"\";\n\t\tthis.type = \"\";\n\t\tthis.data = [];\n\t\tthis.obj = null;\n\n\t};\n\n\tTransform.prototype.parse = function ( element ) {\n\n\t\tthis.sid = element.getAttribute( 'sid' );\n\t\tthis.type = element.nodeName;\n\t\tthis.data = _floats( element.textContent );\n\t\tthis.convert();\n\n\t\treturn this;\n\n\t};\n\n\tTransform.prototype.convert = function () {\n\n\t\tswitch ( this.type ) {\n\n\t\t\tcase 'matrix':\n\n\t\t\t\tthis.obj = getConvertedMat4( this.data );\n\t\t\t\tbreak;\n\n\t\t\tcase 'rotate':\n\n\t\t\t\tthis.angle = THREE.Math.degToRad( this.data[3] );\n\n\t\t\tcase 'translate':\n\n\t\t\t\tfixCoords( this.data, -1 );\n\t\t\t\tthis.obj = new THREE.Vector3( this.data[ 0 ], this.data[ 1 ], this.data[ 2 ] );\n\t\t\t\tbreak;\n\n\t\t\tcase 'scale':\n\n\t\t\t\tfixCoords( this.data, 1 );\n\t\t\t\tthis.obj = new THREE.Vector3( this.data[ 0 ], this.data[ 1 ], this.data[ 2 ] );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.log( 'Can not convert Transform of type ' + this.type );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tTransform.prototype.apply = function () {\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function ( matrix ) {\n\n\t\t\tswitch ( this.type ) {\n\n\t\t\t\tcase 'matrix':\n\n\t\t\t\t\tmatrix.multiply( this.obj );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'translate':\n\n\t\t\t\t\tmatrix.multiply( m1.makeTranslation( this.obj.x, this.obj.y, this.obj.z ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rotate':\n\n\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( this.obj, this.angle ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'scale':\n\n\t\t\t\t\tmatrix.scale( this.obj );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tTransform.prototype.update = function ( data, member ) {\n\n\t\tvar members = [ 'X', 'Y', 'Z', 'ANGLE' ];\n\n\t\tswitch ( this.type ) {\n\n\t\t\tcase 'matrix':\n\n\t\t\t\tif ( ! member ) {\n\n\t\t\t\t\tthis.obj.copy( data );\n\n\t\t\t\t} else if ( member.length === 1 ) {\n\n\t\t\t\t\tswitch ( member[ 0 ] ) {\n\n\t\t\t\t\t\tcase 0:\n\n\t\t\t\t\t\t\tthis.obj.n11 = data[ 0 ];\n\t\t\t\t\t\t\tthis.obj.n21 = data[ 1 ];\n\t\t\t\t\t\t\tthis.obj.n31 = data[ 2 ];\n\t\t\t\t\t\t\tthis.obj.n41 = data[ 3 ];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\tthis.obj.n12 = data[ 0 ];\n\t\t\t\t\t\t\tthis.obj.n22 = data[ 1 ];\n\t\t\t\t\t\t\tthis.obj.n32 = data[ 2 ];\n\t\t\t\t\t\t\tthis.obj.n42 = data[ 3 ];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\tthis.obj.n13 = data[ 0 ];\n\t\t\t\t\t\t\tthis.obj.n23 = data[ 1 ];\n\t\t\t\t\t\t\tthis.obj.n33 = data[ 2 ];\n\t\t\t\t\t\t\tthis.obj.n43 = data[ 3 ];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\tthis.obj.n14 = data[ 0 ];\n\t\t\t\t\t\t\tthis.obj.n24 = data[ 1 ];\n\t\t\t\t\t\t\tthis.obj.n34 = data[ 2 ];\n\t\t\t\t\t\t\tthis.obj.n44 = data[ 3 ];\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( member.length === 2 ) {\n\n\t\t\t\t\tvar propName = 'n' + ( member[ 0 ] + 1 ) + ( member[ 1 ] + 1 );\n\t\t\t\t\tthis.obj[ propName ] = data;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log('Incorrect addressing of matrix in transform.');\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'translate':\n\t\t\tcase 'scale':\n\n\t\t\t\tif ( Object.prototype.toString.call( member ) === '[object Array]' ) {\n\n\t\t\t\t\tmember = members[ member[ 0 ] ];\n\n\t\t\t\t}\n\n\t\t\t\tswitch ( member ) {\n\n\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tthis.obj.x = data[ 0 ];\n\t\t\t\t\t\tthis.obj.y = data[ 1 ];\n\t\t\t\t\t\tthis.obj.z = data[ 2 ];\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'rotate':\n\n\t\t\t\tif ( Object.prototype.toString.call( member ) === '[object Array]' ) {\n\n\t\t\t\t\tmember = members[ member[ 0 ] ];\n\n\t\t\t\t}\n\n\t\t\t\tswitch ( member ) {\n\n\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ANGLE':\n\n\t\t\t\t\t\tthis.angle = THREE.Math.degToRad( data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tthis.obj.x = data[ 0 ];\n\t\t\t\t\t\tthis.obj.y = data[ 1 ];\n\t\t\t\t\t\tthis.obj.z = data[ 2 ];\n\t\t\t\t\t\tthis.angle = THREE.Math.degToRad( data[ 3 ] );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction InstanceController() {\n\n\t\tthis.url = \"\";\n\t\tthis.skeleton = [];\n\t\tthis.instance_material = [];\n\n\t};\n\n\tInstanceController.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\tthis.skeleton = [];\n\t\tthis.instance_material = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType !== 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'skeleton':\n\n\t\t\t\t\tthis.skeleton.push( child.textContent.replace(/^#/, '') );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bind_material':\n\t\t\t\n\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\t\t\t\t\t\n\t\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ){\n\n\t\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\t\tthis.instance_material.push( (new InstanceMaterial()).parse(instance) );\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction InstanceMaterial () {\n\n\t\tthis.symbol = \"\";\n\t\tthis.target = \"\";\n\n\t};\n\n\tInstanceMaterial.prototype.parse = function ( element ) {\n\n\t\tthis.symbol = element.getAttribute('symbol');\n\t\tthis.target = element.getAttribute('target').replace(/^#/, '');\n\t\treturn this;\n\n\t};\n\n\tfunction InstanceGeometry() {\n\n\t\tthis.url = \"\";\n\t\tthis.instance_material = [];\n\n\t};\n\n\tInstanceGeometry.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\tthis.instance_material = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tif ( child.nodeName == 'bind_material' ) {\n\n\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\t\t\t\t\t\n\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\n\n\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\tthis.instance_material.push( (new InstanceMaterial()).parse(instance) );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Geometry() {\n\n\t\tthis.id = \"\";\n\t\tthis.mesh = null;\n\n\t};\n\n\tGeometry.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\textractDoubleSided( this, element );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'mesh':\n\n\t\t\t\t\tthis.mesh = (new Mesh(this)).parse(child);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\n\t\t\t\t\t// console.log( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Mesh( geometry ) {\n\n\t\tthis.geometry = geometry.id;\n\t\tthis.primitives = [];\n\t\tthis.vertices = null;\n\t\tthis.geometry3js = null;\n\n\t};\n\n\tMesh.prototype.parse = function( element ) {\n\n\t\tthis.primitives = [];\n\n\t\tvar i, j;\n\n\t\tfor ( i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\t_source( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vertices':\n\n\t\t\t\t\tthis.vertices = ( new Vertices() ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'triangles':\n\n\t\t\t\t\tthis.primitives.push( ( new Triangles().parse( child ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polygons':\n\n\t\t\t\t\tthis.primitives.push( ( new Polygons().parse( child ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polylist':\n\n\t\t\t\t\tthis.primitives.push( ( new Polylist().parse( child ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.geometry3js = new THREE.Geometry();\n\n\t\tvar vertexData = sources[ this.vertices.input['POSITION'].source ].data;\n\n\t\tfor ( i = 0; i < vertexData.length; i += 3 ) {\n\n\t\t\tthis.geometry3js.vertices.push( getConvertedVec3( vertexData, i ).clone() );\n\n\t\t}\n\n\t\tfor ( i = 0; i < this.primitives.length; i ++ ) {\n\n\t\t\tvar primitive = this.primitives[ i ];\n\t\t\tprimitive.setVertices( this.vertices );\n\t\t\tthis.handlePrimitive( primitive, this.geometry3js );\n\n\t\t}\n\n\t\tthis.geometry3js.computeCentroids();\n\t\tthis.geometry3js.computeFaceNormals();\n\n\t\tif ( this.geometry3js.calcNormals ) {\n\n\t\t\tthis.geometry3js.computeVertexNormals();\n\t\t\tdelete this.geometry3js.calcNormals;\n\n\t\t}\n\n\t\t// this.geometry3js.computeBoundingBox();\n\n\t\treturn this;\n\n\t};\n\n\tMesh.prototype.handlePrimitive = function( primitive, geom ) {\n\n\t\tvar j, k, pList = primitive.p, inputs = primitive.inputs;\n\t\tvar input, index, idx32;\n\t\tvar source, numParams;\n\t\tvar vcIndex = 0, vcount = 3, maxOffset = 0;\n\t\tvar texture_sets = [];\n\t\t\n\t\tfor ( j = 0; j < inputs.length; j ++ ) {\n\n\t\t\tinput = inputs[ j ];\n\n\t\t\tvar offset = input.offset + 1;\n\t\t\tmaxOffset = (maxOffset < offset)? offset : maxOffset;\n\n\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\ttexture_sets.push( input.set );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var pCount = 0; pCount < pList.length; ++pCount ) {\n\n\t\t\tvar p = pList[ pCount ], i = 0;\n\n\t\t\twhile ( i < p.length ) {\n\n\t\t\t\tvar vs = [];\n\t\t\t\tvar ns = [];\n\t\t\t\tvar ts = null;\n\t\t\t\tvar cs = [];\n\n\t\t\t\tif ( primitive.vcount ) {\n\n\t\t\t\t\tvcount = primitive.vcount.length ? primitive.vcount[ vcIndex ++ ] : primitive.vcount;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvcount = p.length / maxOffset;\n\n\t\t\t\t}\n\n\n\t\t\t\tfor ( j = 0; j < vcount; j ++ ) {\n\n\t\t\t\t\tfor ( k = 0; k < inputs.length; k ++ ) {\n\n\t\t\t\t\t\tinput = inputs[ k ];\n\t\t\t\t\t\tsource = sources[ input.source ];\n\n\t\t\t\t\t\tindex = p[ i + ( j * maxOffset ) + input.offset ];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\t\t\t\t\t\tidx32 = index * numParams;\n\n\t\t\t\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\t\t\t\tcase 'VERTEX':\n\n\t\t\t\t\t\t\t\tvs.push( index );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'NORMAL':\n\n\t\t\t\t\t\t\t\tns.push( getConvertedVec3( source.data, idx32 ) );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'TEXCOORD':\n\n\t\t\t\t\t\t\t\tts = ts || { };\n\t\t\t\t\t\t\t\tif ( ts[ input.set ] === undefined ) ts[ input.set ] = [];\n\t\t\t\t\t\t\t\t// invert the V\n\t\t\t\t\t\t\t\tts[ input.set ].push( new THREE.Vector2( source.data[ idx32 ], source.data[ idx32 + 1 ] ) );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'COLOR':\n\n\t\t\t\t\t\t\t\tcs.push( new THREE.Color().setRGB( source.data[ idx32 ], source.data[ idx32 + 1 ], source.data[ idx32 + 2 ] ) );\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ns.length == 0 ) {\n\n\t\t\t\t\t// check the vertices inputs\n\t\t\t\t\tinput = this.vertices.input.NORMAL;\n\n\t\t\t\t\tif ( input ) {\n\n\t\t\t\t\t\tsource = sources[ input.source ];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx++ ) {\n\n\t\t\t\t\t\t\tns.push( getConvertedVec3( source.data, vs[ ndx ] * numParams ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgeom.calcNormals = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( !ts ) {\n\n\t\t\t\t\tts = { };\n\t\t\t\t\t// check the vertices inputs\n\t\t\t\t\tinput = this.vertices.input.TEXCOORD;\n\n\t\t\t\t\tif ( input ) {\n\n\t\t\t\t\t\ttexture_sets.push( input.set );\n\t\t\t\t\t\tsource = sources[ input.source ];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx++ ) {\n\n\t\t\t\t\t\t\tidx32 = vs[ ndx ] * numParams;\n\t\t\t\t\t\t\tif ( ts[ input.set ] === undefined ) ts[ input.set ] = [ ];\n\t\t\t\t\t\t\t// invert the V\n\t\t\t\t\t\t\tts[ input.set ].push( new THREE.Vector2( source.data[ idx32 ], 1.0 - source.data[ idx32 + 1 ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( cs.length == 0 ) {\n\n\t\t\t\t\t// check the vertices inputs\n\t\t\t\t\tinput = this.vertices.input.COLOR;\n\n\t\t\t\t\tif ( input ) {\n\n\t\t\t\t\t\tsource = sources[ input.source ];\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx++ ) {\n\n\t\t\t\t\t\t\tidx32 = vs[ ndx ] * numParams;\n\t\t\t\t\t\t\tcs.push( new THREE.Color().setRGB( source.data[ idx32 ], source.data[ idx32 + 1 ], source.data[ idx32 + 2 ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar face = null, faces = [], uv, uvArr;\n\n\t\t\t\tif ( vcount === 3 ) {\n\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[1], vs[2], ns, cs.length ? cs : new THREE.Color() ) );\n\n\t\t\t\t} else if ( vcount === 4 ) {\n\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[1], vs[3], [ns[0], ns[1], ns[3]], cs.length ? [cs[0], cs[1], cs[3]] : new THREE.Color() ) );\n\t\t\t\t\t\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[1], vs[2], vs[3], [ns[1], ns[2], ns[3]], cs.length ? [cs[1], cs[2], cs[3]] : new THREE.Color() ) );\n\n\t\t\t\t} else if ( vcount > 4 && options.subdivideFaces ) {\n\n\t\t\t\t\tvar clr = cs.length ? cs : new THREE.Color(),\n\t\t\t\t\t\tvec1, vec2, vec3, v1, v2, norm;\n\n\t\t\t\t\t// subdivide into multiple Face3s\n\n\t\t\t\t\tfor ( k = 1; k < vcount - 1; ) {\n\n\t\t\t\t\t\t// FIXME: normals don't seem to be quite right\n\n\t\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[k], vs[k+1], [ ns[0], ns[k++], ns[k] ],  clr ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( faces.length ) {\n\n\t\t\t\t\tfor ( var ndx = 0, len = faces.length; ndx < len; ndx ++ ) {\n\n\t\t\t\t\t\tface = faces[ndx];\n\t\t\t\t\t\tface.daeMaterial = primitive.material;\n\t\t\t\t\t\tgeom.faces.push( face );\n\n\t\t\t\t\t\tfor ( k = 0; k < texture_sets.length; k++ ) {\n\n\t\t\t\t\t\t\tuv = ts[ texture_sets[k] ];\n\n\t\t\t\t\t\t\tif ( vcount > 4 ) {\n\n\t\t\t\t\t\t\t\t// Grab the right UVs for the vertices in this face\n\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[ndx+1], uv[ndx+2] ];\n\n\t\t\t\t\t\t\t} else if ( vcount === 4 ) {\n\n\t\t\t\t\t\t\t\tif ( ndx === 0 ) {\n\n\t\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[1], uv[3] ];\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tuvArr = [ uv[1].clone(), uv[2], uv[3].clone() ];\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[1], uv[2] ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( geom.faceVertexUvs[k] === undefined ) {\n\n\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k] = [];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tgeom.faceVertexUvs[k].push( uvArr );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log( 'dropped face with vcount ' + vcount + ' for geometry with id: ' + geom.id );\n\n\t\t\t\t}\n\n\t\t\t\ti += maxOffset * vcount;\n\n\t\t\t}\n\t\t}\n\n\t};\n\n\tfunction Polygons () {\n\n\t\tthis.material = \"\";\n\t\tthis.count = 0;\n\t\tthis.inputs = [];\n\t\tthis.vcount = null;\n\t\tthis.p = [];\n\t\tthis.geometry = new THREE.Geometry();\n\n\t};\n\n\tPolygons.prototype.setVertices = function ( vertices ) {\n\n\t\tfor ( var i = 0; i < this.inputs.length; i ++ ) {\n\n\t\t\tif ( this.inputs[ i ].source == vertices.id ) {\n\n\t\t\t\tthis.inputs[ i ].source = vertices.input[ 'POSITION' ].source;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tPolygons.prototype.parse = function ( element ) {\n\n\t\tthis.material = element.getAttribute( 'material' );\n\t\tthis.count = _attr_as_int( element, 'count', 0 );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tthis.inputs.push( ( new Input() ).parse( element.childNodes[ i ] ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vcount':\n\n\t\t\t\t\tthis.vcount = _ints( child.textContent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'p':\n\n\t\t\t\t\tthis.p.push( _ints( child.textContent ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ph':\n\n\t\t\t\t\tconsole.warn( 'polygon holes not yet supported!' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Polylist () {\n\n\t\tPolygons.call( this );\n\n\t\tthis.vcount = [];\n\n\t};\n\n\tPolylist.prototype = Object.create( Polygons.prototype );\n\n\tfunction Triangles () {\n\n\t\tPolygons.call( this );\n\n\t\tthis.vcount = 3;\n\n\t};\n\n\tTriangles.prototype = Object.create( Polygons.prototype );\n\n\tfunction Accessor() {\n\n\t\tthis.source = \"\";\n\t\tthis.count = 0;\n\t\tthis.stride = 0;\n\t\tthis.params = [];\n\n\t};\n\n\tAccessor.prototype.parse = function ( element ) {\n\n\t\tthis.params = [];\n\t\tthis.source = element.getAttribute( 'source' );\n\t\tthis.count = _attr_as_int( element, 'count', 0 );\n\t\tthis.stride = _attr_as_int( element, 'stride', 0 );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tif ( child.nodeName == 'param' ) {\n\n\t\t\t\tvar param = {};\n\t\t\t\tparam[ 'name' ] = child.getAttribute( 'name' );\n\t\t\t\tparam[ 'type' ] = child.getAttribute( 'type' );\n\t\t\t\tthis.params.push( param );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Vertices() {\n\n\t\tthis.input = {};\n\n\t};\n\n\tVertices.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute('id');\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tif ( element.childNodes[i].nodeName == 'input' ) {\n\n\t\t\t\tvar input = ( new Input() ).parse( element.childNodes[ i ] );\n\t\t\t\tthis.input[ input.semantic ] = input;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Input () {\n\n\t\tthis.semantic = \"\";\n\t\tthis.offset = 0;\n\t\tthis.source = \"\";\n\t\tthis.set = 0;\n\n\t};\n\n\tInput.prototype.parse = function ( element ) {\n\n\t\tthis.semantic = element.getAttribute('semantic');\n\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\tthis.set = _attr_as_int(element, 'set', -1);\n\t\tthis.offset = _attr_as_int(element, 'offset', 0);\n\n\t\tif ( this.semantic == 'TEXCOORD' && this.set < 0 ) {\n\n\t\t\tthis.set = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Source ( id ) {\n\n\t\tthis.id = id;\n\t\tthis.type = null;\n\n\t};\n\n\tSource.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'bool_array':\n\n\t\t\t\t\tthis.data = _bools( child.textContent );\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'float_array':\n\n\t\t\t\t\tthis.data = _floats( child.textContent );\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'int_array':\n\n\t\t\t\t\tthis.data = _ints( child.textContent );\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'IDREF_array':\n\t\t\t\tcase 'Name_array':\n\n\t\t\t\t\tthis.data = _strings( child.textContent );\n\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\tfor ( var j = 0; j < child.childNodes.length; j ++ ) {\n\n\t\t\t\t\t\tif ( child.childNodes[ j ].nodeName == 'accessor' ) {\n\n\t\t\t\t\t\t\tthis.accessor = ( new Accessor() ).parse( child.childNodes[ j ] );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// console.log(child.nodeName);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tSource.prototype.read = function () {\n\n\t\tvar result = [];\n\n\t\t//for (var i = 0; i < this.accessor.params.length; i++) {\n\n\t\t\tvar param = this.accessor.params[ 0 ];\n\n\t\t\t//console.log(param.name + \" \" + param.type);\n\n\t\t\tswitch ( param.type ) {\n\n\t\t\t\tcase 'IDREF':\n\t\t\t\tcase 'Name': case 'name':\n\t\t\t\tcase 'float':\n\n\t\t\t\t\treturn this.data;\n\n\t\t\t\tcase 'float4x4':\n\n\t\t\t\t\tfor ( var j = 0; j < this.data.length; j += 16 ) {\n\n\t\t\t\t\t\tvar s = this.data.slice( j, j + 16 );\n\t\t\t\t\t\tvar m = getConvertedMat4( s );\n\t\t\t\t\t\tresult.push( m );\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( 'ColladaLoader: Source: Read dont know how to read ' + param.type + '.' );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t//}\n\n\t\treturn result;\n\n\t};\n\n\tfunction Material () {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.instance_effect = null;\n\n\t};\n\n\tMaterial.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tif ( element.childNodes[ i ].nodeName == 'instance_effect' ) {\n\n\t\t\t\tthis.instance_effect = ( new InstanceEffect() ).parse( element.childNodes[ i ] );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction ColorOrTexture () {\n\n\t\tthis.color = new THREE.Color();\n\t\tthis.color.setRGB( Math.random(), Math.random(), Math.random() );\n\t\tthis.color.a = 1.0;\n\n\t\tthis.texture = null;\n\t\tthis.texcoord = null;\n\t\tthis.texOpts = null;\n\n\t};\n\n\tColorOrTexture.prototype.isColor = function () {\n\n\t\treturn ( this.texture == null );\n\n\t};\n\n\tColorOrTexture.prototype.isTexture = function () {\n\n\t\treturn ( this.texture != null );\n\n\t};\n\n\tColorOrTexture.prototype.parse = function ( element ) {\n\n\t\tif (element.nodeName == 'transparent') {\n\n\t\t\tthis.opaque = element.getAttribute('opaque');\n\n\t\t}\n\t\t\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'color':\n\n\t\t\t\t\tvar rgba = _floats( child.textContent );\n\t\t\t\t\tthis.color = new THREE.Color();\n\t\t\t\t\tthis.color.setRGB( rgba[0], rgba[1], rgba[2] );\n\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\n\t\t\t\t\tthis.texture = child.getAttribute('texture');\n\t\t\t\t\tthis.texcoord = child.getAttribute('texcoord');\n\t\t\t\t\t// Defaults from:\n\t\t\t\t\t// https://collada.org/mediawiki/index.php/Maya_texture_placement_MAYA_extension\n\t\t\t\t\tthis.texOpts = {\n\t\t\t\t\t\toffsetU: 0,\n\t\t\t\t\t\toffsetV: 0,\n\t\t\t\t\t\trepeatU: 1,\n\t\t\t\t\t\trepeatV: 1,\n\t\t\t\t\t\twrapU: 1,\n\t\t\t\t\t\twrapV: 1\n\t\t\t\t\t};\n\t\t\t\t\tthis.parseTexture( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tColorOrTexture.prototype.parseTexture = function ( element ) {\n\n\t\tif ( ! element.childNodes ) return this;\n\n\t\t// This should be supported by Maya, 3dsMax, and MotionBuilder\n\n\t\tif ( element.childNodes[1] && element.childNodes[1].nodeName === 'extra' ) {\n\n\t\t\telement = element.childNodes[1];\n\n\t\t\tif ( element.childNodes[1] && element.childNodes[1].nodeName === 'technique' ) {\n\n\t\t\t\telement = element.childNodes[1];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'offsetU':\n\t\t\t\tcase 'offsetV':\n\t\t\t\tcase 'repeatU':\n\t\t\t\tcase 'repeatV':\n\n\t\t\t\t\tthis.texOpts[ child.nodeName ] = parseFloat( child.textContent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrapU':\n\t\t\t\tcase 'wrapV':\n\t\t\t\t\t\n\t\t\t\t\t// some dae have a value of true which becomes NaN via parseInt\n\n\t\t\t\t\tif ( child.textContent.toUpperCase() === 'TRUE' ) {\n\t\t\t\t\t\n\t\t\t\t\t\tthis.texOpts[ child.nodeName ] = 1;\n\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\t\tthis.texOpts[ child.nodeName ] = parseInt( child.textContent );\n\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.texOpts[ child.nodeName ] = child.textContent;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Shader ( type, effect ) {\n\n\t\tthis.type = type;\n\t\tthis.effect = effect;\n\t\tthis.material = null;\n\n\t};\n\n\tShader.prototype.parse = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'ambient':\n\t\t\t\tcase 'emission':\n\t\t\t\tcase 'diffuse':\n\t\t\t\tcase 'specular':\n\t\t\t\tcase 'transparent':\n\n\t\t\t\t\tthis[ child.nodeName ] = ( new ColorOrTexture() ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'shininess':\n\t\t\t\tcase 'reflectivity':\n\t\t\t\tcase 'index_of_refraction':\n\t\t\t\tcase 'transparency':\n\n\t\t\t\t\tvar f = child.querySelectorAll('float');\n\n\t\t\t\t\tif ( f.length > 0 )\n\t\t\t\t\t\tthis[ child.nodeName ] = parseFloat( f[ 0 ].textContent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.create();\n\t\treturn this;\n\n\t};\n\n\tShader.prototype.create = function() {\n\n\t\tvar props = {};\n\n\t\tvar transparent = false;\n\n\t\tif (this['transparency'] !== undefined && this['transparent'] !== undefined) {\n\t\t\t// convert transparent color RBG to average value\n\t\t\tvar transparentColor = this['transparent'];\n\t\t\tvar transparencyLevel = (this.transparent.color.r +\n\t\t\t\t\t\t\t\t\t\tthis.transparent.color.g + \n\t\t\t\t\t\t\t\t\t\tthis.transparent.color.b)\n\t\t\t\t\t\t\t\t\t\t/ 3 * this.transparency;\n\t\t\t\n\t\t\tif (transparencyLevel > 0) {\n\t\t\t\ttransparent = true;\n\t\t\t\tprops[ 'transparent' ] = true;\n\t\t\t\tprops[ 'opacity' ] = 1 - transparencyLevel;\n\n\t\t\t}\n\n\t\t}\n\t\t\n\t\tfor ( var prop in this ) {\n\n\t\t\tswitch ( prop ) {\n\n\t\t\t\tcase 'ambient':\n\t\t\t\tcase 'emission':\n\t\t\t\tcase 'diffuse':\n\t\t\t\tcase 'specular':\n\n\t\t\t\t\tvar cot = this[ prop ];\n\n\t\t\t\t\tif ( cot instanceof ColorOrTexture ) {\n\n\t\t\t\t\t\tif ( cot.isTexture() ) {\n\n\t\t\t\t\t\t\tvar samplerId = cot.texture;\n\t\t\t\t\t\t\tvar surfaceId = this.effect.sampler[samplerId];\n\n\t\t\t\t\t\t\tif ( surfaceId !== undefined && surfaceId.source !== undefined ) {\n\n\t\t\t\t\t\t\t\tvar surface = this.effect.surface[surfaceId.source];\n\t\t\t\t\t\t\t\tvar image = images[surface.init_from];\n\n\t\t\t\t\t\t\t\tif (image) {\n\n\t\t\t\t\t\t\t\t\tvar texture = THREE.ImageUtils.loadTexture(baseUrl + image.init_from);\n\t\t\t\t\t\t\t\t\ttexture.wrapS = cot.texOpts.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\t\t\t\t\t\t\t\t\ttexture.wrapT = cot.texOpts.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\t\t\t\t\t\t\t\t\ttexture.offset.x = cot.texOpts.offsetU;\n\t\t\t\t\t\t\t\t\ttexture.offset.y = cot.texOpts.offsetV;\n\t\t\t\t\t\t\t\t\ttexture.repeat.x = cot.texOpts.repeatU;\n\t\t\t\t\t\t\t\t\ttexture.repeat.y = cot.texOpts.repeatV;\n\t\t\t\t\t\t\t\t\tprops['map'] = texture;\n\n\t\t\t\t\t\t\t\t\t// Texture with baked lighting?\n\t\t\t\t\t\t\t\t\tif (prop === 'emission') props['emissive'] = 0xffffff;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( prop === 'diffuse' || !transparent ) {\n\n\t\t\t\t\t\t\tif ( prop === 'emission' ) {\n\n\t\t\t\t\t\t\t\tprops[ 'emissive' ] = cot.color.getHex();\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tprops[ prop ] = cot.color.getHex();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'shininess':\n\n\t\t\t\t\tprops[ prop ] = this[ prop ];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'reflectivity':\n\n\t\t\t\t\tprops[ prop ] = this[ prop ];\n\t\t\t\t\tif( props[ prop ] > 0.0 ) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\tprops['combine'] = THREE.MixOperation;\t//mix regular shading with reflective component\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'index_of_refraction':\n\n\t\t\t\t\tprops[ 'refractionRatio' ] = this[ prop ]; //TODO: \"index_of_refraction\" becomes \"refractionRatio\" in shader, but I'm not sure if the two are actually comparable\n\t\t\t\t\tif ( this[ prop ] !== 1.0 ) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'transparency':\n\t\t\t\t\t// gets figured out up top\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tprops[ 'shading' ] = preferredShading;\n\t\tprops[ 'side' ] = this.effect.doubleSided ? THREE.DoubleSide : THREE.FrontSide;\n\n\t\tswitch ( this.type ) {\n\n\t\t\tcase 'constant':\n\n\t\t\t\tif (props.emissive != undefined) props.color = props.emissive;\n\t\t\t\tthis.material = new THREE.MeshBasicMaterial( props );\n\t\t\t\tbreak;\n\n\t\t\tcase 'phong':\n\t\t\tcase 'blinn':\n\n\t\t\t\tif (props.diffuse != undefined) props.color = props.diffuse;\n\t\t\t\tthis.material = new THREE.MeshPhongMaterial( props );\n\t\t\t\tbreak;\n\n\t\t\tcase 'lambert':\n\t\t\tdefault:\n\n\t\t\t\tif (props.diffuse != undefined) props.color = props.diffuse;\n\t\t\t\tthis.material = new THREE.MeshLambertMaterial( props );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\treturn this.material;\n\n\t};\n\n\tfunction Surface ( effect ) {\n\n\t\tthis.effect = effect;\n\t\tthis.init_from = null;\n\t\tthis.format = null;\n\n\t};\n\n\tSurface.prototype.parse = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'init_from':\n\n\t\t\t\t\tthis.init_from = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'format':\n\n\t\t\t\t\tthis.format = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( \"unhandled Surface prop: \" + child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Sampler2D ( effect ) {\n\n\t\tthis.effect = effect;\n\t\tthis.source = null;\n\t\tthis.wrap_s = null;\n\t\tthis.wrap_t = null;\n\t\tthis.minfilter = null;\n\t\tthis.magfilter = null;\n\t\tthis.mipfilter = null;\n\n\t};\n\n\tSampler2D.prototype.parse = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tthis.source = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'minfilter':\n\n\t\t\t\t\tthis.minfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'magfilter':\n\n\t\t\t\t\tthis.magfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mipfilter':\n\n\t\t\t\t\tthis.mipfilter = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrap_s':\n\n\t\t\t\t\tthis.wrap_s = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'wrap_t':\n\n\t\t\t\t\tthis.wrap_t = child.textContent;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( \"unhandled Sampler2D prop: \" + child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Effect () {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.shader = null;\n\t\tthis.surface = {};\n\t\tthis.sampler = {};\n\n\t};\n\n\tEffect.prototype.create = function () {\n\n\t\tif ( this.shader == null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\tEffect.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\n\t\textractDoubleSided( this, element );\n\n\t\tthis.shader = null;\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\tthis.parseTechnique( this.parseProfileCOMMON( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tEffect.prototype.parseNewparam = function ( element ) {\n\n\t\tvar sid = element.getAttribute( 'sid' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'surface':\n\n\t\t\t\t\tthis.surface[sid] = ( new Surface( this ) ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sampler2D':\n\n\t\t\t\t\tthis.sampler[sid] = ( new Sampler2D( this ) ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tEffect.prototype.parseProfileCOMMON = function ( element ) {\n\n\t\tvar technique;\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\tthis.parseProfileCOMMON( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique':\n\n\t\t\t\t\ttechnique = child;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'newparam':\n\n\t\t\t\t\tthis.parseNewparam( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'image':\n\n\t\t\t\t\tvar _image = ( new _Image() ).parse( child );\n\t\t\t\t\timages[ _image.id ] = _image;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'extra':\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log( child.nodeName );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn technique;\n\n\t};\n\n\tEffect.prototype.parseTechnique= function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[i];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'constant':\n\t\t\t\tcase 'lambert':\n\t\t\t\tcase 'blinn':\n\t\t\t\tcase 'phong':\n\n\t\t\t\t\tthis.shader = ( new Shader( child.nodeName, this ) ).parse( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction InstanceEffect () {\n\n\t\tthis.url = \"\";\n\n\t};\n\n\tInstanceEffect.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute( 'url' ).replace( /^#/, '' );\n\t\treturn this;\n\n\t};\n\n\tfunction Animation() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.source = {};\n\t\tthis.sampler = [];\n\t\tthis.channel = [];\n\n\t};\n\n\tAnimation.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\t\tthis.source = {};\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'animation':\n\n\t\t\t\t\tvar anim = ( new Animation() ).parse( child );\n\n\t\t\t\t\tfor ( var src in anim.source ) {\n\n\t\t\t\t\t\tthis.source[ src ] = anim.source[ src ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var j = 0; j < anim.channel.length; j ++ ) {\n\n\t\t\t\t\t\tthis.channel.push( anim.channel[ j ] );\n\t\t\t\t\t\tthis.sampler.push( anim.sampler[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'source':\n\n\t\t\t\t\tvar src = ( new Source() ).parse( child );\n\t\t\t\t\tthis.source[ src.id ] = src;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sampler':\n\n\t\t\t\t\tthis.sampler.push( ( new Sampler( this ) ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'channel':\n\n\t\t\t\t\tthis.channel.push( ( new Channel( this ) ).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction Channel( animation ) {\n\n\t\tthis.animation = animation;\n\t\tthis.source = \"\";\n\t\tthis.target = \"\";\n\t\tthis.fullSid = null;\n\t\tthis.sid = null;\n\t\tthis.dotSyntax = null;\n\t\tthis.arrSyntax = null;\n\t\tthis.arrIndices = null;\n\t\tthis.member = null;\n\n\t};\n\n\tChannel.prototype.parse = function ( element ) {\n\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\n\t\tthis.target = element.getAttribute( 'target' );\n\n\t\tvar parts = this.target.split( '/' );\n\n\t\tvar id = parts.shift();\n\t\tvar sid = parts.shift();\n\n\t\tvar dotSyntax = ( sid.indexOf(\".\") >= 0 );\n\t\tvar arrSyntax = ( sid.indexOf(\"(\") >= 0 );\n\n\t\tif ( dotSyntax ) {\n\n\t\t\tparts = sid.split(\".\");\n\t\t\tthis.sid = parts.shift();\n\t\t\tthis.member = parts.shift();\n\n\t\t} else if ( arrSyntax ) {\n\n\t\t\tvar arrIndices = sid.split(\"(\");\n\t\t\tthis.sid = arrIndices.shift();\n\n\t\t\tfor (var j = 0; j < arrIndices.length; j ++ ) {\n\n\t\t\t\tarrIndices[j] = parseInt( arrIndices[j].replace(/\\)/, '') );\n\n\t\t\t}\n\n\t\t\tthis.arrIndices = arrIndices;\n\n\t\t} else {\n\n\t\t\tthis.sid = sid;\n\n\t\t}\n\n\t\tthis.fullSid = sid;\n\t\tthis.dotSyntax = dotSyntax;\n\t\tthis.arrSyntax = arrSyntax;\n\n\t\treturn this;\n\n\t};\n\n\tfunction Sampler ( animation ) {\n\n\t\tthis.id = \"\";\n\t\tthis.animation = animation;\n\t\tthis.inputs = [];\n\t\tthis.input = null;\n\t\tthis.output = null;\n\t\tthis.strideOut = null;\n\t\tthis.interpolation = null;\n\t\tthis.startTime = null;\n\t\tthis.endTime = null;\n\t\tthis.duration = 0;\n\n\t};\n\n\tSampler.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.inputs = [];\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'input':\n\n\t\t\t\t\tthis.inputs.push( (new Input()).parse( child ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tSampler.prototype.create = function () {\n\n\t\tfor ( var i = 0; i < this.inputs.length; i ++ ) {\n\n\t\t\tvar input = this.inputs[ i ];\n\t\t\tvar source = this.animation.source[ input.source ];\n\n\t\t\tswitch ( input.semantic ) {\n\n\t\t\t\tcase 'INPUT':\n\n\t\t\t\t\tthis.input = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OUTPUT':\n\n\t\t\t\t\tthis.output = source.read();\n\t\t\t\t\tthis.strideOut = source.accessor.stride;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'INTERPOLATION':\n\n\t\t\t\t\tthis.interpolation = source.read();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'IN_TANGENT':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OUT_TANGENT':\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.log(input.semantic);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.startTime = 0;\n\t\tthis.endTime = 0;\n\t\tthis.duration = 0;\n\n\t\tif ( this.input.length ) {\n\n\t\t\tthis.startTime = 100000000;\n\t\t\tthis.endTime = -100000000;\n\n\t\t\tfor ( var i = 0; i < this.input.length; i ++ ) {\n\n\t\t\t\tthis.startTime = Math.min( this.startTime, this.input[ i ] );\n\t\t\t\tthis.endTime = Math.max( this.endTime, this.input[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.duration = this.endTime - this.startTime;\n\n\t\t}\n\n\t};\n\n\tSampler.prototype.getData = function ( type, ndx ) {\n\n\t\tvar data;\n\n\t\tif ( type === 'matrix' && this.strideOut === 16 ) {\n\n\t\t\tdata = this.output[ ndx ];\n\n\t\t} else if ( this.strideOut > 1 ) {\n\n\t\t\tdata = [];\n\t\t\tndx *= this.strideOut;\n\n\t\t\tfor ( var i = 0; i < this.strideOut; ++i ) {\n\n\t\t\t\tdata[ i ] = this.output[ ndx + i ];\n\n\t\t\t}\n\n\t\t\tif ( this.strideOut === 3 ) {\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'rotate':\n\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\tfixCoords( data, -1 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\tfixCoords( data, 1 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( this.strideOut === 4 && type === 'matrix' ) {\n\n\t\t\t\tfixCoords( data, -1 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdata = this.output[ ndx ];\n\n\t\t}\n\n\t\treturn data;\n\n\t};\n\n\tfunction Key ( time ) {\n\n\t\tthis.targets = [];\n\t\tthis.time = time;\n\n\t};\n\n\tKey.prototype.addTarget = function ( fullSid, transform, member, data ) {\n\n\t\tthis.targets.push( {\n\t\t\tsid: fullSid,\n\t\t\tmember: member,\n\t\t\ttransform: transform,\n\t\t\tdata: data\n\t\t} );\n\n\t};\n\n\tKey.prototype.apply = function ( opt_sid ) {\n\n\t\tfor ( var i = 0; i < this.targets.length; ++i ) {\n\n\t\t\tvar target = this.targets[ i ];\n\n\t\t\tif ( !opt_sid || target.sid === opt_sid ) {\n\n\t\t\t\ttarget.transform.update( target.data, target.member );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tKey.prototype.getTarget = function ( fullSid ) {\n\n\t\tfor ( var i = 0; i < this.targets.length; ++i ) {\n\n\t\t\tif ( this.targets[ i ].sid === fullSid ) {\n\n\t\t\t\treturn this.targets[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tKey.prototype.hasTarget = function ( fullSid ) {\n\n\t\tfor ( var i = 0; i < this.targets.length; ++i ) {\n\n\t\t\tif ( this.targets[ i ].sid === fullSid ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n\t// TODO: Currently only doing linear interpolation. Should support full COLLADA spec.\n\tKey.prototype.interpolate = function ( nextKey, time ) {\n\n\t\tfor ( var i = 0; i < this.targets.length; ++i ) {\n\n\t\t\tvar target = this.targets[ i ],\n\t\t\t\tnextTarget = nextKey.getTarget( target.sid ),\n\t\t\t\tdata;\n\n\t\t\tif ( target.transform.type !== 'matrix' && nextTarget ) {\n\n\t\t\t\tvar scale = ( time - this.time ) / ( nextKey.time - this.time ),\n\t\t\t\t\tnextData = nextTarget.data,\n\t\t\t\t\tprevData = target.data;\n\n\t\t\t\t// check scale error\n\n\t\t\t\tif ( scale < 0 || scale > 1 ) {\n\n\t\t\t\t\tconsole.log( \"Key.interpolate: Warning! Scale out of bounds:\" + scale );\n\t\t\t\t\tscale = scale < 0 ? 0 : 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( prevData.length ) {\n\n\t\t\t\t\tdata = [];\n\n\t\t\t\t\tfor ( var j = 0; j < prevData.length; ++j ) {\n\n\t\t\t\t\t\tdata[ j ] = prevData[ j ] + ( nextData[ j ] - prevData[ j ] ) * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdata = prevData + ( nextData - prevData ) * scale;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tdata = target.data;\n\n\t\t\t}\n\n\t\t\ttarget.transform.update( data, target.member );\n\n\t\t}\n\n\t};\n\n\t// Camera\n\tfunction Camera() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.technique = \"\";\n\n\t};\n\n\tCamera.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'optics':\n\n\t\t\t\t\tthis.parseOptics( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tCamera.prototype.parseOptics = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tif ( element.childNodes[ i ].nodeName == 'technique_common' ) {\n\n\t\t\t\tvar technique = element.childNodes[ i ];\n\n\t\t\t\tfor ( var j = 0; j < technique.childNodes.length; j ++ ) {\n\n\t\t\t\t\tthis.technique = technique.childNodes[ j ].nodeName;\n\n\t\t\t\t\tif ( this.technique == 'perspective' ) {\n\n\t\t\t\t\t\tvar perspective = technique.childNodes[ j ];\n\n\t\t\t\t\t\tfor ( var k = 0; k < perspective.childNodes.length; k ++ ) {\n\n\t\t\t\t\t\t\tvar param = perspective.childNodes[ k ];\n\n\t\t\t\t\t\t\tswitch ( param.nodeName ) {\n\n\t\t\t\t\t\t\t\tcase 'yfov':\n\t\t\t\t\t\t\t\t\tthis.yfov = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'xfov':\n\t\t\t\t\t\t\t\t\tthis.xfov = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( this.technique == 'orthographic' ) {\n\n\t\t\t\t\t\tvar orthographic = technique.childNodes[ j ];\n\n\t\t\t\t\t\tfor ( var k = 0; k < orthographic.childNodes.length; k ++ ) {\n\n\t\t\t\t\t\t\tvar param = orthographic.childNodes[ k ];\n\n\t\t\t\t\t\t\tswitch ( param.nodeName ) {\n\n\t\t\t\t\t\t\t\tcase 'xmag':\n\t\t\t\t\t\t\t\t\tthis.xmag = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'ymag':\n\t\t\t\t\t\t\t\t\tthis.ymag = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction InstanceCamera() {\n\n\t\tthis.url = \"\";\n\n\t};\n\n\tInstanceCamera.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\treturn this;\n\n\t};\n\n\t// Light\n\n\tfunction Light() {\n\n\t\tthis.id = \"\";\n\t\tthis.name = \"\";\n\t\tthis.technique = \"\";\n\n\t};\n\n\tLight.prototype.parse = function ( element ) {\n\n\t\tthis.id = element.getAttribute( 'id' );\n\t\tthis.name = element.getAttribute( 'name' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\t\t\tif ( child.nodeType != 1 ) continue;\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\tthis.parseCommon( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'technique':\n\n\t\t\t\t\tthis.parseTechnique( child );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tLight.prototype.parseCommon = function ( element ) {\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tswitch ( element.childNodes[ i ].nodeName ) {\n\n\t\t\t\tcase 'directional':\n\t\t\t\tcase 'point':\n\t\t\t\tcase 'spot':\n\t\t\t\tcase 'ambient':\n\n\t\t\t\t\tthis.technique = element.childNodes[ i ].nodeName;\n\n\t\t\t\t\tvar light = element.childNodes[ i ];\n\n\t\t\t\t\tfor ( var j = 0; j < light.childNodes.length; j ++ ) {\n\n\t\t\t\t\t\tvar child = light.childNodes[j];\n\n\t\t\t\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\t\t\t\tcase 'color':\n\n\t\t\t\t\t\t\t\tvar rgba = _floats( child.textContent );\n\t\t\t\t\t\t\t\tthis.color = new THREE.Color(0);\n\t\t\t\t\t\t\t\tthis.color.setRGB( rgba[0], rgba[1], rgba[2] );\n\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'falloff_angle':\n\n\t\t\t\t\t\t\t\tthis.falloff_angle = parseFloat( child.textContent );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tLight.prototype.parseTechnique = function ( element ) {\n\n\t\tthis.profile = element.getAttribute( 'profile' );\n\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\n\n\t\t\tvar child = element.childNodes[ i ];\n\n\t\t\tswitch ( child.nodeName ) {\n\n\t\t\t\tcase 'intensity':\n\n\t\t\t\t\tthis.intensity = parseFloat(child.textContent);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tfunction InstanceLight() {\n\n\t\tthis.url = \"\";\n\n\t};\n\n\tInstanceLight.prototype.parse = function ( element ) {\n\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\treturn this;\n\n\t};\n\n\tfunction _source( element ) {\n\n\t\tvar id = element.getAttribute( 'id' );\n\n\t\tif ( sources[ id ] != undefined ) {\n\n\t\t\treturn sources[ id ];\n\n\t\t}\n\n\t\tsources[ id ] = ( new Source(id )).parse( element );\n\t\treturn sources[ id ];\n\n\t};\n\n\tfunction _nsResolver( nsPrefix ) {\n\n\t\tif ( nsPrefix == \"dae\" ) {\n\n\t\t\treturn \"http://www.collada.org/2005/11/COLLADASchema\";\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n\tfunction _bools( str ) {\n\n\t\tvar raw = _strings( str );\n\t\tvar data = [];\n\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\n\n\t\t\tdata.push( (raw[i] == 'true' || raw[i] == '1') ? true : false );\n\n\t\t}\n\n\t\treturn data;\n\n\t};\n\n\tfunction _floats( str ) {\n\n\t\tvar raw = _strings(str);\n\t\tvar data = [];\n\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\n\n\t\t\tdata.push( parseFloat( raw[ i ] ) );\n\n\t\t}\n\n\t\treturn data;\n\n\t};\n\n\tfunction _ints( str ) {\n\n\t\tvar raw = _strings( str );\n\t\tvar data = [];\n\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\n\n\t\t\tdata.push( parseInt( raw[ i ], 10 ) );\n\n\t\t}\n\n\t\treturn data;\n\n\t};\n\n\tfunction _strings( str ) {\n\n\t\treturn ( str.length > 0 ) ? _trimString( str ).split( /\\s+/ ) : [];\n\n\t};\n\n\tfunction _trimString( str ) {\n\n\t\treturn str.replace( /^\\s+/, \"\" ).replace( /\\s+$/, \"\" );\n\n\t};\n\n\tfunction _attr_as_float( element, name, defaultValue ) {\n\n\t\tif ( element.hasAttribute( name ) ) {\n\n\t\t\treturn parseFloat( element.getAttribute( name ) );\n\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\n\t\t}\n\n\t};\n\n\tfunction _attr_as_int( element, name, defaultValue ) {\n\n\t\tif ( element.hasAttribute( name ) ) {\n\n\t\t\treturn parseInt( element.getAttribute( name ), 10) ;\n\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\n\t\t}\n\n\t};\n\n\tfunction _attr_as_string( element, name, defaultValue ) {\n\n\t\tif ( element.hasAttribute( name ) ) {\n\n\t\t\treturn element.getAttribute( name );\n\n\t\t} else {\n\n\t\t\treturn defaultValue;\n\n\t\t}\n\n\t};\n\n\tfunction _format_float( f, num ) {\n\n\t\tif ( f === undefined ) {\n\n\t\t\tvar s = '0.';\n\n\t\t\twhile ( s.length < num + 2 ) {\n\n\t\t\t\ts += '0';\n\n\t\t\t}\n\n\t\t\treturn s;\n\n\t\t}\n\n\t\tnum = num || 2;\n\n\t\tvar parts = f.toString().split( '.' );\n\t\tparts[ 1 ] = parts.length > 1 ? parts[ 1 ].substr( 0, num ) : \"0\";\n\n\t\twhile( parts[ 1 ].length < num ) {\n\n\t\t\tparts[ 1 ] += '0';\n\n\t\t}\n\n\t\treturn parts.join( '.' );\n\n\t};\n\n\tfunction extractDoubleSided( obj, element ) {\n\n\t\tobj.doubleSided = false;\n\n\t\tvar node = element.querySelectorAll('extra double_sided')[0];\n\t\n\t\tif ( node ) {\n\n\t\t\tif ( node && parseInt( node.textContent, 10 ) === 1 ) {\n\n\t\t\t\tobj.doubleSided = true;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t// Up axis conversion\n\n\tfunction setUpConversion() {\n\n\t\tif ( !options.convertUpAxis || colladaUp === options.upAxis ) {\n\n\t\t\tupConversion = null;\n\n\t\t} else {\n\n\t\t\tswitch ( colladaUp ) {\n\n\t\t\t\tcase 'X':\n\n\t\t\t\t\tupConversion = options.upAxis === 'Y' ? 'XtoY' : 'XtoZ';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Y':\n\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'YtoX' : 'YtoZ';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Z':\n\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'ZtoX' : 'ZtoY';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction fixCoords( data, sign ) {\n\n\t\tif ( !options.convertUpAxis || colladaUp === options.upAxis ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tswitch ( upConversion ) {\n\n\t\t\tcase 'XtoY':\n\n\t\t\t\tvar tmp = data[ 0 ];\n\t\t\t\tdata[ 0 ] = sign * data[ 1 ];\n\t\t\t\tdata[ 1 ] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XtoZ':\n\n\t\t\t\tvar tmp = data[ 2 ];\n\t\t\t\tdata[ 2 ] = data[ 1 ];\n\t\t\t\tdata[ 1 ] = data[ 0 ];\n\t\t\t\tdata[ 0 ] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YtoX':\n\n\t\t\t\tvar tmp = data[ 0 ];\n\t\t\t\tdata[ 0 ] = data[ 1 ];\n\t\t\t\tdata[ 1 ] = sign * tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YtoZ':\n\n\t\t\t\tvar tmp = data[ 1 ];\n\t\t\t\tdata[ 1 ] = sign * data[ 2 ];\n\t\t\t\tdata[ 2 ] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZtoX':\n\n\t\t\t\tvar tmp = data[ 0 ];\n\t\t\t\tdata[ 0 ] = data[ 1 ];\n\t\t\t\tdata[ 1 ] = data[ 2 ];\n\t\t\t\tdata[ 2 ] = tmp;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZtoY':\n\n\t\t\t\tvar tmp = data[ 1 ];\n\t\t\t\tdata[ 1 ] = data[ 2 ];\n\t\t\t\tdata[ 2 ] = sign * tmp;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction getConvertedVec3( data, offset ) {\n\n\t\tvar arr = [ data[ offset ], data[ offset + 1 ], data[ offset + 2 ] ];\n\t\tfixCoords( arr, -1 );\n\t\treturn new THREE.Vector3( arr[ 0 ], arr[ 1 ], arr[ 2 ] );\n\n\t};\n\n\tfunction getConvertedMat4( data ) {\n\n\t\tif ( options.convertUpAxis ) {\n\n\t\t\t// First fix rotation and scale\n\n\t\t\t// Columns first\n\t\t\tvar arr = [ data[ 0 ], data[ 4 ], data[ 8 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 0 ] = arr[ 0 ];\n\t\t\tdata[ 4 ] = arr[ 1 ];\n\t\t\tdata[ 8 ] = arr[ 2 ];\n\t\t\tarr = [ data[ 1 ], data[ 5 ], data[ 9 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 1 ] = arr[ 0 ];\n\t\t\tdata[ 5 ] = arr[ 1 ];\n\t\t\tdata[ 9 ] = arr[ 2 ];\n\t\t\tarr = [ data[ 2 ], data[ 6 ], data[ 10 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 2 ] = arr[ 0 ];\n\t\t\tdata[ 6 ] = arr[ 1 ];\n\t\t\tdata[ 10 ] = arr[ 2 ];\n\t\t\t// Rows second\n\t\t\tarr = [ data[ 0 ], data[ 1 ], data[ 2 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 0 ] = arr[ 0 ];\n\t\t\tdata[ 1 ] = arr[ 1 ];\n\t\t\tdata[ 2 ] = arr[ 2 ];\n\t\t\tarr = [ data[ 4 ], data[ 5 ], data[ 6 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 4 ] = arr[ 0 ];\n\t\t\tdata[ 5 ] = arr[ 1 ];\n\t\t\tdata[ 6 ] = arr[ 2 ];\n\t\t\tarr = [ data[ 8 ], data[ 9 ], data[ 10 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 8 ] = arr[ 0 ];\n\t\t\tdata[ 9 ] = arr[ 1 ];\n\t\t\tdata[ 10 ] = arr[ 2 ];\n\n\t\t\t// Now fix translation\n\t\t\tarr = [ data[ 3 ], data[ 7 ], data[ 11 ] ];\n\t\t\tfixCoords( arr, -1 );\n\t\t\tdata[ 3 ] = arr[ 0 ];\n\t\t\tdata[ 7 ] = arr[ 1 ];\n\t\t\tdata[ 11 ] = arr[ 2 ];\n\n\t\t}\n\n\t\treturn new THREE.Matrix4(\n\t\t\tdata[0], data[1], data[2], data[3],\n\t\t\tdata[4], data[5], data[6], data[7],\n\t\t\tdata[8], data[9], data[10], data[11],\n\t\t\tdata[12], data[13], data[14], data[15]\n\t\t\t);\n\n\t};\n\n\tfunction getConvertedIndex( index ) {\n\n\t\tif ( index > -1 && index < 3 ) {\n\n\t\t\tvar members = ['X', 'Y', 'Z'],\n\t\t\t\tindices = { X: 0, Y: 1, Z: 2 };\n\n\t\t\tindex = getConvertedMember( members[ index ] );\n\t\t\tindex = indices[ index ];\n\n\t\t}\n\n\t\treturn index;\n\n\t};\n\n\tfunction getConvertedMember( member ) {\n\n\t\tif ( options.convertUpAxis ) {\n\n\t\t\tswitch ( member ) {\n\n\t\t\t\tcase 'X':\n\n\t\t\t\t\tswitch ( upConversion ) {\n\n\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\tcase 'YtoX':\n\n\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Y':\n\n\t\t\t\t\tswitch ( upConversion ) {\n\n\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\tcase 'YtoX':\n\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Z':\n\n\t\t\t\t\tswitch ( upConversion ) {\n\n\t\t\t\t\t\tcase 'XtoZ':\n\n\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\tcase 'ZtoX':\n\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn member;\n\n\t};\n\n\treturn {\n\n\t\tload: load,\n\t\tparse: parse,\n\t\tsetPreferredShading: setPreferredShading,\n\t\tapplySkin: applySkin,\n\t\tgeometries : geometries,\n\t\toptions: options\n\n\t};\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/loaders/ColladaLoader.js\n ** module id = 70\n ** module chunks = 0\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\n\nrequire '../models/Field'\n\n### Fields Collection ###\n\nclass Fields extends Backbone.Collection\n  initialize: (models, options) =>\n    super\n    @node = options.node\n    @indexer = options.indexer\n    @inputs = {}\n    @outputs = {}\n    @special_elements = {left: [], center: [], right: []}\n\n    @addFields(@node.getFields())\n\n  # Remove connections, fields and delete variables\n  destroy: () =>\n    @removeConnections()\n    while @models.length > 0\n      @models[0].remove()\n    delete @node\n    delete @inputs\n    delete @outputs\n    delete @indexer\n    delete @special_elements\n\n  # Load saved fields values\n  load: (data) =>\n    if !data || !data.in\n      return false\n\n    for f in data.in\n      if !f.nid\n        # Simple node field\n        node_field = @inputs[f.name]\n      else\n        # Group node field\n        node_field = @inputs[f.name + \"-\" + f.nid]\n      if node_field then node_field.load(f.val)\n    true\n\n  toJSON: =>\n    data =\n      in: jQuery.map(@inputs, (f, i) -> f.toJSON())\n      out: jQuery.map(@outputs, (f, i) -> f.toJSON())\n    return data\n\n  getField: (key, is_out = false) =>\n    target = if is_out == true then \"outputs\" else \"inputs\"\n    return @[target][key]\n\n  setField: (key, value) =>\n    if @outputs[key]\n      @outputs[key].setValue(value)\n\n  getMaxInputSliceCount: () =>\n    result = 1\n    for fname, f of @inputs\n      val = f.attributes.value\n      if val && $.type(val) == \"array\"\n        if val.length > result\n          result = val.length\n    # start with 0\n    return result - 1\n\n  getUpstreamNodes: () =>\n    res = []\n    for fname, f of @inputs\n      for c in f.connections\n        res[res.length] = c.from_field.node\n    res\n\n  getDownstreamNodes: () =>\n    res = []\n    for fname, f in @outputs\n      f = @inputs[fname]\n      for c in f.connections\n        res[res.length] = c.to_field.node\n    res\n\n  hasUnconnectedInputs: () =>\n    for fname, f of @inputs\n      if f.connections.length == 0\n        return true\n    return false\n\n  hasUnconnectedOutputs: () =>\n    for fname, f of @outputs\n      if f.connections.length == 0\n        return true\n    return false\n\n  hasUnconnectedFields: () =>\n    return hasUnconnectedInputs() || hasUnconnectedOutputs()\n\n  setFieldInputUnchanged: () =>\n    for fname in @inputs\n      f = @inputs[fname]\n      f.changed = false\n\n  renderConnections: =>\n    @invoke \"renderConnections\"\n\n  removeConnections: =>\n    @invoke \"removeConnections\"\n\n\n  addField: (name, value, direction = \"inputs\") =>\n    f = false\n    field_is_out = (direction != \"inputs\")\n    if $.type(value) != \"object\"\n      value = @getFieldValueObject(value)\n    if !value.propagateDirty?\n      value.propagateDirty = true\n\n    field = new ThreeNodes.Core.fields.models[value.type]\n      name: name\n      value: value.val\n      possibilities: value.values\n      node: @node\n      is_output: field_is_out\n      default: value.default\n      subfield: value.subfield\n      indexer: @indexer\n      propagateDirty: value.propagateDirty\n\n    target = if field.get(\"is_output\") == false then \"inputs\" else \"outputs\"\n    field_index = field.get(\"name\")\n    if field.subfield\n      # In group nodes we want to have a unique field index\n      field_index += \"-\" + field.subfield.node.get(\"nid\")\n    @[target][field_index] = field\n    @add(field)\n    field\n\n  addFields: (fields_array) =>\n    for dir of fields_array\n      # dir = inputs / outputs\n      for fname of fields_array[dir]\n        value = fields_array[dir][fname]\n        @addField(fname, value, dir)\n    @\n\n  renderSidebar: () =>\n    @trigger(\"renderSidebar\")\n    @\n\n  getFieldValueObject: (default_value) ->\n    ftype = switch $.type(default_value)\n      when \"number\" then \"Float\"\n      when \"boolean\" then \"Bool\"\n      else \"String\"\n    res =\n      type: ftype\n      val: default_value\n    return res\n\nmodule.exports = Fields\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/collections/Fields.coffee\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.EffectComposer = function ( renderer, renderTarget ) {\n\n\tthis.renderer = renderer;\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar width = window.innerWidth || 1;\n\t\tvar height = window.innerHeight || 1;\n\t\tvar parameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat, stencilBuffer: false };\n\n\t\trenderTarget = new THREE.WebGLRenderTarget( width, height, parameters );\n\n\t}\n\n\tthis.renderTarget1 = renderTarget;\n\tthis.renderTarget2 = renderTarget.clone();\n\n\tthis.writeBuffer = this.renderTarget1;\n\tthis.readBuffer = this.renderTarget2;\n\n\tthis.passes = [];\n\n\tif ( THREE.CopyShader === undefined )\n\t\tconsole.error( \"THREE.EffectComposer relies on THREE.CopyShader\" );\n\n\tthis.copyPass = new THREE.ShaderPass( THREE.CopyShader );\n\n};\n\nTHREE.EffectComposer.prototype = {\n\n\tswapBuffers: function() {\n\n\t\tvar tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t},\n\n\taddPass: function ( pass ) {\n\n\t\tthis.passes.push( pass );\n\n\t},\n\n\tinsertPass: function ( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\n\t},\n\n\trender: function ( delta ) {\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t\tvar maskActive = false;\n\n\t\tvar pass, i, il = this.passes.length;\n\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tpass = this.passes[ i ];\n\n\t\t\tif ( !pass.enabled ) continue;\n\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, delta, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tvar context = this.renderer.context;\n\n\t\t\t\t\tcontext.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, delta );\n\n\t\t\t\t\tcontext.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( pass instanceof THREE.MaskPass ) {\n\n\t\t\t\tmaskActive = true;\n\n\t\t\t} else if ( pass instanceof THREE.ClearMaskPass ) {\n\n\t\t\t\tmaskActive = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\treset: function ( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\n\t\t\trenderTarget.width = window.innerWidth;\n\t\t\trenderTarget.height = window.innerHeight;\n\n\t\t}\n\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tvar renderTarget = this.renderTarget1.clone();\n\n\t\trenderTarget.width = width;\n\t\trenderTarget.height = height;\n\n\t\tthis.reset( renderTarget );\n\n\t}\n\n};\n\n// shared ortho camera\n\nTHREE.EffectComposer.camera = new THREE.OrthographicCamera( -1, 1, 1, -1, 0, 1 );\n\nTHREE.EffectComposer.quad = new THREE.Mesh( new THREE.PlaneGeometry( 2, 2 ), null );\n\nTHREE.EffectComposer.scene = new THREE.Scene();\nTHREE.EffectComposer.scene.add( THREE.EffectComposer.quad );\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/postprocessing/EffectComposer.js\n ** module id = 79\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MaskPass = function ( scene, camera ) {\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.enabled = true;\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n\tthis.inverse = false;\n\n};\n\nTHREE.MaskPass.prototype = {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta ) {\n\n\t\tvar context = renderer.context;\n\n\t\t// don't update color or depth\n\n\t\tcontext.colorMask( false, false, false, false );\n\t\tcontext.depthMask( false );\n\n\t\t// set up stencil\n\n\t\tvar writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tcontext.enable( context.STENCIL_TEST );\n\t\tcontext.stencilOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tcontext.stencilFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tcontext.clearStencil( clearValue );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.render( this.scene, this.camera, readBuffer, this.clear );\n\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\n\n\t\t// re-enable update of color and depth\n\n\t\tcontext.colorMask( true, true, true, true );\n\t\tcontext.depthMask( true );\n\n\t\t// only render where stencil is set to 1\n\n\t\tcontext.stencilFunc( context.EQUAL, 1, 0xffffffff );  // draw if == 1\n\t\tcontext.stencilOp( context.KEEP, context.KEEP, context.KEEP );\n\n\t}\n\n};\n\n\nTHREE.ClearMaskPass = function () {\n\n\tthis.enabled = true;\n\n};\n\nTHREE.ClearMaskPass.prototype = {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta ) {\n\n\t\tvar context = renderer.context;\n\n\t\tcontext.disable( context.STENCIL_TEST );\n\n\t}\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/postprocessing/MaskPass.js\n ** module id = 80\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.RenderPass = function ( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.overrideMaterial = overrideMaterial;\n\n\tthis.clearColor = clearColor;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 1;\n\n\tthis.oldClearColor = new THREE.Color();\n\tthis.oldClearAlpha = 1;\n\n\tthis.enabled = true;\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n};\n\nTHREE.RenderPass.prototype = {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta ) {\n\n\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\tif ( this.clearColor ) {\n\n\t\t\tthis.oldClearColor.copy( renderer.getClearColor() );\n\t\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\trenderer.render( this.scene, this.camera, readBuffer, this.clear );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\n\n\t\t}\n\n\t\tthis.scene.overrideMaterial = null;\n\n\t}\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/postprocessing/RenderPass.js\n ** module id = 81\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ShaderPass = function ( shader, textureID ) {\n\n\tthis.textureID = ( textureID !== undefined ) ? textureID : \"tDiffuse\";\n\n\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\tthis.material = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\n\t} );\n\n\tthis.renderToScreen = false;\n\n\tthis.enabled = true;\n\tthis.needsSwap = true;\n\tthis.clear = false;\n\n};\n\nTHREE.ShaderPass.prototype = {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer;\n\n\t\t}\n\n\t\tTHREE.EffectComposer.quad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera );\n\n\t\t} else {\n\n\t\t\trenderer.render( THREE.EffectComposer.scene, THREE.EffectComposer.camera, writeBuffer, this.clear );\n\n\t\t}\n\n\t}\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/postprocessing/ShaderPass.js\n ** module id = 82\n ** module chunks = 0\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\n\nTHREE.CopyShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { type: \"t\", value: null },\n\t\t\"opacity\":  { type: \"f\", value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\"),\n\n\tfragmentShader: [\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\t\"gl_FragColor = opacity * texel;\",\n\n\t\t\"}\"\n\n\t].join(\"\\n\")\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/three-extras/js/shaders/CopyShader.js\n ** module id = 83\n ** module chunks = 0\n **/","/* canvas-toBlob.js\n * A canvas.toBlob() implementation.\n * 2011-07-13\n *\n * By Eli Grey, http://eligrey.com and Devin Samarin, https://github.com/eboyjr\n * License: X11/MIT\n *   See LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\n  plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */\n\n(function(view) {\n\"use strict\";\nvar\n    Uint8Array = view.Uint8Array\n  , HTMLCanvasElement = view.HTMLCanvasElement\n  , is_base64_regex = /\\s*;\\s*base64\\s*(?:;|$)/i\n  , base64_ranks\n  , decode_base64 = function(base64) {\n    var\n        len = base64.length\n      , buffer = new Uint8Array(len / 4 * 3 | 0)\n      , i = 0\n      , outptr = 0\n      , last = [0, 0]\n      , state = 0\n      , save = 0\n      , rank\n      , code\n      , undef\n    ;\n    while (len--) {\n      code = base64.charCodeAt(i++);\n      rank = base64_ranks[code-43];\n      if (rank !== 255 && rank !== undef) {\n        last[1] = last[0];\n        last[0] = code;\n        save = (save << 6) | rank;\n        state++;\n        if (state === 4) {\n          buffer[outptr++] = save >>> 16;\n          if (last[1] !== 61 /* padding character */) {\n            buffer[outptr++] = save >>> 8;\n          }\n          if (last[0] !== 61 /* padding character */) {\n            buffer[outptr++] = save;\n          }\n          state = 0;\n        }\n      }\n    }\n    // 2/3 chance there's going to be some null bytes at the end, but that\n    // doesn't really matter with most image formats.\n    // If it somehow matters for you, truncate the buffer up outptr.\n    return buffer;\n  }\n;\nif (Uint8Array) {\n  base64_ranks = new Uint8Array([\n      62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1\n    , -1, -1,  0, -1, -1, -1,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9\n    , 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25\n    , -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35\n    , 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n  ]);\n}\nif (HTMLCanvasElement && !HTMLCanvasElement.prototype.toBlob) {\n  HTMLCanvasElement.prototype.toBlob = function(callback, type /*, ...args*/) {\n      if (!type) {\n      type = \"image/png\";\n    } if (this.mozGetAsFile) {\n      callback(this.mozGetAsFile(\"canvas\", type));\n      return;\n    }\n    var\n        args = Array.prototype.slice.call(arguments, 1)\n      , dataURI = this.toDataURL.apply(this, args)\n      , header_end = dataURI.indexOf(\",\")\n      , data = dataURI.substring(header_end + 1)\n      , is_base64 = is_base64_regex.test(dataURI.substring(0, header_end))\n      , blob\n    ;\n    if (Blob.fake) {\n      // no reason to decode a data: URI that's just going to become a data URI again\n      blob = new Blob\n      if (is_base64) {\n        blob.encoding = \"base64\";\n      } else {\n        blob.encoding = \"URI\";\n      }\n      blob.data = data;\n      blob.size = data.length;\n    } else if (Uint8Array) {\n      if (is_base64) {\n        blob = new Blob([decode_base64(data)], {type: type});\n      } else {\n        blob = new Blob([decodeURIComponent(data)], {type: type});\n      }\n    }\n    callback(blob);\n  };\n}\n}(self));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/canvas-toBlob.min.js\n ** module id = 84\n ** module chunks = 0\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nIndexer = require 'threenodes/utils/Indexer'\nnamespace = require('libs/namespace').namespace\n\nBoolField = require 'threenodes/fields/views/sidebar/BoolField'\nStringField = require 'threenodes/fields/views/sidebar/StringField'\nFloatField = require 'threenodes/fields/views/sidebar/FloatField'\nVector2Field = require 'threenodes/fields/views/sidebar/Vector2Field'\nVector3Field = require 'threenodes/fields/views/sidebar/Vector3Field'\nVector4Field = require 'threenodes/fields/views/sidebar/Vector4Field'\nQuaternionField = require 'threenodes/fields/views/sidebar/QuaternionField'\nEulerField = require 'threenodes/fields/views/sidebar/EulerField'\n\n### Field model ###\nclass NodeField extends Backbone.Model\n  # Define the view class used to display the sidebar attributes.\n  @VIEW:  false\n\n  # Create a static indexer used if the field is not part of a nodes collection (tests)\n  @STATIC_INDEXER: new Indexer()\n\n  defaults: () ->\n    fid: -1\n    name: \"fieldname\"\n    machine_name: \"fieldname-nid\"\n    is_output: false\n    value: 0\n    default: null\n\n  # Override the backbone sync method since the field is not directly stored on a server\n  sync: () =>\n\n  # A field is always valid\n  _validate: (attrs, options) => return true\n\n  # override the backbone set method if the key is \"value\"\n  # this is one of the most called function so this needs to be fast\n  set: (key, value, options = {}) =>\n    if key == \"value\"\n      this.attributes[key] = value\n      return this\n\n    super\n\n  load: (data) =>\n    # Return without doing anything if there is no data\n    if !data && data != false\n      return\n\n    if $.type(data) != \"object\"\n      # If the loaded data is not an object simply apply the value\n      @setValue(data)\n    else\n      # If the data is an object then directly apply each object properties to the value\n      for property of data\n        @attributes.value[property] = data[property]\n    return this\n\n  initialize: (options) =>\n    self = this\n    # Keep reference to some variables\n    @node = options.node\n    @subfield = options.subfield\n    @propagateDirty = if options.propagateDirty? then options.propagateDirty else true\n    indexer = options.indexer || ThreeNodes.NodeField.STATIC_INDEXER\n\n    # Common field variables\n    @changed = true\n\n    # Array containing all connections from and to this field\n    @connections = []\n\n    # Callback called when the value is changed\n    # todo: replace it with the backbone standard way?\n    @on_value_update_hooks = {}\n\n    # Field machine_name must be unique inside each nodes\n    @set(\"machine_name\", @get(\"name\"))\n\n    # For proxyfields we append the subfield node id\n    # since the same field name can be in different subnodes\n    if @subfield && @subfield.node\n      @set(\"machine_name\", @get(\"name\") + \"-\" + @subfield.node.get(\"nid\"))\n    if @get(\"fid\") == -1\n      @set(\"fid\", indexer.getUID())\n\n  remove: () =>\n    delete @on_value_update_hooks\n    delete @node\n    delete @connections\n    delete @button\n    delete @subfield\n    @destroy()\n\n  isEqual: (val, prev) ->\n    if _.isArray(val) && _.isArray(prev)\n      if val.length != prev.length then return false\n      same_array = true\n      for val1, i in val\n        prev1 = prev[i]\n\n        if @isEqual(val1, prev1) == false\n          same_array = false\n          break\n      if same_array == false\n        return false\n      else\n        return true\n\n    else if _.isObject(val) && _.isObject(prev)\n      if val.uuid? && prev.uuid? && val.uuid == prev.uuid\n        return true\n      #if _.isEqual(val, prev) then return true\n      return false\n\n    else if val == prev then return true\n\n    return false\n\n  setValue: (v) =>\n    prev_val = @attributes[\"value\"]\n\n    if @isEqual(v, prev_val) then return false\n\n    # Set the 'changed' flag on the field and on the node\n    @changed = true\n    propagate = @propagateDirty\n    # recursive function to set group node dirty if child become dirty\n    setNodeDirty = (node) ->\n      node.dirty = true\n      if propagate && node.parent then setNodeDirty(node.parent)\n      #if node.parent then setNodeDirty(node.parent)\n\n    if @node then setNodeDirty(@node)\n\n    # Define references to the previous and current value\n    new_val = @onValueChanged(v)\n\n    # remove all null values from the array\n    if $.type(new_val) == \"array\"\n      tmp_val = _.filter new_val, (item) ->\n        item != null\n      if this.constructor == Array\n        new_val = tmp_val\n      else\n        if tmp_val.length != 0\n          new_val = tmp_val\n        else\n          new_val = null\n\n    # Reset the value if it's null and it has a default\n    if new_val == null\n      default_val = @attributes[\"default\"]\n      if default_val != null && default_val != undefined\n        prev_val = default_val\n      new_val = prev_val\n\n    # Set the value\n    @attributes[\"value\"] = new_val\n    @trigger(\"value_updated\", new_val)\n\n    # Call the on_value_update hooks\n    # TODO: remove this when all fields have their own view...\n    for hook of @on_value_update_hooks\n      @on_value_update_hooks[hook](new_val)\n\n    # If this is an output and it is connected, propagate the value to the inputs\n    if @attributes[\"is_output\"] == true\n      for connection in @connections\n        connection.to_field.setValue(new_val)\n\n    return true\n\n  getValue: (index = 0) =>\n    val = @attributes[\"value\"]\n    if $.type(val) != \"array\"\n      return val\n    else\n      return val[index % val.length]\n\n  isChanged: () =>\n    res = @changed\n    @changed = false\n    res\n\n  isConnected: () =>\n    @connections.length > 0\n\n  getSliceCount: () =>\n    val = @attributes[\"value\"]\n    if jQuery.type(val) != \"array\"\n      return 1\n    return val.length\n\n  isAnimationProperty: () =>\n    if this.constructor == Float ||this.constructor == Bool\n      return true\n    return false\n\n  toJSON : () =>\n    res =\n      name: @get(\"name\")\n\n    # Add the node nid for fields that are part of subnodes (group)\n    if @subfield\n      res.nid = @subfield.node.get(\"nid\")\n\n    # Help avoid cyclic value\n    val = @get(\"value\")\n    val_type = jQuery.type(val)\n    if val_type != \"object\" && val_type != \"array\"\n      res.val = val\n\n    # We may still need to save basic values\n    if val_type == \"object\"\n      if val.constructor == THREE.Vector2 || val.constructor == THREE.Vector3 || val.constructor == THREE.Vector4 || val.constructor == THREE.Color\n        res.val = val\n\n    return res\n\n  renderConnections: () =>\n    for connection in @connections\n      connection.render()\n    true\n\n  computeValue : (val) =>\n    return val\n\n  addConnection: (c) =>\n    if @connections.indexOf(c) == -1\n      @connections.push c\n      if @get(\"is_output\") == true\n        @node.addOutConnection(c, this)\n      @node.disablePropertyAnim(this)\n    return c\n\n  unregisterConnection: (c) =>\n    @node.removeConnection(c)\n\n    ind = @connections.indexOf(c)\n    if ind != -1\n      @connections.splice(ind, 1)\n    if @connections.length == 0\n      @node.enablePropertyAnim(this)\n\n  # remove all connections\n  removeConnections: () =>\n    @connections[0].remove() while @connections.length > 0\n    return this\n\n  onValueChanged: (val) =>\n    self = this\n    if $.type(val) == \"array\"\n      return _.map(val, (n) -> self.computeValue(n))\n\n    return @computeValue(val)\n\n\n\nclass Any extends NodeField\n  computeValue : (val) =>\n    val\n\n  onValueChanged : (val) =>\n    return val\nThreeNodes.Core.addFieldType('Any', Any)\n\nclass Array extends NodeField\n  computeValue : (val) =>\n    if !val ||val == false\n      return []\n    if $.type(val) == \"array\"\n      return val\n    else\n      return [val]\n\n  removeConnections: () =>\n    super\n    if @get(\"is_output\") == false\n      @setValue([])\n\n  onValueChanged : (val) =>\n    return @computeValue(val)\n\n  getValue: (index = 0) => @get(\"value\")\nThreeNodes.Core.addFieldType('Array', Array)\n\nclass Bool extends NodeField\n  @VIEW:  BoolField\n  computeValue : (val) =>\n    switch $.type(val)\n      when \"boolean\" then return val\n      when \"number\" then return val != 0\n      when \"string\" then return val == \"1\"\n    return null\nThreeNodes.Core.addFieldType('Bool', Bool)\n\nclass String extends NodeField\n  @VIEW:  StringField\n  computeValue : (val) =>\n    switch $.type(val)\n      when \"array\" then return val\n      when \"number\" then return val.toString\n      when \"string\" then return val\n    return null\nThreeNodes.Core.addFieldType('String', String)\n\nclass Float extends NodeField\n  @VIEW:  FloatField\n  computeValue : (val) =>\n    switch $.type(val)\n      when \"number\", \"string\" then return parseFloat(val)\n      when \"object\"\n        if val.constructor == THREE.Vector2 ||val.constructor == THREE.Vector3\n          return val\n      when \"boolean\"\n        if val == true\n          return 1\n        else\n          return 0\n    return null\nThreeNodes.Core.addFieldType('Float', Float)\n\nclass Vector2 extends NodeField\n  @VIEW:  Vector2Field\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Vector2\n        return val\n    return null\nThreeNodes.Core.addFieldType('Vector2', Vector2)\n\nclass Vector3 extends NodeField\n  @VIEW:  Vector3Field\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Vector3\n        return val\n    return null\nThreeNodes.Core.addFieldType('Vector3', Vector3)\n\nclass Vector4 extends NodeField\n  @VIEW:  Vector4Field\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Vector4\n        return val\n    return null\nThreeNodes.Core.addFieldType('Vector4', Vector4)\n\nclass Quaternion extends NodeField\n  @VIEW:  QuaternionField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Quaternion\n        return val\n    return null\nThreeNodes.Core.addFieldType('Quaternion', Quaternion)\n\nclass Euler extends NodeField\n  @VIEW:  EulerField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Euler\n        return val\n    return null\nThreeNodes.Core.addFieldType('Euler', Euler)\n\nclass Color extends NodeField\n  @VIEW:  false\n  computeValue : (val) =>\n    switch $.type(val)\n      when \"number\" then return new THREE.Color().setRGB(val, val, val)\n      when \"object\"\n        switch val.constructor\n          when THREE.Color then return val\n          when THREE.Vector3 then return new THREE.Color().setRGB(val.x, val.y, val.z)\n      when \"boolean\"\n        if val\n          return new THREE.Color(0xffffff)\n        else\n          return new THREE.Color(0x000000)\n    return null\nThreeNodes.Core.addFieldType('Color', Color)\n\nclass Object3D extends NodeField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Object3D || val instanceof THREE.Object3D\n        return val\n    return null\nThreeNodes.Core.addFieldType('Object3D', Object3D)\n\nclass Scene extends NodeField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val instanceof THREE.Scene\n        return val\n    return null\nThreeNodes.Core.addFieldType('Scene', Scene)\n\nclass Camera extends NodeField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val instanceof THREE.Camera ||val instanceof THREE.PerspectiveCamera ||val instanceof THREE.OrthographicCamera\n        return val\n    return null\nThreeNodes.Core.addFieldType('Camera', Camera)\n\nclass Mesh extends NodeField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Mesh || val instanceof THREE.Mesh\n        return val\n    return null\nThreeNodes.Core.addFieldType('Mesh', Mesh)\n\nclass Geometry extends NodeField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Geometry || val instanceof THREE.Geometry\n        return val\n    return null\nThreeNodes.Core.addFieldType('Geometry', Geometry)\n\nclass Material extends NodeField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Material || val instanceof THREE.Material\n        return val\n    return null\nThreeNodes.Core.addFieldType('Material', Material)\n\nclass Texture extends NodeField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Texture || val instanceof THREE.Texture\n        return val\n    return null\nThreeNodes.Core.addFieldType('Texture', Texture)\n\nclass Fog extends NodeField\n  computeValue : (val) =>\n    if $.type(val) == \"object\"\n      if val.constructor == THREE.Fog || val.constructor == THREE.FogExp2\n        return val\n    return null\nThreeNodes.Core.addFieldType('Fog', Fog)\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/models/Field.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\nnamespace = require('libs/namespace').namespace\n\nBaseField = require 'threenodes/fields/views/sidebar/BaseField'\n\n### SidebarField View ###\nclass BoolField extends BaseField\n  on_value_updated: (new_val) =>\n    if @model.getValue() == true\n      @$checkbox.attr('checked', 'checked')\n    else\n      @$checkbox.removeAttr('checked')\n\n  render: () =>\n    console.log \"check..\"\n    $target = @createSidebarContainer()\n    id = \"side-field-checkbox-#{@model.get('fid')}\"\n    $container = $(\"<div><input type='checkbox' id='#{id}'/></div>\").appendTo($target)\n    @$checkbox = $(\"input\", $container)\n\n    # Set the inital state of the checkbox\n    if @model.getValue() == true\n      @$checkbox.attr('checked', 'checked')\n\n    # Listen to the checkbox change status\n    @$checkbox.change (e) =>\n      if @$checkbox.is(':checked')\n        @model.setValue(true)\n      else\n        @model.setValue(false)\n    return @\n\nmodule.exports = BoolField\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/BoolField.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\nnamespace = require('libs/namespace').namespace\n\nBaseField = require 'threenodes/fields/views/sidebar/BaseField'\n\n### StringField View ###\nclass StringField extends BaseField\n  render: () =>\n    $target = @createSidebarContainer()\n    if @model.attributes.possibilities\n      @create_sidebar_select($target)\n    else\n      @create_sidebar_input($target)\n    true\n\n  # Todo: DRY... same code on FloatField.\n  create_sidebar_select: ($target) =>\n    self = this\n    input = \"<div><select>\"\n    for f of @model.get(\"possibilities\")\n      dval = @model.get(\"possibilities\")[f]\n      if dval == @val\n        input += \"<option value='#{dval}' selected='selected'>#{f}</option>\"\n      else\n        input += \"<option value='#{dval}'>#{f}</option>\"\n    input += \"</select></div>\"\n    $target.append(input)\n    $(\"select\", $target).change (e) =>\n      @model.setValue($(\"select\", $target).val())\n    return true\n\n  create_sidebar_input: ($target) =>\n    @textfield = @createTextfield($target, \"string\")\n    @textfield.linkTextfieldToVal(\"string\")\n\nmodule.exports = StringField\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/StringField.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\nnamespace = require('libs/namespace').namespace\n\nBaseField = require 'threenodes/fields/views/sidebar/BaseField'\n\n### FloatField View ###\nclass FloatField extends BaseField\n  initialize: (options) ->\n    super\n\n  render: () =>\n    $target = @createSidebarContainer()\n    #console.log @model\n    if @model.attributes.possibilities\n      @create_sidebar_select($target)\n    else\n      @create_sidebar_input($target)\n    true\n\n  create_sidebar_select: ($target) =>\n    self = this\n    input = \"<div><select>\"\n    for f of @model.get(\"possibilities\")\n      dval = @model.get(\"possibilities\")[f]\n      if dval == @val\n        input += \"<option value='#{dval}' selected='selected'>#{f}</option>\"\n      else\n        input += \"<option value='#{dval}'>#{f}</option>\"\n    input += \"</select></div>\"\n    $target.append(input)\n    $(\"select\", $target).change (e) =>\n      @model.setValue($(\"select\", $target).val())\n    return true\n\n  create_sidebar_input: ($target) =>\n    @textfield = @createTextfield($target)\n    @textfield.linkTextfieldToVal()\n\nmodule.exports = FloatField\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/FloatField.coffee\n **/","_ = require 'Underscore'\nBackbone = require 'Backbone'\nnamespace = require('libs/namespace').namespace\n\nBaseField = require 'threenodes/fields/views/sidebar/BaseField'\n\n### Vector2Field View ###\nclass Vector2Field extends BaseField\n  render: () =>\n    @createSidebarFieldTitle()\n    @createSubvalTextinput(\"x\")\n    @createSubvalTextinput(\"y\")\n    return @\n\nmodule.exports = Vector2Field\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/Vector2Field.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\nnamespace = require('libs/namespace').namespace\n\nBaseField = require 'threenodes/fields/views/sidebar/BaseField'\n\n### Vector3Field View ###\nclass Vector3Field extends BaseField\n  render: () =>\n    @createSidebarFieldTitle()\n    @createSubvalTextinput(\"x\")\n    @createSubvalTextinput(\"y\")\n    @createSubvalTextinput(\"z\")\n    return @\n\nmodule.exports = Vector3Field\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/Vector3Field.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\nnamespace = require('libs/namespace').namespace\n\nBaseField = require 'threenodes/fields/views/sidebar/BaseField'\n\n### Vector4Field View ###\nclass Vector4Field extends BaseField\n  render: () =>\n    @createSidebarFieldTitle()\n    @createSubvalTextinput(\"x\")\n    @createSubvalTextinput(\"y\")\n    @createSubvalTextinput(\"z\")\n    @createSubvalTextinput(\"w\")\n    return @\n\nmodule.exports = Vector4Field\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/Vector4Field.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\nnamespace = require('libs/namespace').namespace\n\nBaseField = require 'threenodes/fields/views/sidebar/BaseField'\n\n### Vector3Field View ###\nclass QuaternionField extends BaseField\n  render: () =>\n    @createSidebarFieldTitle()\n    @createSubvalTextinput(\"x\")\n    @createSubvalTextinput(\"y\")\n    @createSubvalTextinput(\"z\")\n    @createSubvalTextinput(\"w\")\n    return @\n\nmodule.exports = QuaternionField\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/QuaternionField.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\nnamespace = require('libs/namespace').namespace\n\nBaseField = require 'threenodes/fields/views/sidebar/BaseField'\n\n### Euler3Field View ###\nclass EulerField extends BaseField\n  render: () =>\n    @createSidebarFieldTitle()\n    @createSubvalTextinput(\"x\")\n    @createSubvalTextinput(\"y\")\n    @createSubvalTextinput(\"z\")\n    @createSubvalTextinput(\"order\", \"string\")\n    return @\n\nmodule.exports = EulerField\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/EulerField.coffee\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\n_view_field_sidebar_container = require 'templates/field_sidebar_container.tmpl.html'\n\nSidebarTextfield = require 'threenodes/views/sidebar/SidebarTextfield'\n\n### BaseField View ###\nclass BaseField extends Backbone.View\n  initialize: (options) ->\n    super\n    @model.on \"value_updated\", @on_value_updated\n    @render()\n\n  on_value_updated: (new_val) => return @\n\n  render: () =>\n    return @\n\n  createSidebarContainer: (name = @model.get(\"name\")) =>\n    options =\n      fid: @model.get(\"fid\")\n      model: @\n      name: name\n    @container = $(_.template(_view_field_sidebar_container, options))\n    @$el.append(@container)\n\n    return @container\n\n  createTextfield: ($target, type = \"float\", link_to_val = true) =>\n    textField = new SidebarTextfield\n      model: @model\n      el: $target\n      type: type\n      link_to_val: link_to_val\n\n    return textField\n\n  createSubvalTextinput: (subval, type = \"float\") =>\n    $target = @createSidebarContainer(subval)\n    textfield = @createTextfield($target, type, false)\n    textfield.linkTextfieldToSubval(subval, type)\n    return false\n\n  createSidebarFieldTitle: (name = @model.get(\"name\")) =>\n    @$el.append(\"<h3>#{name}</h3>\")\n    return @$el\n\nmodule.exports = BaseField\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/fields/views/sidebar/BaseField.coffee\n **/","module.exports = \"<div data-fid=\\\"<%= fid %>\\\" class='field-wrapper'>\\n  <h3><%= name %></h3>\\n</div>\\n\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/field_sidebar_container.tmpl.html\n ** module id = 108\n ** module chunks = 0 2 3\n **/","#\"use strict\"\n_ = require 'Underscore'\nBackbone = require 'Backbone'\n_view_field_textfield = require 'templates/field_textfield.tmpl.html'\nDraggableNumber = require 'draggable-number'\n\n### SidebarTextfield View ###\nclass SidebarTextfield extends Backbone.View\n  initialize: (options) ->\n    super\n    @slider = false\n    @render()\n\n  render: () =>\n    # Compile the template file\n    @container = $(_.template(_view_field_textfield, @options))\n    @$el.append(@container)\n    @$input = $(\"input\", @container)\n\n    return @\n\n  linkTextfieldToVal: (type = \"float\") =>\n    @$input.val(@model.getValue())\n\n    if @options.type == \"float\" && @slider == false\n      @slider = @addTextfieldSlider()\n\n    on_value_changed = (v) =>\n      if @slider then @slider.set(v)\n    @model.on \"value_updated\", on_value_changed\n\n    @$input.val(@model.getValue())\n\n    if @slider\n      @slider._options.changeCallback = (new_val) =>\n        @model.setValue(new_val)\n\n    @$input.keypress (e) =>\n      if e.which == 13\n        if type == \"float\"\n          @model.setValue(parseFloat(@$input.val()))\n        else\n          @model.setValue(@$input.val())\n        @$input.blur()\n    return this\n\n  linkTextfieldToSubval: (subval, type = \"float\") =>\n    @$input.val(@model.getValue()[subval])\n\n    if @options.type == \"float\"\n      @slider = @addTextfieldSlider()\n\n    # TODO: use the event instead of the hook\n    @model.on_value_update_hooks[\"update_sidebar_textfield_\" + subval] = (v) =>\n      @$input.val(v[subval])\n\n    updateVal = () =>\n      dval = @$input.val()\n      if type == \"float\" then dval = parseFloat(dval)\n      if $.type(@model.attributes.value) == \"array\"\n        @model.attributes.value[0][subval] = dval\n      else\n        @model.attributes.value[subval] = dval\n\n\n    @slider._options.changeCallback = (new_val) =>\n      updateVal()\n\n    @$input.change (e) =>\n      updateVal()\n    @$input.keypress (e) =>\n      if e.which == 13\n        updateVal()\n        @$input.blur()\n    return this\n\n  addTextfieldSlider: () =>\n    slider = new DraggableNumber(@$input.get(0))\n    return slider\n\nmodule.exports = SidebarTextfield\n\n\n\n/** WEBPACK FOOTER **\n ** ./threenodes/views/sidebar/SidebarTextfield.coffee\n **/","module.exports = \"<div class='input-container'>\\n  <input type='text' class='field-<%= type %>' />\\n</div>\\n\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/field_textfield.tmpl.html\n ** module id = 110\n ** module chunks = 0 2 3\n **/","/**!\n * draggable-number.js\n * Minimal numeric input widget\n *\n * @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.\n * @author David Mignot - http://idflood.com\n * @version 0.3.0\n **/\n(function(root, factory) {\n    if(typeof exports === 'object') {\n        module.exports = factory();\n    }\n    else if(typeof define === 'function' && define.amd) {\n        define([], factory);\n    }\n    else {\n        root['DraggableNumber'] = factory();\n    }\n}(this, function() {\n// Utility function to replace .bind(this) since it is not available in all browsers.\nvar __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n/**\n * Define the DraggableNumber element.\n * @constructor\n * @param {DomElement} input - The input which will be converted to a draggableNumber.\n */\nDraggableNumber = function (input, options) {\n  this._options = options !== undefined ? options : {};\n\n  this._input = input;\n  this._span = document.createElement(\"span\");\n  this._isDragging = false;\n  this._lastMousePosition = {x: 0, y: 0};\n  this._value = 0;\n\n  // Minimum mouse movement before a drag start.\n  this._dragThreshold = this._setOption('dragThreshold', 10);\n\n  // Min/max value.\n  this._min = this._setOption('min', -Infinity);\n  this._max = this._setOption('max', Infinity);\n\n  // Store the original display style for the input and span.\n  this._inputDisplayStyle = \"\";\n  this._spanDisplayStyle = \"\";\n\n  this._init();\n};\n\n/**\n * Constant used when there is no key modifier.\n * @constant\n * type {Number}\n */\nDraggableNumber.MODIFIER_NONE = 0;\n\n/**\n * Constant used when there is a shift key modifier.\n * @constant\n * type {Number}\n */\nDraggableNumber.MODIFIER_LARGE = 1;\n\n/**\n * Constant used when there is a control key modifier.\n * @constant\n * type {Number}\n */\nDraggableNumber.MODIFIER_SMALL = 2;\n\nDraggableNumber.prototype = {\n  constructor: DraggableNumber,\n\n  /**\n   * Initialize the DraggableNumber.\n   * @private\n   */\n  _init: function () {\n    // Get the inital _value from the input.\n    this._value = parseFloat(this._input.value, 10);\n\n    // Add a span containing the _value. Clicking on the span will show the\n    // input. Dragging the span will change the _value.\n    this._addSpan();\n\n    // Save the original display style of the input and span.\n    this._inputDisplayStyle = this._input.style.display;\n    this._spanDisplayStyle = this._span.style.display;\n\n    // Hide the input.\n    this._input.style.display = 'none';\n\n    // Bind 'this' on event callbacks.\n    this._onMouseUp = __bind(this._onMouseUp, this);\n    this._onMouseMove = __bind(this._onMouseMove, this);\n    this._onMouseDown = __bind(this._onMouseDown, this);\n    this._onInputBlur = __bind(this._onInputBlur, this);\n    this._onInputKeyDown = __bind(this._onInputKeyDown, this);\n    this._onInputChange = __bind(this._onInputChange, this);\n\n    // Add mousedown event handler.\n    this._span.addEventListener('mousedown', this._onMouseDown, false);\n\n    // Add key events on the input.\n    this._input.addEventListener('blur', this._onInputBlur, false);\n    this._input.addEventListener('keypress', this._onInputKeyDown, false);\n\n    // Directly assign the function instead of using addeventlistener.\n    // To programatically change the _value of the draggableNumber you\n    // could then do:\n    // input._value = new_number;\n    // input.onchange();\n    this._input.onchange = this._onInputChange;\n  },\n\n  /**\n   * Set the DraggableNumber value.\n   * @public\n   * @param {Number} new_value - The new value.\n   */\n  set: function (new_value) {\n    new_value = this._constraintValue(new_value);\n    this._value = new_value;\n    this._input.value = this._value;\n    this._span.innerHTML = this._value;\n  },\n\n  /**\n   * Get the DraggableNumber value.\n   * @public\n   * @returns {Number}\n   */\n  get: function () {\n    return this._value;\n  },\n\n  /**\n   * Set the minimum value.\n   * @public\n   * @param {Number} min - The minimum value.\n   */\n  setMin: function (min) {\n    this._min = min;\n    // Set the value with current value to automatically constrain it if needed.\n    this.set(this._value);\n  },\n\n  /**\n   * Set the maximum value.\n   * @public\n   * @param {Number} min - The minimum value.\n   */\n  setMax: function (max) {\n    this._max = max;\n    // Set the value with current value to automatically constrain it if needed.\n    this.set(this._value);\n  },\n\n  /**\n   * Remove the DraggableNumber.\n   * @public\n   */\n  destroy: function () {\n    // Remove event listeners.\n    this._span.removeEventListener('mousedown', this._onMouseDown, false);\n    this._input.removeEventListener('blur', this._onInputBlur, false);\n    this._input.removeEventListener('keypress', this._onInputKeyDown, false);\n    document.removeEventListener('mouseup', this._onMouseUp, false);\n    document.removeEventListener('mousemove', this._onMouseMove, false);\n\n    // Remove the span element.\n    if (this._span.parentNode) {\n      this._span.parentNode.removeChild(this._span);\n    }\n\n    // Delete variables.\n    delete this._input;\n    delete this._span;\n    delete this._inputDisplayStyle;\n    delete this._spanDisplayStyle;\n  },\n\n  /**\n   * Set an option value based on the option parameter and the data attribute.\n   * @private\n   * @param {String} name - The option name.\n   * @param {Number} defaultValue - The default value.\n   * @returns {Number}\n   */\n  _setOption: function (name, defaultValue) {\n    // Return the option if it is defined.\n    if (this._options[name] !== undefined) {\n      return this._options[name];\n    }\n    // Return the data attribute if it is defined.\n    if (this._input.hasAttribute(\"data-\" + name)) {\n      return parseFloat(this._input.getAttribute(\"data-\" + name), 10);\n    }\n    // If there is no option and no attribute, return the default value.\n    return defaultValue;\n  },\n\n  /**\n   * Prevent selection on the whole document.\n   * @private\n   * @param {Boolean} prevent - Should we prevent or not the selection.\n   */\n  _preventSelection: function (prevent) {\n    var value = 'none';\n    if (prevent === false) {\n      value = 'all';\n    }\n\n    document.body.style['-moz-user-select'] = value;\n    document.body.style['-webkit-user-select'] = value;\n    document.body.style['-ms-user-select'] = value;\n    document.body.style['user-select'] = value;\n  },\n\n  /**\n   * Add a span element before the input.\n   * @private\n   */\n  _addSpan: function () {\n    var inputParent = this._input.parentNode;\n    inputParent.insertBefore(this._span, this._input);\n    this._span.innerHTML = this.get();\n\n    // Add resize cursor.\n    this._span.style.cursor = \"col-resize\";\n  },\n\n  /**\n   * Display the input and hide the span element.\n   * @private\n   */\n  _showInput: function () {\n    this._input.style.display = this._inputDisplayStyle;\n    this._span.style.display = 'none';\n    this._input.focus();\n  },\n\n  /**\n   * Show the span element and hide the input.\n   * @private\n   */\n  _showSpan: function () {\n    this._input.style.display = 'none';\n    this._span.style.display = this._spanDisplayStyle;\n  },\n\n  /**\n   * Called on input blur, set the new value and display span.\n   * @private\n   * @param {Object} e - Event.\n   */\n  _onInputBlur: function (e) {\n    this._onInputChange();\n    this._showSpan();\n  },\n\n  /**\n   * Called on input onchange event, set the value based on the input value.\n   * @private\n   */\n  _onInputChange: function () {\n    this.set(parseFloat(this._input.value, 10));\n  },\n\n  /**\n   * Called on input key down, blur on enter.\n   * @private\n   * @param {Object} e - Key event.\n   */\n  _onInputKeyDown: function (e) {\n    var keyEnter = 13;\n    if (e.charCode == keyEnter) {\n      this._input.blur();\n    }\n  },\n\n  /**\n   * Called on span mouse down, prevent selection and initalize logic for mouse drag.\n   * @private\n   * @param {Object} e - Mouse event.\n   */\n  _onMouseDown: function (e) {\n    this._preventSelection(true);\n    this._isDragging = false;\n    this._lastMousePosition = {x: e.clientX, y: e.clientY};\n\n    document.addEventListener('mouseup', this._onMouseUp, false);\n    document.addEventListener('mousemove', this._onMouseMove, false);\n  },\n\n  /**\n   * Called on span mouse up, show input if no drag.\n   * @private\n   * @param {Object} e - Mouse event.\n   */\n  _onMouseUp: function (e) {\n    this._preventSelection(false);\n    // If we didn't drag the span then we display the input.\n    if (this._isDragging === false) {\n      this._showInput();\n    }\n    this._isDragging = false;\n\n    document.removeEventListener('mouseup', this._onMouseUp, false);\n    document.removeEventListener('mousemove', this._onMouseMove, false);\n  },\n\n  /**\n   * Check if difference bettween 2 positions is above minimum threshold.\n   * @private\n   * @param {Object} newMousePosition - the new mouse position.\n   * @param {Object} lastMousePosition - the last mouse position.\n   * @returns {Boolean}\n   */\n  _hasMovedEnough: function (newMousePosition, lastMousePosition) {\n    if (Math.abs(newMousePosition.x - lastMousePosition.x) >= this._dragThreshold ||\n      Math.abs(newMousePosition.y - lastMousePosition.y) >= this._dragThreshold) {\n      return true;\n    }\n    return false;\n  },\n\n  _onMouseMove: function (e) {\n    // Get the new mouse position.\n    var newMousePosition = {x: e.clientX, y: e.clientY};\n\n    if (this._hasMovedEnough(newMousePosition, this._lastMousePosition)) {\n      this._isDragging = true;\n    }\n\n    // If we are not dragging don't do anything.\n    if (this._isDragging === false) {\n      return;\n    }\n\n    // Get the increment modifier. Small increment * 0.1, large increment * 10.\n    var modifier = DraggableNumber.MODIFIER_NONE;\n    if (e.shiftKey) {\n      modifier = DraggableNumber.MODIFIER_LARGE;\n    }\n    else if (e.ctrlKey) {\n      modifier = DraggableNumber.MODIFIER_SMALL;\n    }\n\n    // Calculate the delta with previous mouse position.\n    var delta = this._getLargestDelta(newMousePosition, this._lastMousePosition);\n\n    // Get the number offset.\n    var offset = this._getNumberOffset(delta, modifier);\n\n    // Update the input number.\n    var new_value = this.get() + offset;\n    this.set(new_value);\n\n    // Call onchange callback if it exists.\n    if (\"changeCallback\" in this._options) {\n      this._options.changeCallback(new_value);\n    }\n\n    // Save current mouse position.\n    this._lastMousePosition = newMousePosition;\n  },\n\n  /**\n   * Return the number offset based on a delta and a modifier.\n   * @private\n   * @param {Number} delta - a positive or negative number.\n   * @param {Number} modifier - the modifier type.\n   * @returns {Number}\n   */\n  _getNumberOffset: function (delta, modifier) {\n    var increment = 1;\n    if (modifier == DraggableNumber.MODIFIER_SMALL) {\n      increment *= 0.1;\n    }\n    else if (modifier == DraggableNumber.MODIFIER_LARGE) {\n      increment *= 10;\n    }\n    // Negative increment if delta is negative.\n    if (delta < 0) {\n      increment *= -1;\n    }\n    return increment;\n  },\n\n  /**\n   * Return the largest difference between two positions, either x or y.\n   * @private\n   * @param {Object} newMousePosition - the new mouse position.\n   * @param {Object} lastMousePosition - the last mouse position.\n   * @returns {Number}\n   */\n  _getLargestDelta: function (newPosition, oldPosition) {\n    var result = 0;\n    var delta = {\n      x: newPosition.x - oldPosition.x,\n      y: newPosition.y - oldPosition.y,\n    };\n\n    if (Math.abs(delta.x) > Math.abs(delta.y)) {\n      return delta.x;\n    }\n    else {\n      // Inverse the position.y since mouse move to up should increase the _value.\n      return delta.y * -1;\n    }\n  },\n\n  /**\n   * Constrain a value between min and max.\n   * @private\n   * @param {Number} value - The value to constrain.\n   * @returns {Number}\n   */\n  _constraintValue: function (value) {\n    value = Math.min(value, this._max);\n    value = Math.max(value, this._min);\n    return value;\n  }\n};\n\n    return DraggableNumber;\n}));\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./libs/draggable-number.js\n ** module id = 111\n ** module chunks = 0 2 3\n **/"],"sourceRoot":"","file":"ThreeNodes.NodeTypes.Three.js"}